<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>QUnit Tests - Acquia Lift core personalization</title>
    <link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.14.0.css">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>

<script src="http://code.jquery.com/qunit/qunit-1.14.0.js"></script>
<script src="http://code.jquery.com/jquery-1.4.4.js"></script>
<script src="http://sinonjs.org/releases/sinon-1.10.3.js"></script>
<script src="http://sinonjs.org/releases/sinon-qunit-1.0.0.js"></script>
<script src="jquery.cookie.js"></script>
<script src="jquery.once.js"></script>


<script type="text/javascript">
    var Drupal = Drupal || {};
    Drupal.jQuery = $.noConflict();
    Drupal.behaviors = Drupal.behaviors || {};
    Drupal.settings = Drupal.settings || {};
    Drupal.theme = Drupal.theme || {};
    Drupal.personalize = Drupal.personalize || {};
    Drupal.personalize.debug = function(){};

    Drupal.attachBehaviors = function(bread, circus){};
    Drupal.settings.personalize = Drupal.settings.personalize || {};
    Drupal.settings.acquia_lift = Drupal.settings.acquia_lift || {};
    Drupal.settings.acquia_lift.api_class = 'acquiaLiftAPI';
    Drupal.settings.acquia_lift_target = Drupal.settings.acquia_lift_target || {};
    Drupal.settings.acquia_lift_target.nested_tests = Drupal.settings.acquia_lift_target.nested_tests || {};
    Drupal.settings.acquia_lift_target.agent_map = Drupal.settings.acquia_lift_target.agent_map || {};
    Drupal.settings.acquia_lift_target.default_target = 'everyone-else';
    Drupal.settings.acquia_lift_target.test_agent_plugin = 'acquia_lift_learn';
    // Mock the storage
    window.personalizeMockBuckets = {};
    Drupal.personalize.storage = Drupal.personalize.storage || {};
    Drupal.personalize.storage.utilities = {
        getBucket: function () {
            return {
                write: function (key, value) {
                    window.personalizeMockBuckets[key] = value;
                },
                read: function (key) {
                    return window.personalizeMockBuckets[key];
                }
            };
        }
    };
</script>
<script src="../js/acquia_lift.api.js"></script>
<script src="../js/acquia_lift.goals_queue.js"></script>
<script src="../js/acquia_lift.js"></script>
<script src="../js/acquia_lift.page.js"></script>
<script src="core_personalization.tests.js"></script>
</body>
</html>
