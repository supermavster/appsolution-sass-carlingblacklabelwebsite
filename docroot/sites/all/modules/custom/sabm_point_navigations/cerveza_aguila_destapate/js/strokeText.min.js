!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.StrokeText=t()}(this,function(e,t,n){return function(e,t){var F=this;if(F.version="0.12.0",F.elem="string"==typeof e?document.getElementById(e):e,F.options={lineCap:"round",lineJoin:"round",miterLimit:10,lineDashArray:[0,0],debug:!1,disableForFirefox:!1},t&&"object"==typeof t)for(var n in F.options)t.hasOwnProperty(n)&&null!==t[n]&&(F.options[n]=t[n]);function w(e,t){e&&t&&t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)}function I(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function C(e){F[e]&&console.info("┃ "+e+":",F[e])}F.reset=function(){var e=document.getElementById(F.containId);if(e){for(var t in I(F.elem),I(F.canvasId),w(F.elem,e),F.elem.style=F.elemStyle,F.inlineStyles)F.elem.style[t]=F.inlineStyles[t];I(e)}},F.stroke=function(e,t){if(!F.options.disableForFirefox||!/firefox/i.test(navigator.userAgent)){F.reset(),e=Math.abs(e),t="string"==typeof t?t:"red",F.elemStyle=window.getComputedStyle(F.elem),F.inlineStyles={};for(var n=0,i=F.elem.style.length;n<i;n++){var o=F.elem.style[n];F.inlineStyles[o]=F.elemStyle[o]}if(F.txt=F.elem.textContent.trim(),F.txt){var l=F.elemStyle.getPropertyValue("font-size");parseFloat(l),F.elem.style.width="100%",F.elem.style.boxSizing="border-box",F.elem.style.padding="0 "+e+"px";var r=F.elem.offsetWidth,s=F.elem.offsetHeight,a=F.elemStyle.getPropertyValue("display"),d=F.elemStyle.getPropertyValue("font-family"),p=F.elemStyle.getPropertyValue("font-weight"),m=F.elemStyle.getPropertyValue("font-style"),y=parseFloat(F.elemStyle.getPropertyValue("line-height")),f=F.elemStyle.getPropertyValue("text-align"),u=parseFloat(F.elemStyle.getPropertyValue("margin-top")),c=parseFloat(F.elemStyle.getPropertyValue("margin-bottom")),g=e;isNaN(y)&&(y=F.getLineHeight(F.elem)),F.txtLineHeight=y,F.canvasFont=m+" "+p+" "+l+"/"+y+"px "+d,F.containId="strokeText-"+Math.random().toString().substring(2),F.canvasId=F.containId+"-canvas";var x=document.createElement("div");x.setAttribute("id",F.containId),x.style.width=r+"px",x.style.height=s+u+c+2*e+"px",x.style.display=a,x.style.position="relative";var h=document.createElement("canvas");h.setAttribute("id",F.canvasId),h.setAttribute("width",r),h.setAttribute("height",s+4*e),h.style.marginTop=u+"px",h.style.userSelect="none",F.options.debug&&(h.style.border="1px red solid"),w(x,F.elem),I(F.elem),F.elem.style.position="absolute";var v=e+"px";F.elem.style.top=v,F.options.debug&&(F.elem.style.border="1px yellow solid"),x.appendChild(F.elem),x.appendChild(h);var b=h.getContext("2d"),S=0,P=r-2*g;switch(F.canvasTopPos=y/2+e,f){case"center":S=r/2,F.elem.style.left=0;break;case"right":S=r-g,F.elem.style.right=g;break;default:S+=g,F.elem.style.left=g}b&&(b.font=F.canvasFont,b.textBaseline="middle",b.textAlign=f,b.strokeStyle=t,b.lineJoin=F.options.lineJoin,b.lineCap=F.options.lineCap,b.setLineDash(F.options.lineDashArray),b.miterLimit=F.options.miterLimit,b.lineWidth=2*e,F.options.debug&&(console.info("┎--- ",F.containId),console.info('┃ "'+F.txt+'"'),C("canvasFont"),C("canvasTopPos"),C("txtLineHeight"),console.info("┖---")),function(i,e,o,l,r,s){var t=e.split(" "),a="",d="";function p(e,t){var n=a;0<t&&"-"!==d.substr(-1)?n+=" "+e:n+=e,i.measureText(n).width>r&&0<t?(i.strokeText(a,o,l),a=e,l+=s):a=n,d=e}t.forEach(function(e,t){if(-1<e.indexOf("-")){for(var n=e;-1<n.indexOf("-");){var i=n.indexOf("-")+1,o=n.substring(0,i);n=n.substring(i),p(o,t)}p(n,t)}else p(e,t)}),i.strokeText(a,o,l)}(b,F.txt,S,F.canvasTopPos,P,y))}}}}});