var _SETTINGS={API:{Enabled:!0,Log:{Events:{InitializeGame:!0,EndGame:!0,Level:{Begin:!0,End:!0,Win:!0,Lose:!0,Draw:!0}}}},Ad:{Mobile:{Preroll:{Enabled:!1,Duration:5,Width:300,Height:250,Rotation:{Enabled:!1,Weight:{MobileAdInGamePreroll:40,MobileAdInGamePreroll2:40,MobileAdInGamePreroll3:20}}},Header:{Enabled:!1,Duration:5,Width:320,Height:50,Rotation:{Enabled:!1,Weight:{MobileAdInGameHeader:40,MobileAdInGameHeader2:40,MobileAdInGameHeader3:20}}},Footer:{Enabled:!1,Duration:5,Width:320,Height:50,Rotation:{Enabled:!1,Weight:{MobileAdInGameFooter:40,MobileAdInGameFooter2:40,MobileAdInGameFooter3:20}}},End:{Enabled:!1,Duration:1,Width:300,Height:250,Rotation:{Enabled:!1,Weight:{MobileAdInGameEnd:40,MobileAdInGameEnd2:40,MobileAdInGameEnd3:20}}}}},Language:{Default:"en"},DeveloperBranding:{Splash:{Enabled:!1},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,NewWindow:!0,Width:166,Height:61}},Branding:{Splash:{Enabled:!1},Logo:{Enabled:!1,Link:"http://google.com",LinkEnabled:!1,NewWindow:!0,Width:166,Height:61}},MoreGames:{Enabled:!1,Link:"http://www.marketjs.com/game/links/mobile",NewWindow:!0},Gamecenter:{Enabled:!0}},_STRINGS={Ad:{Mobile:{Preroll:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},Header:{ReadyIn:"The game is ready in ",Loading:"Your game is loading...",Close:"Close"},End:{ReadyIn:"Advertisement ends in ",Loading:"Please wait ...",Close:"Close"}}},Splash:{Loading:"Cargando ...",LogoLine1:"Some text here",LogoLine2:"powered by MarketJS",LogoLine3:"none"},Game:{SelectPlayer:"Select Player",Win:"You win!",Lose:"You lose!",Score:"Score",Time:"Time"},Results:{Title:"High score"},PetHop:{TryAgain:"Reintentar",Pause:"Pausa",Score:"Puntaje: ",Best:"Mejor: ",Rabbit:"Rabbit",Chicken:"Chicken",Panda:"Panda",Pig:"Pig",Tiger:"Tiger",Select:"SELECT",Unlock:"UNLOCK",Or:"OR"}},MobileAdInGamePreroll={ad_duration:_SETTINGS.Ad.Mobile.Preroll.Duration,ad_width:_SETTINGS.Ad.Mobile.Preroll.Width,ad_height:_SETTINGS.Ad.Mobile.Preroll.Height,ready_in:_STRINGS.Ad.Mobile.Preroll.ReadyIn,loading:_STRINGS.Ad.Mobile.Preroll.Loading,close:_STRINGS.Ad.Mobile.Preroll.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){if(_SETTINGS.Ad.Mobile.Preroll.Rotation.Enabled){var e=(i=_SETTINGS.Ad.Mobile.Preroll.Rotation.Weight).MobileAdInGamePreroll,t=e+i.MobileAdInGamePreroll2,i=t+i.MobileAdInGamePreroll3,s=Math.floor(100*Math.random());console.log("seed: ",s),s<=e?this.selectedOverlayName="MobileAdInGamePreroll":s<=t?this.selectedOverlayName="MobileAdInGamePreroll2":s<=i&&(this.selectedOverlayName="MobileAdInGamePreroll3"),console.log("Ad rotating preroll enabled")}else this.selectedOverlayName="MobileAdInGamePreroll",console.log("Ad rotating preroll disabled");console.log("selected:",this.selectedOverlayName),this.overlay=$("#"+this.selectedOverlayName),this.box=$("#"+this.selectedOverlayName+"-Box"),this.game=$("#game"),this.boxContents={footer:$("#"+this.selectedOverlayName+"-Box-Footer"),header:$("#"+this.selectedOverlayName+"-Box-Header"),close:$("#"+this.selectedOverlayName+"-Box-Close"),body:$("#"+this.selectedOverlayName+"-Box-Body")},this.box.width(this.ad_width),this.box.height(this.ad_height),this.box.css("left",(this.overlay.width()-this.box.width())/2),this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2),this.overlay.show(this.Timer(this.ad_duration))},Timer:function(e){var t=e,i=setInterval(function(){MobileAdInGamePreroll.boxContents.header.text(MobileAdInGamePreroll.ready_in+t+"..."),MobileAdInGamePreroll.boxContents.footer.text(MobileAdInGamePreroll.loading),0>--t&&(clearInterval(i),MobileAdInGamePreroll.boxContents.close.css("left",MobileAdInGamePreroll.boxContents.body.width()-23),MobileAdInGamePreroll.boxContents.close.show(),MobileAdInGamePreroll.boxContents.header.html(MobileAdInGamePreroll.close),MobileAdInGamePreroll.boxContents.footer.text(""))},1e3)},Close:function(){this.boxContents.close.hide(),this.overlay.hide()}},MobileAdInGameHeader={ad_duration:_SETTINGS.Ad.Mobile.Header.Duration,ad_width:_SETTINGS.Ad.Mobile.Header.Width,ad_height:_SETTINGS.Ad.Mobile.Header.Height,Initialize:function(){if(_SETTINGS.Ad.Mobile.Header.Rotation.Enabled){var e=(i=_SETTINGS.Ad.Mobile.Header.Rotation.Weight).MobileAdInGameHeader,t=e+i.MobileAdInGameHeader2,i=t+i.MobileAdInGameHeader3,s=Math.floor(100*Math.random());console.log("seed: ",s),s<=e?this.selectedOverlayName="MobileAdInGameHeader":s<=t?this.selectedOverlayName="MobileAdInGameHeader2":s<=i&&(this.selectedOverlayName="MobileAdInGameHeader3"),console.log("Ad rotating header enabled")}else this.selectedOverlayName="MobileAdInGameHeader",console.log("Ad rotating header disabled");this.div=$("#"+this.selectedOverlayName),this.game=$("#game"),this.div.width(this.ad_width),this.div.height(this.ad_height),this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2),this.div.css("top",0),this.div.show(this.Timer(this.ad_duration))},Timer:function(e){var t=setInterval(function(){0>--e&&(MobileAdInGameHeader.div.hide(),clearInterval(t))},1e3)}},MobileAdInGameFooter={ad_duration:_SETTINGS.Ad.Mobile.Footer.Duration,ad_width:_SETTINGS.Ad.Mobile.Footer.Width,ad_height:_SETTINGS.Ad.Mobile.Footer.Height,Initialize:function(){if(_SETTINGS.Ad.Mobile.Footer.Rotation.Enabled){var e=(i=_SETTINGS.Ad.Mobile.Footer.Rotation.Weight).MobileAdInGameFooter,t=e+i.MobileAdInGameFooter2,i=t+i.MobileAdInGameFooter3,s=Math.floor(100*Math.random());console.log("seed: ",s),s<=e?this.selectedOverlayName="MobileAdInGameFooter":s<=t?this.selectedOverlayName="MobileAdInGameFooter2":s<=i&&(this.selectedOverlayName="MobileAdInGameFooter3"),console.log("Ad rotating footer enabled")}else this.selectedOverlayName="MobileAdInGameFooter",console.log("Ad rotating footer disabled");this.div=$("#"+this.selectedOverlayName),this.game=$("#game"),this.div.width(this.ad_width),this.div.height(this.ad_height),this.div.css("left",this.game.position().left+(this.game.width()-this.div.width())/2),this.div.css("top",this.game.height()-this.div.height()-5),this.div.show(this.Timer(this.ad_duration))},Timer:function(e){var t=setInterval(function(){0>--e&&(MobileAdInGameFooter.div.hide(),clearInterval(t))},1e3)}},MobileAdInGameEnd={ad_duration:_SETTINGS.Ad.Mobile.End.Duration,ad_width:_SETTINGS.Ad.Mobile.End.Width,ad_height:_SETTINGS.Ad.Mobile.End.Height,ready_in:_STRINGS.Ad.Mobile.End.ReadyIn,loading:_STRINGS.Ad.Mobile.End.Loading,close:_STRINGS.Ad.Mobile.End.Close+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",Initialize:function(){if(_SETTINGS.Ad.Mobile.End.Rotation.Enabled){var e=(i=_SETTINGS.Ad.Mobile.End.Rotation.Weight).MobileAdInGameEnd,t=e+i.MobileAdInGameEnd2,i=t+i.MobileAdInGameEnd3,s=Math.floor(100*Math.random());console.log("seed: ",s),s<=e?this.selectedOverlayName="MobileAdInGameEnd":s<=t?this.selectedOverlayName="MobileAdInGameEnd2":s<=i&&(this.selectedOverlayName="MobileAdInGameEnd3"),console.log("Ad rotating end enabled")}else this.selectedOverlayName="MobileAdInGameEnd",console.log("Ad rotating end disabled");console.log("selected:",this.selectedOverlayName),this.overlay=$("#"+this.selectedOverlayName),this.box=$("#"+this.selectedOverlayName+"-Box"),this.game=$("#game"),this.boxContents={footer:$("#"+this.selectedOverlayName+"-Box-Footer"),header:$("#"+this.selectedOverlayName+"-Box-Header"),close:$("#"+this.selectedOverlayName+"-Box-Close"),body:$("#"+this.selectedOverlayName+"-Box-Body")},this.box.width(this.ad_width),this.box.height(this.ad_height),this.box.css("left",(this.overlay.width()-this.box.width())/2),this.box.css("top",(this.overlay.height()-this.box.height()-this.boxContents.header.height()-this.boxContents.footer.height())/2),this.overlay.show(this.Timer(this.ad_duration))},Timer:function(e){var t=e,i=setInterval(function(){MobileAdInGameEnd.boxContents.header.text(MobileAdInGameEnd.ready_in+t+"..."),MobileAdInGameEnd.boxContents.footer.text(MobileAdInGameEnd.loading),0>--t&&(clearInterval(i),MobileAdInGameEnd.boxContents.close.css("left",MobileAdInGameEnd.boxContents.body.width()-23),MobileAdInGameEnd.boxContents.close.show(),MobileAdInGameEnd.boxContents.header.html(MobileAdInGameEnd.close),MobileAdInGameEnd.boxContents.footer.text(""))},1e3)},Close:function(){this.boxContents.close.hide(),this.overlay.hide()}};function getInternetExplorerVersion(){var e=-1;return"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(e=parseFloat(RegExp.$1)),e}!function(e,t){function i(e,i,s){if(s===t&&1===e.nodeType)if(s="data-"+i.replace(Ee,"-$1").toLowerCase(),s=e.getAttribute(s),"string"==typeof s){try{s="true"===s||"false"!==s&&("null"===s?null:+s+""===s?+s:we.test(s)?Y.parseJSON(s):s)}catch(e){}Y.data(e,i,s)}else s=t;return s}function s(e){for(var t in e)if(("data"!==t||!Y.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function n(){return!1}function o(){return!0}function a(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function r(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function h(e,t,i){if(t=t||0,Y.isFunction(t))return Y.grep(e,function(e,s){return!!t.call(e,s,e)===i});if(t.nodeType)return Y.grep(e,function(e){return e===t===i});if("string"==typeof t){var s=Y.grep(e,function(e){return 1===e.nodeType});if(Zt.test(t))return Y.filter(t,s,!i);t=Y.filter(t,s)}return Y.grep(e,function(e){return 0<=Y.inArray(e,t)===i})}function l(e){var t=ni.split("|");if((e=e.createDocumentFragment()).createElement)for(;t.length;)e.createElement(t.pop());return e}function u(e,t){if(1===t.nodeType&&Y.hasData(e)){var i,s,n;s=Y._data(e);var o=Y._data(t,s),a=s.events;if(a)for(i in delete o.handle,o.events={},a)for(s=0,n=a[i].length;s<n;s++)Y.event.add(t,i,a[i][s]);o.data&&(o.data=Y.extend({},o.data))}}function d(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(i=t.nodeName.toLowerCase())?(t.parentNode&&(t.outerHTML=e.outerHTML),Y.support.html5Clone&&e.innerHTML&&!Y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&pi.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(Y.expando))}function c(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function g(e){pi.test(e.type)&&(e.defaultChecked=e.checked)}function p(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),s=t,n=Ri.length;n--;)if(t=Ri[n]+i,t in e)return t;return s}function m(e,t){return e=t||e,"none"===Y.css(e,"display")||!Y.contains(e.ownerDocument,e)}function f(e,t){for(var i,s,n=[],o=0,a=e.length;o<a;o++)i=e[o],i.style&&(n[o]=Y._data(i,"olddisplay"),t?(!n[o]&&"none"===i.style.display&&(i.style.display=""),""===i.style.display&&m(i)&&(n[o]=Y._data(i,"olddisplay",x(i.nodeName)))):(s=wi(i,"display"),!n[o]&&"none"!==s&&Y._data(i,"olddisplay",s)));for(o=0;o<a;o++)i=e[o],!i.style||t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?n[o]||"":"none");return e}function y(e,t,i){return(e=Mi.exec(t))?Math.max(0,e[1]-(i||0))+(e[2]||"px"):t}function v(e,t,i,s){t=i===(s?"border":"content")?4:"width"===t?1:0;for(var n=0;4>t;t+=2)"margin"===i&&(n+=Y.css(e,i+Bi[t],!0)),s?("content"===i&&(n-=parseFloat(wi(e,"padding"+Bi[t]))||0),"margin"!==i&&(n-=parseFloat(wi(e,"border"+Bi[t]+"Width"))||0)):(n+=parseFloat(wi(e,"padding"+Bi[t]))||0,"padding"!==i&&(n+=parseFloat(wi(e,"border"+Bi[t]+"Width"))||0));return n}function b(e,t,i){var s="width"===t?e.offsetWidth:e.offsetHeight,n=!0,o=Y.support.boxSizing&&"border-box"===Y.css(e,"boxSizing");if(0>=s||null==s){if((0>(s=wi(e,t))||null==s)&&(s=e.style[t]),Ci.test(s))return s;n=o&&(Y.support.boxSizingReliable||s===e.style[t]),s=parseFloat(s)||0}return s+v(e,t,i||(o?"border":"content"),n)+"px"}function x(e){if(Li[e])return Li[e];var t=Y("<"+e+">").appendTo(N.body),i=t.css("display");return t.remove(),"none"!==i&&""!==i||(Ei=N.body.appendChild(Ei||Y.extend(N.createElement("iframe"),{frameBorder:0,width:0,height:0})),Ti&&Ei.createElement||((Ti=(Ei.contentWindow||Ei.contentDocument).document).write("<!doctype html><html><body>"),Ti.close()),t=Ti.body.appendChild(Ti.createElement(e)),i=wi(t,"display"),N.body.removeChild(Ei)),Li[e]=i,i}function w(e,t,i,s){var n;if(Y.isArray(t))Y.each(t,function(t,n){i||Di.test(e)?s(e,n):w(e+"["+("object"==typeof n?t:"")+"]",n,i,s)});else if(i||"object"!==Y.type(t))s(e,t);else for(n in t)w(e+"["+n+"]",t[n],i,s)}function E(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var s,n,o=t.toLowerCase().split(U),a=0,r=o.length;if(Y.isFunction(i))for(;a<r;a++)s=o[a],(n=/^\+/.test(s))&&(s=s.substr(1)||"*"),s=e[s]=e[s]||[],s[n?"unshift":"push"](i)}}function T(e,i,s,n,o,a){var r;o=o||i.dataTypes[0],(a=a||{})[o]=!0;for(var h=0,l=(o=e[o])?o.length:0,u=e===es;h<l&&(u||!r);h++)r=o[h](i,s,n),"string"==typeof r&&(!u||a[r]?r=t:(i.dataTypes.unshift(r),r=T(e,i,s,n,r,a)));return(u||!r)&&!a["*"]&&(r=T(e,i,s,n,"*",a)),r}function S(e,i){var s,n,o=Y.ajaxSettings.flatOptions||{};for(s in i)i[s]!==t&&((o[s]?e:n||(n={}))[s]=i[s]);n&&Y.extend(!0,e,n)}function P(){try{return new e.XMLHttpRequest}catch(e){}}function k(){return setTimeout(function(){ds=t},0),ds=Y.now()}function A(e,t,i){var s,n,o,a,r,h=0,l=fs.length,u=Y.Deferred().always(function(){delete d.elem}),d=function(){for(var t=ds||k(),i=1-((t=Math.max(0,c.startTime+c.duration-t))/c.duration||0),s=0,n=c.tweens.length;s<n;s++)c.tweens[s].run(i);return u.notifyWith(e,[c,i,t]),1>i&&n?t:(u.resolveWith(e,[c]),!1)},c=u.promise({elem:e,props:Y.extend({},t),opts:Y.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:ds||k(),duration:i.duration,tweens:[],createTween:function(t,i){var s=Y.Tween(e,c.opts,t,i,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(s),s},stop:function(t){for(var i=0,s=t?c.tweens.length:0;i<s;i++)c.tweens[i].run(1);return t?u.resolveWith(e,[c,t]):u.rejectWith(e,[c,t]),this}});t=c.props,i=c.opts.specialEasing;for(s in t)if(n=Y.camelCase(s),o=i[n],a=t[s],Y.isArray(a)&&(o=a[1],a=t[s]=a[0]),s!==n&&(t[n]=a,delete t[s]),(r=Y.cssHooks[n])&&"expand"in r)for(s in a=r.expand(a),delete t[n],a)s in t||(t[s]=a[s],i[s]=o);else i[n]=o;for(;h<l;h++)if(s=fs[h].call(c,e,t,c.opts))return s;var g=c;return Y.each(t,function(e,t){for(var i=(ys[e]||[]).concat(ys["*"]),s=0,n=i.length;s<n&&!i[s].call(g,e,t);s++);}),Y.isFunction(c.opts.start)&&c.opts.start.call(e,c),Y.fx.timer(Y.extend(d,{anim:c,queue:c.opts.queue,elem:e})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function _(e,t,i,s,n){return new _.prototype.init(e,t,i,s,n)}function M(e,t){var i,s={height:e},n=0;for(t=t?1:0;4>n;n+=2-t)i=Bi[n],s["margin"+i]=s["padding"+i]=e;return t&&(s.opacity=s.width=e),s}function C(e){return Y.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var I,L,N=e.document,z=e.location,B=e.navigator,R=e.jQuery,H=e.$,O=Array.prototype.push,D=Array.prototype.slice,F=Array.prototype.indexOf,G=Object.prototype.toString,j=Object.prototype.hasOwnProperty,X=String.prototype.trim,Y=function(e,t){return new Y.fn.init(e,t,I)},W=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,q=/\S/,U=/\s+/,$=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,V=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,K=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,J=/^[\],:{}\s]*$/,Q=/(?:^|:|,)(?:\s*\[)+/g,Z=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ee=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,te=/^-ms-/,ie=/-([\da-z])/gi,se=function(e,t){return(t+"").toUpperCase()},ne=function(){N.addEventListener?(N.removeEventListener("DOMContentLoaded",ne,!1),Y.ready()):"complete"===N.readyState&&(N.detachEvent("onreadystatechange",ne),Y.ready())},oe={};Y.fn=Y.prototype={constructor:Y,init:function(e,i,s){var n,o;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if((n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:V.exec(e))&&(n[1]||!i)){if(n[1])return i=i instanceof Y?i[0]:i,o=i&&i.nodeType?i.ownerDocument||i:N,e=Y.parseHTML(n[1],o,!0),K.test(n[1])&&Y.isPlainObject(i)&&this.attr.call(e,i,!0),Y.merge(this,e);if((i=N.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return s.find(e);this.length=1,this[0]=i}return this.context=N,this.selector=e,this}return!i||i.jquery?(i||s).find(e):this.constructor(i).find(e)}return Y.isFunction(e)?s.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),Y.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return D.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){return(e=Y.merge(this.constructor(),e)).prevObject=this,e.context=this.context,"find"===t?e.selector=this.selector+(this.selector?" ":"")+i:t&&(e.selector=this.selector+"."+t+"("+i+")"),e},each:function(e,t){return Y.each(this,e,t)},ready:function(e){return Y.ready.promise().done(e),this},eq:function(e){return-1===(e=+e)?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(D.apply(this,arguments),"slice",D.call(arguments).join(","))},map:function(e){return this.pushStack(Y.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:O,sort:[].sort,splice:[].splice},Y.fn.init.prototype=Y.fn,Y.extend=Y.fn.extend=function(){var e,i,s,n,o,a,r=arguments[0]||{},h=1,l=arguments.length,u=!1;for("boolean"==typeof r&&(u=r,r=arguments[1]||{},h=2),"object"!=typeof r&&!Y.isFunction(r)&&(r={}),l===h&&(r=this,--h);h<l;h++)if(null!=(e=arguments[h]))for(i in e)s=r[i],n=e[i],r!==n&&(u&&n&&(Y.isPlainObject(n)||(o=Y.isArray(n)))?(o?(o=!1,a=s&&Y.isArray(s)?s:[]):a=s&&Y.isPlainObject(s)?s:{},r[i]=Y.extend(u,a,n)):n!==t&&(r[i]=n));return r},Y.extend({noConflict:function(t){return e.$===Y&&(e.$=H),t&&e.jQuery===Y&&(e.jQuery=R),Y},isReady:!1,readyWait:1,holdReady:function(e){e?Y.readyWait++:Y.ready(!0)},ready:function(e){if(!(!0===e?--Y.readyWait:Y.isReady)){if(!N.body)return setTimeout(Y.ready,1);Y.isReady=!0,!0!==e&&0<--Y.readyWait||(L.resolveWith(N,[Y]),Y.fn.trigger&&Y(N).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===Y.type(e)},isArray:Array.isArray||function(e){return"array"===Y.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):oe[G.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==Y.type(e)||e.nodeType||Y.isWindow(e))return!1;try{if(e.constructor&&!j.call(e,"constructor")&&!j.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}for(var i in e);return i===t||j.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,i){var s;return e&&"string"==typeof e?("boolean"==typeof t&&(i=t,t=0),t=t||N,(s=K.exec(e))?[t.createElement(s[1])]:(s=Y.buildFragment([e],t,i?null:[]),Y.merge([],(s.cacheable?Y.clone(s.fragment):s.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=Y.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):J.test(t.replace(Z,"@").replace(ee,"]").replace(Q,""))?new Function("return "+t)():void Y.error("Invalid JSON: "+t)):null},parseXML:function(i){var s,n;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(n=new DOMParser,s=n.parseFromString(i,"text/xml")):((s=new ActiveXObject("Microsoft.XMLDOM")).async="false",s.loadXML(i))}catch(e){s=t}return(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)&&Y.error("Invalid XML: "+i),s},noop:function(){},globalEval:function(t){t&&q.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(te,"ms-").replace(ie,se)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,i,s){var n,o=0,a=e.length,r=a===t||Y.isFunction(e);if(s)if(r){for(n in e)if(!1===i.apply(e[n],s))break}else for(;o<a&&!1!==i.apply(e[o++],s););else if(r){for(n in e)if(!1===i.call(e[n],n,e[n]))break}else for(;o<a&&!1!==i.call(e[o],o,e[o++]););return e},trim:X&&!X.call("\ufeffÂ ")?function(e){return null==e?"":X.call(e)}:function(e){return null==e?"":(e+"").replace($,"")},makeArray:function(e,t){var i,s=t||[];return null!=e&&(i=Y.type(e),null==e.length||"string"===i||"function"===i||"regexp"===i||Y.isWindow(e)?O.call(s,e):Y.merge(s,e)),s},inArray:function(e,t,i){var s;if(t){if(F)return F.call(t,e,i);for(s=t.length,i=i?0>i?Math.max(0,s+i):i:0;i<s;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var s=i.length,n=e.length,o=0;if("number"==typeof s)for(;o<s;o++)e[n++]=i[o];else for(;i[o]!==t;)e[n++]=i[o++];return e.length=n,e},grep:function(e,t,i){var s,n=[],o=0,a=e.length;for(i=!!i;o<a;o++)s=!!t(e[o],o),i!==s&&n.push(e[o]);return n},map:function(e,i,s){var n,o,a=[],r=0,h=e.length;if(e instanceof Y||h!==t&&"number"==typeof h&&(0<h&&e[0]&&e[h-1]||0===h||Y.isArray(e)))for(;r<h;r++)n=i(e[r],r,s),null!=n&&(a[a.length]=n);else for(o in e)n=i(e[o],o,s),null!=n&&(a[a.length]=n);return a.concat.apply([],a)},guid:1,proxy:function(e,i){var s,n,o;return"string"==typeof i&&(s=e[i],i=e,e=s),Y.isFunction(e)?(n=D.call(arguments,2),(o=function(){return e.apply(i,n.concat(D.call(arguments)))}).guid=e.guid=e.guid||Y.guid++,o):t},access:function(e,i,s,n,o,a,r){var h,l=null==s,u=0,d=e.length;if(s&&"object"==typeof s){for(u in s)Y.access(e,i,u,s[u],1,a,n);o=1}else if(n!==t){if(h=r===t&&Y.isFunction(n),l&&(h?(h=i,i=function(e,t,i){return h.call(Y(e),i)}):(i.call(e,n),i=null)),i)for(;u<d;u++)i(e[u],s,h?n.call(e[u],u,i(e[u],s)):n,r);o=1}return o?e:l?i.call(e):d?i(e[0],s):a},now:function(){return(new Date).getTime()}}),Y.ready.promise=function(t){if(!L)if(L=Y.Deferred(),"complete"===N.readyState)setTimeout(Y.ready,1);else if(N.addEventListener)N.addEventListener("DOMContentLoaded",ne,!1),e.addEventListener("load",Y.ready,!1);else{N.attachEvent("onreadystatechange",ne),e.attachEvent("onload",Y.ready);var i=!1;try{i=null==e.frameElement&&N.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!Y.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}Y.ready()}}()}return L.promise(t)},Y.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){oe["[object "+t+"]"]=t.toLowerCase()}),I=Y(N);var ae={};Y.Callbacks=function(e){var i;if("string"==typeof e){if(!(i=ae[e])){var s=ae[i=e]={};Y.each(i.split(U),function(e,t){s[t]=!0}),i=s}}else i=Y.extend({},e);var n,o,a,r,h,l,u=[],d=!(e=i).once&&[],c=function(t){for(n=e.memory&&t,o=!0,l=r||0,r=0,h=u.length,a=!0;u&&l<h;l++)if(!1===u[l].apply(t[0],t[1])&&e.stopOnFalse){n=!1;break}a=!1,u&&(d?d.length&&c(d.shift()):n?u=[]:g.disable())},g={add:function(){if(u){var t=u.length;!function t(i){Y.each(i,function(i,s){var n=Y.type(s);"function"!==n||e.unique&&g.has(s)?s&&s.length&&"string"!==n&&t(s):u.push(s)})}(arguments),a?h=u.length:n&&(r=t,c(n))}return this},remove:function(){return u&&Y.each(arguments,function(e,t){for(var i;-1<(i=Y.inArray(t,u,i));)u.splice(i,1),a&&(i<=h&&h--,i<=l&&l--)}),this},has:function(e){return-1<Y.inArray(e,u)},empty:function(){return u=[],this},disable:function(){return u=d=n=t,this},disabled:function(){return!u},lock:function(){return d=t,n||g.disable(),this},locked:function(){return!d},fireWith:function(e,t){return t=[e,(t=t||[]).slice?t.slice():t],u&&(!o||d)&&(a?d.push(t):c(t)),this},fire:function(){return g.fireWith(this,arguments),this},fired:function(){return!!o}};return g},Y.extend({Deferred:function(e){var t=[["resolve","done",Y.Callbacks("once memory"),"resolved"],["reject","fail",Y.Callbacks("once memory"),"rejected"],["notify","progress",Y.Callbacks("memory")]],i="pending",s={state:function(){return i},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Y.Deferred(function(i){Y.each(t,function(t,s){var o=s[0],a=e[t];n[s[1]](Y.isFunction(a)?function(){var e=a.apply(this,arguments);e&&Y.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o+"With"](this===n?i:this,[e])}:i[o])}),e=null}).promise()},promise:function(e){return null!=e?Y.extend(e,s):s}},n={};return s.pipe=s.then,Y.each(t,function(e,o){var a=o[2],r=o[3];s[o[1]]=a.add,r&&a.add(function(){i=r},t[1^e][2].disable,t[2][2].lock),n[o[0]]=a.fire,n[o[0]+"With"]=a.fireWith}),s.promise(n),e&&e.call(n,n),n},when:function(e){var t,i,s,n=0,o=D.call(arguments),a=o.length,r=1!==a||e&&Y.isFunction(e.promise)?a:0,h=1===r?e:Y.Deferred(),l=function(e,i,s){return function(n){i[e]=this,s[e]=1<arguments.length?D.call(arguments):n,s===t?h.notifyWith(i,s):--r||h.resolveWith(i,s)}};if(1<a)for(t=Array(a),i=Array(a),s=Array(a);n<a;n++)o[n]&&Y.isFunction(o[n].promise)?o[n].promise().done(l(n,s,o)).fail(h.reject).progress(l(n,i,t)):--r;return r||h.resolveWith(s,o),h.promise()}});var re,he,le,ue,de,ce,ge,pe,me,fe,ye,ve,be=Y,xe=N.createElement("div");if(xe.setAttribute("className","t"),xe.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",le=xe.getElementsByTagName("*"),(ue=xe.getElementsByTagName("a")[0]).style.cssText="top:1px;float:left;opacity:.5",le&&le.length){ce=(de=N.createElement("select")).appendChild(N.createElement("option")),ge=xe.getElementsByTagName("input")[0],he={leadingWhitespace:3===xe.firstChild.nodeType,tbody:!xe.getElementsByTagName("tbody").length,htmlSerialize:!!xe.getElementsByTagName("link").length,style:/top/.test(ue.getAttribute("style")),hrefNormalized:"/a"===ue.getAttribute("href"),opacity:/^0.5/.test(ue.style.opacity),cssFloat:!!ue.style.cssFloat,checkOn:"on"===ge.value,optSelected:ce.selected,getSetAttribute:"t"!==xe.className,enctype:!!N.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==N.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===N.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},ge.checked=!0,he.noCloneChecked=ge.cloneNode(!0).checked,de.disabled=!0,he.optDisabled=!ce.disabled;try{delete xe.test}catch(e){he.deleteExpando=!1}if(!xe.addEventListener&&xe.attachEvent&&xe.fireEvent&&(xe.attachEvent("onclick",ve=function(){he.noCloneEvent=!1}),xe.cloneNode(!0).fireEvent("onclick"),xe.detachEvent("onclick",ve)),(ge=N.createElement("input")).value="t",ge.setAttribute("type","radio"),he.radioValue="t"===ge.value,ge.setAttribute("checked","checked"),ge.setAttribute("name","t"),xe.appendChild(ge),(pe=N.createDocumentFragment()).appendChild(xe.lastChild),he.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,he.appendChecked=ge.checked,pe.removeChild(ge),pe.appendChild(xe),xe.attachEvent)for(fe in{submit:!0,change:!0,focusin:!0})me="on"+fe,(ye=me in xe)||(xe.setAttribute(me,"return;"),ye="function"==typeof xe[me]),he[fe+"Bubbles"]=ye;Y(function(){var t,i,s,n,o=N.getElementsByTagName("body")[0];o&&((t=N.createElement("div")).style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(t,o.firstChild),i=N.createElement("div"),t.appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(s=i.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",ye=0===s[0].offsetHeight,s[0].style.display="",s[1].style.display="none",he.reliableHiddenOffsets=ye&&0===s[0].offsetHeight,i.innerHTML="",i.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",he.boxSizing=4===i.offsetWidth,he.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,e.getComputedStyle&&(he.pixelPosition="1%"!==(e.getComputedStyle(i,null)||{}).top,he.boxSizingReliable="4px"===(e.getComputedStyle(i,null)||{width:"4px"}).width,(n=N.createElement("div")).style.cssText=i.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",n.style.marginRight=n.style.width="0",i.style.width="1px",i.appendChild(n),he.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),void 0!==i.style.zoom&&(i.innerHTML="",i.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",he.inlineBlockNeedsLayout=3===i.offsetWidth,i.style.display="block",i.style.overflow="visible",i.innerHTML="<div></div>",i.firstChild.style.width="5px",he.shrinkWrapBlocks=3!==i.offsetWidth,t.style.zoom=1),o.removeChild(t))}),pe.removeChild(xe),le=ue=de=ce=ge=pe=xe=null,re=he}else re={};be.support=re;var we=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ee=/([A-Z])/g;Y.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(Y.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?Y.cache[e[Y.expando]]:e[Y.expando])&&!s(e)},data:function(e,i,s,n){if(Y.acceptData(e)){var o,a,r=Y.expando,h="string"==typeof i,l=e.nodeType,u=l?Y.cache:e,d=l?e[r]:e[r]&&r;if(d&&u[d]&&(n||u[d].data)||!h||s!==t)return d||(l?e[r]=d=Y.deletedIds.pop()||Y.guid++:d=r),u[d]||(u[d]={},l||(u[d].toJSON=Y.noop)),"object"!=typeof i&&"function"!=typeof i||(n?u[d]=Y.extend(u[d],i):u[d].data=Y.extend(u[d].data,i)),o=u[d],n||(o.data||(o.data={}),o=o.data),s!==t&&(o[Y.camelCase(i)]=s),h?null==(a=o[i])&&(a=o[Y.camelCase(i)]):a=o,a}},removeData:function(e,t,i){if(Y.acceptData(e)){var n,o,a,r=e.nodeType,h=r?Y.cache:e,l=r?e[Y.expando]:Y.expando;if(h[l]){if(t&&(n=i?h[l]:h[l].data)){Y.isArray(t)||(t in n?t=[t]:t=(t=Y.camelCase(t))in n?[t]:t.split(" ")),o=0;for(a=t.length;o<a;o++)delete n[t[o]];if(!(i?s:Y.isEmptyObject)(n))return}if(!i&&(delete h[l].data,!s(h[l])))return;r?Y.cleanData([e],!0):Y.support.deleteExpando||h!=h.window?delete h[l]:h[l]=null}}},_data:function(e,t,i){return Y.data(e,t,i,!0)},acceptData:function(e){var t=e.nodeName&&Y.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),Y.fn.extend({data:function(e,s){var n,o,a,r,h,l=this[0],u=0,d=null;if(e===t){if(this.length&&(d=Y.data(l),1===l.nodeType&&!Y._data(l,"parsedAttrs"))){for(h=(a=l.attributes).length;u<h;u++)r=a[u].name,r.indexOf("data-")||(r=Y.camelCase(r.substring(5)),i(l,r,d[r]));Y._data(l,"parsedAttrs",!0)}return d}return"object"==typeof e?this.each(function(){Y.data(this,e)}):((n=e.split(".",2))[1]=n[1]?"."+n[1]:"",o=n[1]+"!",Y.access(this,function(s){if(s===t)return d=this.triggerHandler("getData"+o,[n[0]]),d===t&&l&&(d=Y.data(l,e),d=i(l,e,d)),d===t&&n[1]?this.data(n[0]):d;n[1]=s,this.each(function(){var t=Y(this);t.triggerHandler("setData"+o,n),Y.data(this,e,s),t.triggerHandler("changeData"+o,n)})},null,s,1<arguments.length,null,!1))},removeData:function(e){return this.each(function(){Y.removeData(this,e)})}}),Y.extend({queue:function(e,t,i){var s;if(e)return t=(t||"fx")+"queue",s=Y._data(e,t),i&&(!s||Y.isArray(i)?s=Y._data(e,t,Y.makeArray(i)):s.push(i)),s||[]},dequeue:function(e,t){t=t||"fx";var i=Y.queue(e,t),s=i.length,n=i.shift(),o=Y._queueHooks(e,t);"inprogress"===n&&(n=i.shift(),s--),n&&("fx"===t&&i.unshift("inprogress"),delete o.stop,n.call(e,function(){Y.dequeue(e,t)},o)),!s&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Y._data(e,i)||Y._data(e,i,{empty:Y.Callbacks("once memory").add(function(){Y.removeData(e,t+"queue",!0),Y.removeData(e,i,!0)})})}}),Y.fn.extend({queue:function(e,i){var s=2;return"string"!=typeof e&&(i=e,e="fx",s--),arguments.length<s?Y.queue(this[0],e):i===t?this:this.each(function(){var t=Y.queue(this,e,i);Y._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&Y.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Y.dequeue(this,e)})},delay:function(e,t){return e=Y.fx&&Y.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,i){var s=setTimeout(t,e);i.stop=function(){clearTimeout(s)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var s,n=1,o=Y.Deferred(),a=this,r=this.length,h=function(){--n||o.resolveWith(a,[a])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";r--;)(s=Y._data(a[r],e+"queueHooks"))&&s.empty&&(n++,s.empty.add(h));return h(),o.promise(i)}});var Te,Se,Pe,ke=/[\t\r\n]/g,Ae=/\r/g,_e=/^(?:button|input)$/i,Me=/^(?:button|input|object|select|textarea)$/i,Ce=/^a(?:rea|)$/i,Ie=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Le=Y.support.getSetAttribute;Y.fn.extend({attr:function(e,t){return Y.access(this,Y.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){Y.removeAttr(this,e)})},prop:function(e,t){return Y.access(this,Y.prop,e,t,1<arguments.length)},removeProp:function(e){return e=Y.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(e){}})},addClass:function(e){var t,i,s,n,o,a,r;if(Y.isFunction(e))return this.each(function(t){Y(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(U),i=0,s=this.length;i<s;i++)if(n=this[i],1===n.nodeType)if(n.className||1!==t.length){for(o=" "+n.className+" ",a=0,r=t.length;a<r;a++)0>o.indexOf(" "+t[a]+" ")&&(o+=t[a]+" ");n.className=Y.trim(o)}else n.className=e;return this},removeClass:function(e){var i,s,n,o,a,r,h;if(Y.isFunction(e))return this.each(function(t){Y(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(U),r=0,h=this.length;r<h;r++)if(n=this[r],1===n.nodeType&&n.className){for(s=(" "+n.className+" ").replace(ke," "),o=0,a=i.length;o<a;o++)for(;0<=s.indexOf(" "+i[o]+" ");)s=s.replace(" "+i[o]+" "," ");n.className=e?Y.trim(s):""}return this},toggleClass:function(e,t){var i=typeof e,s="boolean"==typeof t;return Y.isFunction(e)?this.each(function(i){Y(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var n,o=0,a=Y(this),r=t,h=e.split(U);n=h[o++];)r=s?r:!a.hasClass(n),a[r?"addClass":"removeClass"](n);else"undefined"!==i&&"boolean"!==i||(this.className&&Y._data(this,"__className__",this.className),this.className=this.className||!1===e?"":Y._data(this,"__className__")||"")})},hasClass:function(e){e=" "+e+" ";for(var t=0,i=this.length;t<i;t++)if(1===this[t].nodeType&&0<=(" "+this[t].className+" ").replace(ke," ").indexOf(e))return!0;return!1},val:function(e){var i,s,n,o=this[0];return arguments.length?(n=Y.isFunction(e),this.each(function(s){var o,a=Y(this);1!==this.nodeType||(null==(o=n?e.call(this,s,a.val()):e)?o="":"number"==typeof o?o+="":Y.isArray(o)&&(o=Y.map(o,function(e){return null==e?"":e+""})),(i=Y.valHooks[this.type]||Y.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,o,"value")!==t)||(this.value=o)})):o?(i=Y.valHooks[o.type]||Y.valHooks[o.nodeName.toLowerCase()])&&"get"in i&&(s=i.get(o,"value"))!==t?s:"string"==typeof(s=o.value)?s.replace(Ae,""):null==s?"":s:void 0}}),Y.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,s=e.selectedIndex,n=[],o=e.options,a="select-one"===e.type;if(0>s)return null;for(e=a?s:0,i=a?s+1:o.length;e<i;e++)if(t=o[e],t.selected&&(Y.support.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!Y.nodeName(t.parentNode,"optgroup"))){if(t=Y(t).val(),a)return t;n.push(t)}return a&&!n.length&&o.length?Y(o[s]).val():n},set:function(e,t){var i=Y.makeArray(t);return Y(e).find("option").each(function(){this.selected=0<=Y.inArray(Y(this).val(),i)}),i.length||(e.selectedIndex=-1),i}}},attrFn:{},attr:function(e,i,s,n){var o,a,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return n&&Y.isFunction(Y.fn[i])?Y(e)[i](s):void 0===e.getAttribute?Y.prop(e,i,s):((n=1!==r||!Y.isXMLDoc(e))&&(i=i.toLowerCase(),a=Y.attrHooks[i]||(Ie.test(i)?Se:Te)),s!==t?null===s?void Y.removeAttr(e,i):a&&"set"in a&&n&&(o=a.set(e,s,i))!==t?o:(e.setAttribute(i,s+""),s):a&&"get"in a&&n&&null!==(o=a.get(e,i))?o:null===(o=e.getAttribute(i))?t:o)},removeAttr:function(e,t){var i,s,n,o,a=0;if(t&&1===e.nodeType)for(s=t.split(U);a<s.length;a++)(n=s[a])&&(i=Y.propFix[n]||n,o=Ie.test(n),o||Y.attr(e,n,""),e.removeAttribute(Le?n:i),o&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(_e.test(e.nodeName)&&e.parentNode)Y.error("type property can't be changed");else if(!Y.support.radioValue&&"radio"===t&&Y.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return Te&&Y.nodeName(e,"button")?Te.get(e,t):t in e?e.value:null},set:function(e,t,i){if(Te&&Y.nodeName(e,"button"))return Te.set(e,t,i);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,s){var n,o,a,r=e.nodeType;if(e&&3!==r&&8!==r&&2!==r)return a=1!==r||!Y.isXMLDoc(e),a&&(i=Y.propFix[i]||i,o=Y.propHooks[i]),s!==t?o&&"set"in o&&(n=o.set(e,s,i))!==t?n:e[i]=s:o&&"get"in o&&null!==(n=o.get(e,i))?n:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):Me.test(e.nodeName)||Ce.test(e.nodeName)&&e.href?0:t}}}}),Se={get:function(e,i){var s,n=Y.prop(e,i);return!0===n||"boolean"!=typeof n&&(s=e.getAttributeNode(i))&&!1!==s.nodeValue?i.toLowerCase():t},set:function(e,t,i){var s;return!1===t?Y.removeAttr(e,i):((s=Y.propFix[i]||i)in e&&(e[s]=!0),e.setAttribute(i,i.toLowerCase())),i}},Le||(Pe={name:!0,id:!0,coords:!0},Te=Y.valHooks.button={get:function(e,i){var s;return(s=e.getAttributeNode(i))&&(Pe[i]?""!==s.value:s.specified)?s.value:t},set:function(e,t,i){var s=e.getAttributeNode(i);return s||(s=N.createAttribute(i),e.setAttributeNode(s)),s.value=t+""}},Y.each(["width","height"],function(e,t){Y.attrHooks[t]=Y.extend(Y.attrHooks[t],{set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}})}),Y.attrHooks.contenteditable={get:Te.get,set:function(e,t,i){""===t&&(t="false"),Te.set(e,t,i)}}),Y.support.hrefNormalized||Y.each(["href","src","width","height"],function(e,i){Y.attrHooks[i]=Y.extend(Y.attrHooks[i],{get:function(e){return null===(e=e.getAttribute(i,2))?t:e}})}),Y.support.style||(Y.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),Y.support.optSelected||(Y.propHooks.selected=Y.extend(Y.propHooks.selected,{get:function(e){return(e=e.parentNode)&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),Y.support.enctype||(Y.propFix.enctype="encoding"),Y.support.checkOn||Y.each(["radio","checkbox"],function(){Y.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),Y.each(["radio","checkbox"],function(){Y.valHooks[this]=Y.extend(Y.valHooks[this],{set:function(e,t){if(Y.isArray(t))return e.checked=0<=Y.inArray(Y(e).val(),t)}})});var Ne=/^(?:textarea|input|select)$/i,ze=/^([^\.]*|)(?:\.(.+)|)$/,Be=/(?:^|\s)hover(\.\S+|)\b/,Re=/^key/,He=/^(?:mouse|contextmenu)|click/,Oe=/^(?:focusinfocus|focusoutblur)$/,De=function(e){return Y.event.special.hover?e:e.replace(Be,"mouseenter$1 mouseleave$1")};Y.event={add:function(e,i,s,n,o){var a,r,h,l,u,d,c,g,p;if(3!==e.nodeType&&8!==e.nodeType&&i&&s&&(a=Y._data(e))){for(s.handler&&(s=(c=s).handler,o=c.selector),s.guid||(s.guid=Y.guid++),(h=a.events)||(a.events=h={}),(r=a.handle)||(a.handle=r=function(e){return void 0===Y||e&&Y.event.triggered===e.type?t:Y.event.dispatch.apply(r.elem,arguments)},r.elem=e),i=Y.trim(De(i)).split(" "),a=0;a<i.length;a++)u=(l=ze.exec(i[a])||[])[1],d=(l[2]||"").split(".").sort(),p=Y.event.special[u]||{},u=(o?p.delegateType:p.bindType)||u,p=Y.event.special[u]||{},l=Y.extend({type:u,origType:l[1],data:n,handler:s,guid:s.guid,selector:o,needsContext:o&&Y.expr.match.needsContext.test(o),namespace:d.join(".")},c),(g=h[u])||((g=h[u]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,n,d,r))||(e.addEventListener?e.addEventListener(u,r,!1):e.attachEvent&&e.attachEvent("on"+u,r)),p.add&&(p.add.call(e,l),l.handler.guid||(l.handler.guid=s.guid)),o?g.splice(g.delegateCount++,0,l):g.push(l),Y.event.global[u]=!0;e=null}},global:{},remove:function(e,t,i,s,n){var o,a,r,h,l,u,d,c,g,p,m=Y.hasData(e)&&Y._data(e);if(m&&(d=m.events)){for(t=Y.trim(De(t||"")).split(" "),o=0;o<t.length;o++)if(a=ze.exec(t[o])||[],r=h=a[1],a=a[2],r){for(c=Y.event.special[r]||{},l=(g=d[r=(s?c.delegateType:c.bindType)||r]||[]).length,a=a?RegExp("(^|\\.)"+a.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=0;u<g.length;u++)p=g[u],(n||h===p.origType)&&(!i||i.guid===p.guid)&&(!a||a.test(p.namespace))&&(!s||s===p.selector||"**"===s&&p.selector)&&(g.splice(u--,1),p.selector&&g.delegateCount--,c.remove&&c.remove.call(e,p));0===g.length&&l!==g.length&&((!c.teardown||!1===c.teardown.call(e,a,m.handle))&&Y.removeEvent(e,r,m.handle),delete d[r])}else for(r in d)Y.event.remove(e,r+t[o],i,s,!0);Y.isEmptyObject(d)&&(delete m.handle,Y.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,s,n,o){if(!n||3!==n.nodeType&&8!==n.nodeType){var a,r,h,l,u,d,c,g=i.type||i;if(l=[],!Oe.test(g+Y.event.triggered)&&(0<=g.indexOf("!")&&(g=g.slice(0,-1),a=!0),0<=g.indexOf(".")&&(g=(l=g.split(".")).shift(),l.sort()),n&&!Y.event.customEvent[g]||Y.event.global[g]))if(i="object"==typeof i?i[Y.expando]?i:new Y.Event(g,i):new Y.Event(g),i.type=g,i.isTrigger=!0,i.exclusive=a,i.namespace=l.join("."),i.namespace_re=i.namespace?RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0>g.indexOf(":")?"on"+g:"",n){if(i.result=t,i.target||(i.target=n),(s=null!=s?Y.makeArray(s):[]).unshift(i),!(u=Y.event.special[g]||{}).trigger||!1!==u.trigger.apply(n,s)){if(c=[[n,u.bindType||g]],!o&&!u.noBubble&&!Y.isWindow(n)){for(r=u.delegateType||g,a=Oe.test(r+g)?n:n.parentNode,h=n;a;a=a.parentNode)c.push([a,r]),h=a;h===(n.ownerDocument||N)&&c.push([h.defaultView||h.parentWindow||e,r])}for(r=0;r<c.length&&!i.isPropagationStopped();r++)a=c[r][0],i.type=c[r][1],(d=(Y._data(a,"events")||{})[i.type]&&Y._data(a,"handle"))&&d.apply(a,s),(d=l&&a[l])&&Y.acceptData(a)&&d.apply&&!1===d.apply(a,s)&&i.preventDefault();return i.type=g,!o&&!i.isDefaultPrevented()&&(!u._default||!1===u._default.apply(n.ownerDocument,s))&&("click"!==g||!Y.nodeName(n,"a"))&&Y.acceptData(n)&&l&&n[g]&&("focus"!==g&&"blur"!==g||0!==i.target.offsetWidth)&&!Y.isWindow(n)&&((h=n[l])&&(n[l]=null),Y.event.triggered=g,n[g](),Y.event.triggered=t,h&&(n[l]=h)),i.result}}else for(r in n=Y.cache,n)n[r].events&&n[r].events[g]&&Y.event.trigger(i,s,n[r].handle.elem,!0)}},dispatch:function(i){i=Y.event.fix(i||e.event);var s,n,o,a,r,h,l=(Y._data(this,"events")||{})[i.type]||[],u=l.delegateCount,d=D.call(arguments),c=!i.exclusive&&!i.namespace,g=Y.event.special[i.type]||{},p=[];if(d[0]=i,i.delegateTarget=this,!g.preDispatch||!1!==g.preDispatch.call(this,i)){if(u&&(!i.button||"click"!==i.type))for(n=i.target;n!=this;n=n.parentNode||this)if(!0!==n.disabled||"click"!==i.type){for(a={},r=[],s=0;s<u;s++)o=l[s],h=o.selector,a[h]===t&&(a[h]=o.needsContext?0<=Y(h,this).index(n):Y.find(h,this,null,[n]).length),a[h]&&r.push(o);r.length&&p.push({elem:n,matches:r})}for(l.length>u&&p.push({elem:this,matches:l.slice(u)}),s=0;s<p.length&&!i.isPropagationStopped();s++)for(a=p[s],i.currentTarget=a.elem,n=0;n<a.matches.length&&!i.isImmediatePropagationStopped();n++)o=a.matches[n],(c||!i.namespace&&!o.namespace||i.namespace_re&&i.namespace_re.test(o.namespace))&&(i.data=o.data,i.handleObj=o,o=((Y.event.special[o.origType]||{}).handle||o.handler).apply(a.elem,d),o!==t&&(i.result=o,!1===o&&(i.preventDefault(),i.stopPropagation())));return g.postDispatch&&g.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var s,n,o,a=i.button,r=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=(s=e.target.ownerDocument||N).documentElement,o=s.body,e.pageX=i.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=i.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),!e.relatedTarget&&r&&(e.relatedTarget=r===e.target?i.toElement:r),!e.which&&a!==t&&(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[Y.expando])return e;var t,i,s=e,n=Y.event.fixHooks[e.type]||{},o=n.props?this.props.concat(n.props):this.props;for(e=Y.Event(s),t=o.length;t;)i=o[--t],e[i]=s[i];return e.target||(e.target=s.srcElement||N),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,n.filter?n.filter(e,s):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){Y.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,s){e=Y.extend(new Y.Event,i,{type:e,isSimulated:!0,originalEvent:{}}),s?Y.event.trigger(e,null,t):Y.event.dispatch.call(t,e),e.isDefaultPrevented()&&i.preventDefault()}},Y.event.handle=Y.event.dispatch,Y.removeEvent=N.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){t="on"+t,e.detachEvent&&(void 0===e[t]&&(e[t]=null),e.detachEvent(t,i))},Y.Event=function(e,t){if(!(this instanceof Y.Event))return new Y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?o:n):this.type=e,t&&Y.extend(this,t),this.timeStamp=e&&e.timeStamp||Y.now(),this[Y.expando]=!0},Y.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n},Y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){Y.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,s=e.relatedTarget,n=e.handleObj;return s&&(s===this||Y.contains(this,s))||(e.type=n.origType,i=n.handler.apply(this,arguments),e.type=t),i}}}),Y.support.submitBubbles||(Y.event.special.submit={setup:function(){if(Y.nodeName(this,"form"))return!1;Y.event.add(this,"click._submit keypress._submit",function(e){e=e.target,(e=Y.nodeName(e,"input")||Y.nodeName(e,"button")?e.form:t)&&!Y._data(e,"_submit_attached")&&(Y.event.add(e,"submit._submit",function(e){e._submit_bubble=!0}),Y._data(e,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&Y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(Y.nodeName(this,"form"))return!1;Y.event.remove(this,"._submit")}}),Y.support.changeBubbles||(Y.event.special.change={setup:function(){if(Ne.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(Y.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),Y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),Y.event.simulate("change",this,e,!0)})),!1;Y.event.add(this,"beforeactivate._change",function(e){e=e.target,Ne.test(e.nodeName)&&!Y._data(e,"_change_attached")&&(Y.event.add(e,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&Y.event.simulate("change",this.parentNode,e,!0)}),Y._data(e,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return Y.event.remove(this,"._change"),!Ne.test(this.nodeName)}}),Y.support.focusinBubbles||Y.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,s=function(e){Y.event.simulate(t,e.target,Y.event.fix(e),!0)};Y.event.special[t]={setup:function(){0==i++&&N.addEventListener(e,s,!0)},teardown:function(){0==--i&&N.removeEventListener(e,s,!0)}}}),Y.fn.extend({on:function(e,i,s,o,a){var r,h;if("object"==typeof e){"string"!=typeof i&&(s=s||i,i=t);for(h in e)this.on(h,i,s,e[h],a);return this}if(null==s&&null==o?(o=i,s=i=t):null==o&&("string"==typeof i?(o=s,s=t):(o=s,s=i,i=t)),!1===o)o=n;else if(!o)return this;return 1===a&&(r=o,(o=function(e){return Y().off(e),r.apply(this,arguments)}).guid=r.guid||(r.guid=Y.guid++)),this.each(function(){Y.event.add(this,e,o,s,i)})},one:function(e,t,i,s){return this.on(e,t,i,s,1)},off:function(e,i,s){var o,a;if(e&&e.preventDefault&&e.handleObj)return o=e.handleObj,Y(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==typeof e){for(a in e)this.off(a,i,e[a]);return this}return!1!==i&&"function"!=typeof i||(s=i,i=t),!1===s&&(s=n),this.each(function(){Y.event.remove(this,e,s,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return Y(this.context).on(e,this.selector,t,i),this},die:function(e,t){return Y(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,s){return this.on(t,e,i,s)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){Y.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return Y.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,i=e.guid||Y.guid++,s=0,n=function(i){var n=(Y._data(this,"lastToggle"+e.guid)||0)%s;return Y._data(this,"lastToggle"+e.guid,n+1),i.preventDefault(),t[n].apply(this,arguments)||!1};for(n.guid=i;s<t.length;)t[s++].guid=i;return this.click(n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Y.fn[t]=function(e,i){return null==i&&(i=e,e=null),0<arguments.length?this.on(t,null,e,i):this.trigger(t)},Re.test(t)&&(Y.event.fixHooks[t]=Y.event.keyHooks),He.test(t)&&(Y.event.fixHooks[t]=Y.event.mouseHooks)});var Fe,Ge,je,Xe,Ye,We,qe,Ue,$e,Ve,Ke,Je=e,Qe=function(e,t,i,s){i=i||[];var n,o,a,r,h=(t=t||gt).nodeType;if(!e||"string"!=typeof e)return i;if(1!==h&&9!==h)return[];if(!(a=Ye(t))&&!s&&(n=Lt.exec(e)))if(r=n[1]){if(9===h){if(!(o=t.getElementById(r))||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(r))&&We(t,o)&&o.id===r)return i.push(o),i}else{if(n[2])return vt.apply(i,bt.call(t.getElementsByTagName(e),0)),i;if((r=n[3])&&jt&&t.getElementsByClassName)return vt.apply(i,bt.call(t.getElementsByClassName(r),0)),i}return lt(e.replace(_t,"$1"),t,i,s,a)},Ze=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}},et=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}},tt=function(e){return wt(function(t){return t=+t,wt(function(i,s){for(var n,o=e([],i.length,t),a=o.length;a--;)i[n=o[a]]&&(i[n]=!(s[n]=i[n]))})})},it=function(e,t,i){if(e===t)return i;for(e=e.nextSibling;e;){if(e===t)return-1;e=e.nextSibling}return 1},st=function(e,t){var i,s,n,o,a,r,h;if(a=St[dt][e])return t?0:a.slice(0);for(a=e,r=[],h=je.preFilter;a;){i&&!(s=Mt.exec(a))||(s&&(a=a.slice(s[0].length)),r.push(n=[])),i=!1,(s=Ct.exec(a))&&(n.push(i=new ct(s.shift())),a=a.slice(i.length),i.type=s[0].replace(_t," "));for(o in je.filter)(s=Ht[o].exec(a))&&(!h[o]||(s=h[o](s,gt,!0)))&&(n.push(i=new ct(s.shift())),a=a.slice(i.length),i.type=o,i.matches=s);if(!i)break}return t?a.length:a?Qe.error(e):St(e,r).slice(0)},nt=function(e,t,i){var s=t.dir,n=i&&"parentNode"===t.dir,o=ft++;return t.first?function(t,i,o){for(;t=t[s];)if(n||1===t.nodeType)return e(t,i,o)}:function(t,i,a){if(a){for(;t=t[s];)if((n||1===t.nodeType)&&e(t,i,a))return t}else for(var r,h=mt+" "+o+" ",l=h+Fe;t=t[s];)if(n||1===t.nodeType){if((r=t[dt])===l)return t.sizset;if("string"==typeof r&&0===r.indexOf(h)){if(t.sizset)return t}else{if(t[dt]=l,e(t,i,a))return t.sizset=!0,t;t.sizset=!1}}}},ot=function(e){return 1<e.length?function(t,i,s){for(var n=e.length;n--;)if(!e[n](t,i,s))return!1;return!0}:e[0]},at=function(e,t,i,s,n){for(var o,a=[],r=0,h=e.length,l=null!=t;r<h;r++)(o=e[r])&&(i&&!i(o,s,n)||(a.push(o),l&&t.push(r)));return a},rt=function(e,t,i,s,n,o){return s&&!s[dt]&&(s=rt(s)),n&&!n[dt]&&(n=rt(n,o)),wt(function(o,a,r,h){if(!o||!n){var l,u,d=[],c=[],g=a.length;if(!(u=o)){u=t||"*";var p=r.nodeType?[r]:r,m=[];l=0;for(var f=p.length;l<f;l++)Qe(u,p[l],m,o);u=m}if(p=!e||!o&&t?u:at(u,d,e,r,h),m=i?n||(o?e:g||s)?[]:a:p,i&&i(p,m,r,h),s)for(u=at(m,c),s(u,[],r,h),r=u.length;r--;)(l=u[r])&&(m[c[r]]=!(p[c[r]]=l));if(o)for(r=e&&m.length;r--;)(l=m[r])&&(o[d[r]]=!(a[d[r]]=l));else m=at(m===a?m.splice(g,m.length):m),n?n(null,a,m,h):vt.apply(a,m)}})},ht=function(e){var t,i,s,n=e.length,o=je.relative[e[0].type];i=o||je.relative[" "];for(var a=o?1:0,r=nt(function(e){return e===t},i,!0),h=nt(function(e){return-1<xt.call(t,e)},i,!0),l=[function(e,i,s){return!o&&(s||i!==Ve)||((t=i).nodeType?r(e,i,s):h(e,i,s))}];a<n;a++)if(i=je.relative[e[a].type])l=[nt(ot(l),i)];else{if((i=je.filter[e[a].type].apply(null,e[a].matches))[dt]){for(s=++a;s<n&&!je.relative[e[s].type];s++);return rt(1<a&&ot(l),1<a&&e.slice(0,a-1).join("").replace(_t,"$1"),i,a<s&&ht(e.slice(a,s)),s<n&&ht(e=e.slice(s)),s<n&&e.join(""))}l.push(i)}return ot(l)},lt=function(e,t,i,s,n){var o,a,r,h,l=st(e);if(!s&&1===l.length){if(2<(a=l[0]=l[0].slice(0)).length&&"ID"===(r=a[0]).type&&9===t.nodeType&&!n&&je.relative[a[1].type]){if(!(t=je.find.ID(r.matches[0].replace(Rt,""),t,n)[0]))return i;e=e.slice(a.shift().length)}for(o=Ht.POS.test(e)?-1:a.length-1;0<=o&&(r=a[o],!je.relative[h=r.type]);o--)if((h=je.find[h])&&(s=h(r.matches[0].replace(Rt,""),Nt.test(a[0].type)&&t.parentNode||t,n))){if(a.splice(o,1),!(e=s.length&&a.join("")))return vt.apply(i,bt.call(s,0)),i;break}}return qe(e,l)(s,t,n,i,Nt.test(e)),i},ut=function(){},dt=("sizcache"+Math.random()).replace(".",""),ct=String,gt=Je.document,pt=gt.documentElement,mt=0,ft=0,yt=[].pop,vt=[].push,bt=[].slice,xt=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return-1},wt=function(e,t){return e[dt]=null==t||t,e},Et=function(){var e={},t=[];return wt(function(i,s){return t.push(i)>je.cacheLength&&delete e[t.shift()],e[i]=s},e)},Tt=Et(),St=Et(),Pt=Et(),kt="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",At=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+kt+")|[^:]|\\\\.)*|.*))\\)|)",_t=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Mt=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Ct=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,It=RegExp(At),Lt=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,Nt=/[\x20\t\r\n\f]*[+~]/,zt=/h\d/i,Bt=/input|select|textarea|button/i,Rt=/\\(?!\\)/g,Ht={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+kt),PSEUDO:RegExp("^"+At),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:RegExp("^:(only|nth|first|last)-child(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Ot=function(e){var t=gt.createElement("div");try{return e(t)}catch(e){return!1}},Dt=Ot(function(e){return e.appendChild(gt.createComment("")),!e.getElementsByTagName("*").length}),Ft=Ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&void 0!==e.firstChild.getAttribute&&"#"===e.firstChild.getAttribute("href")}),Gt=Ot(function(e){return e.innerHTML="<select></select>","boolean"!==(e=typeof e.lastChild.getAttribute("multiple"))&&"string"!==e}),jt=Ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),Xt=Ot(function(e){e.id=dt+0,e.innerHTML="<a name='"+dt+"'></a><div name='"+dt+"'></div>",pt.insertBefore(e,pt.firstChild);var t=gt.getElementsByName&&gt.getElementsByName(dt).length===2+gt.getElementsByName(dt+0).length;return Ge=!gt.getElementById(dt),pt.removeChild(e),t});try{bt.call(pt.childNodes,0)[0].nodeType}catch(e){bt=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}if(Qe.matches=function(e,t){return Qe(e,null,null,t)},Qe.matchesSelector=function(e,t){return 0<Qe(t,null,null,[e]).length},Xe=Qe.getText=function(e){var t,i="",s=0;if(t=e.nodeType){if(1===t||9===t||11===t){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=Xe(e)}else if(3===t||4===t)return e.nodeValue}else for(;t=e[s];s++)i+=Xe(t);return i},Ye=Qe.isXML=function(e){return!!(e=e&&(e.ownerDocument||e).documentElement)&&"HTML"!==e.nodeName},We=Qe.contains=pt.contains?function(e,t){var i=9===e.nodeType?e.documentElement:e,s=t&&t.parentNode;return e===s||!(!s||1!==s.nodeType||!i.contains||!i.contains(s))}:pt.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},Qe.attr=function(e,t){var i,s=Ye(e);return s||(t=t.toLowerCase()),(i=je.attrHandle[t])?i(e):s||Gt?e.getAttribute(t):(i=e.getAttributeNode(t))?"boolean"==typeof e[t]?e[t]?t:null:i.specified?i.value:null:null},je=Qe.selectors={cacheLength:50,createPseudo:wt,match:Ht,attrHandle:Ft?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:Ge?function(e,t,i){if(void 0!==t.getElementById&&!i)return(e=t.getElementById(e))&&e.parentNode?[e]:[]}:function(e,t,i){if(void 0!==t.getElementById&&!i)return(t=t.getElementById(e))?t.id===e||void 0!==t.getAttributeNode&&t.getAttributeNode("id").value===e?[t]:void 0:[]},TAG:Dt?function(e,t){if(void 0!==t.getElementsByTagName)return t.getElementsByTagName(e)}:function(e,t){var i=t.getElementsByTagName(e);if("*"===e){for(var s,n=[],o=0;s=i[o];o++)1===s.nodeType&&n.push(s);return n}return i},NAME:Xt&&function(e,t){if(void 0!==t.getElementsByName)return t.getElementsByName(name)},CLASS:jt&&function(e,t,i){if(void 0!==t.getElementsByClassName&&!i)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Rt,""),e[3]=(e[4]||e[5]||"").replace(Rt,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||Qe.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&Qe.error(e[0]),e},PSEUDO:function(e){var t,i;return Ht.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(It.test(t)&&(i=st(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(t=t.slice(0,i),e[0]=e[0].slice(0,i)),e[2]=t),e.slice(0,3))}},filter:{ID:Ge?function(e){return e=e.replace(Rt,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(Rt,""),function(t){return(t=void 0!==t.getAttributeNode&&t.getAttributeNode("id"))&&t.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(Rt,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=Tt[dt][e];return t||(t=Tt(e,RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)"))),function(e){return t.test(e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}},ATTR:function(e,t,i){return function(s){return null==(s=Qe.attr(s,e))?"!="===t:!t||(s+="","="===t?s===i:"!="===t?s!==i:"^="===t?i&&0===s.indexOf(i):"*="===t?i&&-1<s.indexOf(i):"$="===t?i&&s.substr(s.length-i.length)===i:"~="===t?-1<(" "+s+" ").indexOf(i):"|="===t&&(s===i||s.substr(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,s){return"nth"===e?function(e){var t,n;if(t=e.parentNode,1===i&&0===s)return!0;if(t)for(n=0,t=t.firstChild;t&&(1!==t.nodeType||(n++,e!==t));t=t.nextSibling);return(n-=s)===i||0==n%i&&0<=n/i}:function(t){var i=t;switch(e){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===e)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var i,s=je.pseudos[e]||je.setFilters[e.toLowerCase()]||Qe.error("unsupported pseudo: "+e);return s[dt]?s(t):1<s.length?(i=[e,e,"",t],je.setFilters.hasOwnProperty(e.toLowerCase())?wt(function(e,i){for(var n,o=s(e,t),a=o.length;a--;)n=xt.call(e,o[a]),e[n]=!(i[n]=o[a])}):function(e){return s(e,0,i)}):s}},pseudos:{not:wt(function(e){var t=[],i=[],s=qe(e.replace(_t,"$1"));return s[dt]?wt(function(e,t,i,n){n=s(e,null,n,[]);for(var o=e.length;o--;)(i=n[o])&&(e[o]=!(t[o]=i))}):function(e,n,o){return t[0]=e,s(t,null,o,i),!i.pop()}}),has:wt(function(e){return function(t){return 0<Qe(e,t).length}}),contains:wt(function(e){return function(t){return-1<(t.textContent||t.innerText||Xe(t)).indexOf(e)}}),enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!je.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if("@"<e.nodeName||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return zt.test(e.nodeName)},text:function(e){var t,i;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(i=e.getAttribute("type"))||i.toLowerCase()===t)},radio:Ze("radio"),checkbox:Ze("checkbox"),file:Ze("file"),password:Ze("password"),image:Ze("image"),submit:et("submit"),reset:et("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return Bt.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&(!!e.type||!!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:tt(function(){return[0]}),last:tt(function(e,t){return[t-1]}),eq:tt(function(e,t,i){return[0>i?i+t:i]}),even:tt(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:tt(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:tt(function(e,t,i){for(t=0>i?i+t:i;0<=--t;)e.push(t);return e}),gt:tt(function(e,t,i){for(i=0>i?i+t:i;++i<t;)e.push(i);return e})}},Ue=pt.compareDocumentPosition?function(e,t){return e===t?($e=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return $e=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,s,n=[],o=[],a=i=e.parentNode;if(i===(s=t.parentNode))return it(e,t);if(!i)return-1;if(!s)return 1;for(;a;)n.unshift(a),a=a.parentNode;for(a=s;a;)o.unshift(a),a=a.parentNode;for(i=n.length,s=o.length,a=0;a<i&&a<s;a++)if(n[a]!==o[a])return it(n[a],o[a]);return a===i?it(e,o[a],-1):it(n[a],t,1)},[0,0].sort(Ue),Ke=!$e,Qe.uniqueSort=function(e){var t,i=1;if($e=Ke,e.sort(Ue),$e)for(;t=e[i];i++)t===e[i-1]&&e.splice(i--,1);return e},Qe.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},qe=Qe.compile=function(e,t){var i,s=[],n=[],o=Pt[dt][e];if(!o){for(t||(t=st(e)),i=t.length;i--;)o=ht(t[i]),o[dt]?s.push(o):n.push(o);var a=0<s.length,r=0<n.length,h=function(e,t,i,o,l){var u,d,c=[],g=0,p="0",m=e&&[],f=null!=l,y=Ve,v=e||r&&je.find.TAG("*",l&&t.parentNode||t),b=mt+=null==y?1:Math.E;for(f&&(Ve=t!==gt&&t,Fe=h.el);null!=(l=v[p]);p++){if(r&&l){for(u=0;d=n[u];u++)if(d(l,t,i)){o.push(l);break}f&&(mt=b,Fe=++h.el)}a&&((l=!d&&l)&&g--,e&&m.push(l))}if(g+=p,a&&p!==g){for(u=0;d=s[u];u++)d(m,c,t,i);if(e){if(0<g)for(;p--;)!m[p]&&!c[p]&&(c[p]=yt.call(o));c=at(c)}vt.apply(o,c),f&&!e&&0<c.length&&1<g+s.length&&Qe.uniqueSort(o)}return f&&(mt=b,Ve=y),m};h.el=0,i=a?wt(h):h,o=Pt(e,i)}return o},gt.querySelectorAll){var Yt,Wt=lt,qt=/'|\\/g,Ut=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,$t=[":focus"],Vt=[":active",":focus"],Kt=pt.matchesSelector||pt.mozMatchesSelector||pt.webkitMatchesSelector||pt.oMatchesSelector||pt.msMatchesSelector;Ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||$t.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||$t.push(":checked")}),Ot(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&$t.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||$t.push(":enabled",":disabled")}),$t=RegExp($t.join("|")),lt=function(e,t,i,s,n){if(!(s||n||$t&&$t.test(e))){var o,a,r=!0,h=dt;if(a=t,o=9===t.nodeType&&e,1===t.nodeType&&"object"!==t.nodeName.toLowerCase()){for(o=st(e),(r=t.getAttribute("id"))?h=r.replace(qt,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",a=o.length;a--;)o[a]=h+o[a].join("");a=Nt.test(e)&&t.parentNode||t,o=o.join(",")}if(o)try{return vt.apply(i,bt.call(a.querySelectorAll(o),0)),i}catch(e){}finally{r||t.removeAttribute("id")}}return Wt(e,t,i,s,n)},Kt&&(Ot(function(e){Yt=Kt.call(e,"div");try{Kt.call(e,"[test!='']:sizzle"),Vt.push("!=",At)}catch(e){}}),Vt=RegExp(Vt.join("|")),Qe.matchesSelector=function(e,t){if(t=t.replace(Ut,"='$1']"),!(Ye(e)||Vt.test(t)||$t&&$t.test(t)))try{var i=Kt.call(e,t);if(i||Yt||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<Qe(t,null,null,[e]).length})}je.pseudos.nth=je.pseudos.eq,je.filters=ut.prototype=je.pseudos,je.setFilters=new ut,Qe.attr=Y.attr,Y.find=Qe,Y.expr=Qe.selectors,Y.expr[":"]=Y.expr.pseudos,Y.unique=Qe.uniqueSort,Y.text=Qe.getText,Y.isXMLDoc=Qe.isXML,Y.contains=Qe.contains;var Jt=/Until$/,Qt=/^(?:parents|prev(?:Until|All))/,Zt=/^.[^:#\[\.,]*$/,ei=Y.expr.match.needsContext,ti={children:!0,contents:!0,next:!0,prev:!0};Y.fn.extend({find:function(e){var t,i,s,n,o,a,r=this;if("string"!=typeof e)return Y(e).filter(function(){for(t=0,i=r.length;t<i;t++)if(Y.contains(r[t],this))return!0});for(a=this.pushStack("","find",e),t=0,i=this.length;t<i;t++)if(s=a.length,Y.find(e,this[t],a),0<t)for(n=s;n<a.length;n++)for(o=0;o<s;o++)if(a[o]===a[n]){a.splice(n--,1);break}return a},has:function(e){var t,i=Y(e,this),s=i.length;return this.filter(function(){for(t=0;t<s;t++)if(Y.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(h(this,e,!1),"not",e)},filter:function(e){return this.pushStack(h(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?ei.test(e)?0<=Y(e,this.context).index(this[0]):0<Y.filter(e,this).length:0<this.filter(e).length)},closest:function(e,t){for(var i,s=0,n=this.length,o=[],a=ei.test(e)||"string"!=typeof e?Y(e,t||this.context):0;s<n;s++)for(i=this[s];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(a?-1<a.index(i):Y.find.matchesSelector(i,e)){o.push(i);break}i=i.parentNode}return o=1<o.length?Y.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?Y.inArray(this[0],Y(e)):Y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?Y(e,t):Y.makeArray(e&&e.nodeType?[e]:e),s=Y.merge(this.get(),i);return this.pushStack(a(i[0])||a(s[0])?s:Y.unique(s))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Y.fn.andSelf=Y.fn.addBack,Y.each({parent:function(e){return(e=e.parentNode)&&11!==e.nodeType?e:null},parents:function(e){return Y.dir(e,"parentNode")},parentsUntil:function(e,t,i){return Y.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return Y.dir(e,"nextSibling")},prevAll:function(e){return Y.dir(e,"previousSibling")},nextUntil:function(e,t,i){return Y.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return Y.dir(e,"previousSibling",i)},siblings:function(e){return Y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Y.sibling(e.firstChild)},contents:function(e){return Y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:Y.merge([],e.childNodes)}},function(e,t){Y.fn[e]=function(i,s){var n=Y.map(this,t,i);return Jt.test(e)||(s=i),s&&"string"==typeof s&&(n=Y.filter(s,n)),n=1<this.length&&!ti[e]?Y.unique(n):n,1<this.length&&Qt.test(e)&&(n=n.reverse()),this.pushStack(n,e,D.call(arguments).join(","))}}),Y.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?Y.find.matchesSelector(t[0],e)?[t[0]]:[]:Y.find.matches(e,t)},dir:function(e,i,s){var n=[];for(e=e[i];e&&9!==e.nodeType&&(s===t||1!==e.nodeType||!Y(e).is(s));)1===e.nodeType&&n.push(e),e=e[i];return n},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var ii,si,ni="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",oi=/ jQuery\d+="(?:null|\d+)"/g,ai=/^\s+/,ri=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,hi=/<([\w:]+)/,li=/<tbody/i,ui=/<|&#?\w+;/,di=/<(?:script|style|link)/i,ci=/<(?:script|object|embed|option|style)/i,gi=RegExp("<(?:"+ni+")[\\s/>]","i"),pi=/^(?:checkbox|radio)$/,mi=/checked\s*(?:[^=]|=\s*.checked.)/i,fi=/\/(java|ecma)script/i,yi=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,vi={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bi=l(N),xi=bi.appendChild(N.createElement("div"));vi.optgroup=vi.option,vi.tbody=vi.tfoot=vi.colgroup=vi.caption=vi.thead,vi.th=vi.td,Y.support.htmlSerialize||(vi._default=[1,"X<div>","</div>"]),Y.fn.extend({text:function(e){return Y.access(this,function(e){return e===t?Y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(Y.isFunction(e))return this.each(function(t){Y(this).wrapAll(e.call(this,t))});if(this[0]){var t=Y(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return Y.isFunction(e)?this.each(function(t){Y(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Y(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=Y.isFunction(e);return this.each(function(i){Y(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){Y.nodeName(this,"body")||Y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(e,this),"before",this.selector)}},after:function(){if(!a(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=Y.clean(arguments);return this.pushStack(Y.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var i,s=0;null!=(i=this[s]);s++)e&&!Y.filter(e,[i]).length||(!t&&1===i.nodeType&&(Y.cleanData(i.getElementsByTagName("*")),Y.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&Y.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Y.clone(this,e,t)})},html:function(e){return Y.access(this,function(e){var i=this[0]||{},s=0,n=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(oi,""):t;if("string"==typeof e&&!di.test(e)&&(Y.support.htmlSerialize||!gi.test(e))&&(Y.support.leadingWhitespace||!ai.test(e))&&!vi[(hi.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ri,"<$1></$2>");try{for(;s<n;s++)i=this[s]||{},1===i.nodeType&&(Y.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(e){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return a(this[0])?this.length?this.pushStack(Y(Y.isFunction(e)?e():e),"replaceWith",e):this:Y.isFunction(e)?this.each(function(t){var i=Y(this),s=i.html();i.replaceWith(e.call(this,t,s))}):("string"!=typeof e&&(e=Y(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;Y(this).remove(),t?Y(t).before(e):Y(i).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,s){var n,o,a,r=0,h=(e=[].concat.apply([],e))[0],l=[],u=this.length;if(!Y.support.checkClone&&1<u&&"string"==typeof h&&mi.test(h))return this.each(function(){Y(this).domManip(e,i,s)});if(Y.isFunction(h))return this.each(function(n){var o=Y(this);e[0]=h.call(this,n,i?o.html():t),o.domManip(e,i,s)});if(this[0]){if(o=(a=(n=Y.buildFragment(e,this,l)).fragment).firstChild,1===a.childNodes.length&&(a=o),o)for(i=i&&Y.nodeName(o,"tr"),n=n.cacheable||u-1;r<u;r++)s.call(i&&Y.nodeName(this[r],"table")?this[r].getElementsByTagName("tbody")[0]||this[r].appendChild(this[r].ownerDocument.createElement("tbody")):this[r],r===n?a:Y.clone(a,!0,!0));a=o=null,l.length&&Y.each(l,function(e,t){t.src?Y.ajax?Y.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):Y.error("no ajax"):Y.globalEval((t.text||t.textContent||t.innerHTML||"").replace(yi,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),Y.buildFragment=function(e,i,s){var n,o,a,r=e[0];return i=(i=!(i=i||N).nodeType&&i[0]||i).ownerDocument||i,1===e.length&&"string"==typeof r&&512>r.length&&i===N&&"<"===r.charAt(0)&&!ci.test(r)&&(Y.support.checkClone||!mi.test(r))&&(Y.support.html5Clone||!gi.test(r))&&(o=!0,a=(n=Y.fragments[r])!==t),n||(n=i.createDocumentFragment(),Y.clean(e,i,n,s),o&&(Y.fragments[r]=a&&n)),{fragment:n,cacheable:o}},Y.fragments={},Y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Y.fn[e]=function(i){var s,n=0,o=[],a=(i=Y(i)).length;if((null==(s=1===this.length&&this[0].parentNode)||s&&11===s.nodeType&&1===s.childNodes.length)&&1===a)return i[t](this[0]),this;for(;n<a;n++)s=(0<n?this.clone(!0):this).get(),Y(i[n])[t](s),o=o.concat(s);return this.pushStack(o,e,i.selector)}}),Y.extend({clone:function(e,t,i){var s,n,o,a;if(Y.support.html5Clone||Y.isXMLDoc(e)||!gi.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(xi.innerHTML=e.outerHTML,xi.removeChild(a=xi.firstChild)),!(Y.support.noCloneEvent&&Y.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Y.isXMLDoc(e)))for(d(e,a),s=c(e),n=c(a),o=0;s[o];++o)n[o]&&d(s[o],n[o]);if(t&&(u(e,a),i))for(s=c(e),n=c(a),o=0;s[o];++o)u(s[o],n[o]);return a},clean:function(e,t,i,s){var n,o,a,r,h,u,d,c=t===N&&bi,p=[];for(t&&void 0!==t.createDocumentFragment||(t=N),n=0;null!=(a=e[n]);n++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(ui.test(a)){for(c=c||l(t),u=t.createElement("div"),c.appendChild(u),a=a.replace(ri,"<$1></$2>"),o=(hi.exec(a)||["",""])[1].toLowerCase(),h=(r=vi[o]||vi._default)[0],u.innerHTML=r[1]+a+r[2];h--;)u=u.lastChild;if(!Y.support.tbody)for(h=li.test(a),o=(r="table"!==o||h?"<table>"!==r[1]||h?[]:u.childNodes:u.firstChild&&u.firstChild.childNodes).length-1;0<=o;--o)Y.nodeName(r[o],"tbody")&&!r[o].childNodes.length&&r[o].parentNode.removeChild(r[o]);!Y.support.leadingWhitespace&&ai.test(a)&&u.insertBefore(t.createTextNode(ai.exec(a)[0]),u.firstChild),a=u.childNodes,u.parentNode.removeChild(u)}else a=t.createTextNode(a);a.nodeType?p.push(a):Y.merge(p,a)}if(u&&(a=u=c=null),!Y.support.appendChecked)for(n=0;null!=(a=p[n]);n++)Y.nodeName(a,"input")?g(a):void 0!==a.getElementsByTagName&&Y.grep(a.getElementsByTagName("input"),g);if(i)for(e=function(e){if(!e.type||fi.test(e.type))return s?s.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e)},n=0;null!=(a=p[n]);n++)Y.nodeName(a,"script")&&e(a)||(i.appendChild(a),void 0!==a.getElementsByTagName&&(d=Y.grep(Y.merge([],a.getElementsByTagName("script")),e),p.splice.apply(p,[n+1,0].concat(d)),n+=d.length));return p},cleanData:function(e,t){for(var i,s,n,o,a=0,r=Y.expando,h=Y.cache,l=Y.support.deleteExpando,u=Y.event.special;null!=(n=e[a]);a++)if((t||Y.acceptData(n))&&(i=(s=n[r])&&h[s])){if(i.events)for(o in i.events)u[o]?Y.event.remove(n,o):Y.removeEvent(n,o,i.handle);h[s]&&(delete h[s],l?delete n[r]:n.removeAttribute?n.removeAttribute(r):n[r]=null,Y.deletedIds.push(s))}}}),Y.uaMatch=function(e){return e=e.toLowerCase(),{browser:(e=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[])[1]||"",version:e[2]||"0"}},si={},(ii=Y.uaMatch(B.userAgent)).browser&&(si[ii.browser]=!0,si.version=ii.version),si.chrome?si.webkit=!0:si.webkit&&(si.safari=!0),Y.browser=si,Y.sub=function(){function e(t,i){return new e.fn.init(t,i)}Y.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,s){return s&&s instanceof Y&&!(s instanceof e)&&(s=e(s)),Y.fn.init.call(this,i,s,t)},e.fn.init.prototype=e.fn;var t=e(N);return e};var wi,Ei,Ti,Si=/alpha\([^)]*\)/i,Pi=/opacity=([^)]*)/,ki=/^(top|right|bottom|left)$/,Ai=/^(none|table(?!-c[ea]).+)/,_i=/^margin/,Mi=RegExp("^("+W+")(.*)$","i"),Ci=RegExp("^("+W+")(?!px)[a-z%]+$","i"),Ii=RegExp("^([-+])=("+W+")","i"),Li={},Ni={position:"absolute",visibility:"hidden",display:"block"},zi={letterSpacing:0,fontWeight:400},Bi=["Top","Right","Bottom","Left"],Ri=["Webkit","O","Moz","ms"],Hi=Y.fn.toggle;Y.fn.extend({css:function(e,i){return Y.access(this,function(e,i,s){return s!==t?Y.style(e,i,s):Y.css(e,i)},e,i,1<arguments.length)},show:function(){return f(this,!0)},hide:function(){return f(this)},toggle:function(e,t){var i="boolean"==typeof e;return Y.isFunction(e)&&Y.isFunction(t)?Hi.apply(this,arguments):this.each(function(){(i?e:m(this))?Y(this).show():Y(this).hide()})}}),Y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=wi(e,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:Y.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,s,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,r,h=Y.camelCase(i),l=e.style;if(i=Y.cssProps[h]||(Y.cssProps[h]=p(l,h)),r=Y.cssHooks[i]||Y.cssHooks[h],s===t)return r&&"get"in r&&(o=r.get(e,!1,n))!==t?o:l[i];if("string"===(a=typeof s)&&(o=Ii.exec(s))&&(s=(o[1]+1)*o[2]+parseFloat(Y.css(e,i)),a="number"),!(null==s||"number"===a&&isNaN(s)||("number"===a&&!Y.cssNumber[h]&&(s+="px"),r&&"set"in r&&(s=r.set(e,s,n))===t)))try{l[i]=s}catch(e){}}},css:function(e,i,s,n){var o,a,r,h=Y.camelCase(i);return i=Y.cssProps[h]||(Y.cssProps[h]=p(e.style,h)),(r=Y.cssHooks[i]||Y.cssHooks[h])&&"get"in r&&(o=r.get(e,!0,n)),o===t&&(o=wi(e,i)),"normal"===o&&i in zi&&(o=zi[i]),s||n!==t?(a=parseFloat(o),s||Y.isNumeric(a)?a||0:o):o},swap:function(e,t,i){var s,n={};for(s in t)n[s]=e.style[s],e.style[s]=t[s];i=i.call(e);for(s in t)e.style[s]=n[s];return i}}),e.getComputedStyle?wi=function(t,i){var s,n,o,a,r=e.getComputedStyle(t,null),h=t.style;return r&&(""===(s=r[i])&&!Y.contains(t.ownerDocument,t)&&(s=Y.style(t,i)),Ci.test(s)&&_i.test(i)&&(n=h.width,o=h.minWidth,a=h.maxWidth,h.minWidth=h.maxWidth=h.width=s,s=r.width,h.width=n,h.minWidth=o,h.maxWidth=a)),s}:N.documentElement.currentStyle&&(wi=function(e,t){var i,s,n=e.currentStyle&&e.currentStyle[t],o=e.style;return null==n&&o&&o[t]&&(n=o[t]),Ci.test(n)&&!ki.test(t)&&(i=o.left,(s=e.runtimeStyle&&e.runtimeStyle.left)&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":n,n=o.pixelLeft+"px",o.left=i,s&&(e.runtimeStyle.left=s)),""===n?"auto":n}),Y.each(["height","width"],function(e,t){Y.cssHooks[t]={get:function(e,i,s){if(i)return 0===e.offsetWidth&&Ai.test(wi(e,"display"))?Y.swap(e,Ni,function(){return b(e,t,s)}):b(e,t,s)},set:function(e,i,s){return y(e,i,s?v(e,t,s,Y.support.boxSizing&&"border-box"===Y.css(e,"boxSizing")):0)}}}),Y.support.opacity||(Y.cssHooks.opacity={get:function(e,t){return Pi.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,s=e.currentStyle,n=Y.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=s&&s.filter||i.filter||"";i.zoom=1,1<=t&&""===Y.trim(o.replace(Si,""))&&i.removeAttribute&&(i.removeAttribute("filter"),s&&!s.filter)||(i.filter=Si.test(o)?o.replace(Si,n):o+" "+n)}}),Y(function(){Y.support.reliableMarginRight||(Y.cssHooks.marginRight={get:function(e,t){return Y.swap(e,{display:"inline-block"},function(){if(t)return wi(e,"marginRight")})}}),!Y.support.pixelPosition&&Y.fn.position&&Y.each(["top","left"],function(e,t){Y.cssHooks[t]={get:function(e,i){if(i){var s=wi(e,t);return Ci.test(s)?Y(e).position()[t]+"px":s}}}})}),Y.expr&&Y.expr.filters&&(Y.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!Y.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||wi(e,"display"))},Y.expr.filters.visible=function(e){return!Y.expr.filters.hidden(e)}),Y.each({margin:"",padding:"",border:"Width"},function(e,t){Y.cssHooks[e+t]={expand:function(i){var s="string"==typeof i?i.split(" "):[i],n={};for(i=0;4>i;i++)n[e+Bi[i]+t]=s[i]||s[i-2]||s[0];return n}},_i.test(e)||(Y.cssHooks[e+t].set=y)});var Oi=/%20/g,Di=/\[\]$/,Fi=/\r?\n/g,Gi=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ji=/^(?:select|textarea)/i;Y.fn.extend({serialize:function(){return Y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?Y.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ji.test(this.nodeName)||Gi.test(this.type))}).map(function(e,t){var i=Y(this).val();return null==i?null:Y.isArray(i)?Y.map(i,function(e){return{name:t.name,value:e.replace(Fi,"\r\n")}}):{name:t.name,value:i.replace(Fi,"\r\n")}}).get()}}),Y.param=function(e,i){var s,n=[],o=function(e,t){t=Y.isFunction(t)?t():null==t?"":t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=Y.ajaxSettings&&Y.ajaxSettings.traditional),Y.isArray(e)||e.jquery&&!Y.isPlainObject(e))Y.each(e,function(){o(this.name,this.value)});else for(s in e)w(s,e[s],i,o);return n.join("&").replace(Oi,"+")};var Xi,Yi,Wi=/#.*$/,qi=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ui=/^(?:GET|HEAD)$/,$i=/^\/\//,Vi=/\?/,Ki=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ji=/([?&])_=[^&]*/,Qi=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Zi=Y.fn.load,es={},ts={},is=["*/"]+["*"];try{Yi=z.href}catch(e){(Yi=N.createElement("a")).href="",Yi=Yi.href}Xi=Qi.exec(Yi.toLowerCase())||[],Y.fn.load=function(e,i,s){if("string"!=typeof e&&Zi)return Zi.apply(this,arguments);if(!this.length)return this;var n,o,a,r=this,h=e.indexOf(" ");return 0<=h&&(n=e.slice(h,e.length),e=e.slice(0,h)),Y.isFunction(i)?(s=i,i=t):i&&"object"==typeof i&&(o="POST"),Y.ajax({url:e,type:o,dataType:"html",data:i,complete:function(e,t){s&&r.each(s,a||[e.responseText,t,e])}}).done(function(e){a=arguments,r.html(n?Y("<div>").append(e.replace(Ki,"")).find(n):e)}),this},Y.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){Y.fn[t]=function(e){return this.on(t,e)}}),Y.each(["get","post"],function(e,i){Y[i]=function(e,s,n,o){return Y.isFunction(s)&&(o=o||n,n=s,s=t),Y.ajax({type:i,url:e,data:s,success:n,dataType:o})}}),Y.extend({getScript:function(e,i){return Y.get(e,t,i,"script")},getJSON:function(e,t,i){return Y.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?S(e,Y.ajaxSettings):(t=e,e=Y.ajaxSettings),S(e,t),e},ajaxSettings:{url:Yi,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Xi[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":is},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":Y.parseJSON,"text xml":Y.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:E(es),ajaxTransport:E(ts),ajax:function(e,i){function s(e,i,s,a){var l,d,v,b,w,T=i;if(2!==x){if(x=2,h&&clearTimeout(h),r=t,o=a||"",E.readyState=0<e?4:0,s){a=E;var S,P,k,A,_=(b=c).contents,M=b.dataTypes,C=b.responseFields;for(P in C)P in s&&(a[C[P]]=s[P]);for(;"*"===M[0];)M.shift(),S===t&&(S=b.mimeType||a.getResponseHeader("content-type"));if(S)for(P in _)if(_[P]&&_[P].test(S)){M.unshift(P);break}if(M[0]in s)k=M[0];else{for(P in s){if(!M[0]||b.converters[P+" "+M[0]]){k=P;break}A||(A=P)}k=k||A}b=s=k?(k!==M[0]&&M.unshift(k),s[k]):void 0}if(200<=e&&300>e||304===e)if(c.ifModified&&(w=E.getResponseHeader("Last-Modified"),w&&(Y.lastModified[n]=w),w=E.getResponseHeader("Etag"),w&&(Y.etag[n]=w)),304===e)T="notmodified",l=!0;else{var I;e:{d=b;var L;T=(l=c).dataTypes.slice();if(s=T[0],S={},P=0,l.dataFilter&&(d=l.dataFilter(d,l.dataType)),T[1])for(I in l.converters)S[I.toLowerCase()]=l.converters[I];for(;v=T[++P];)if("*"!==v){if("*"!==s&&s!==v){if(!(I=S[s+" "+v]||S["* "+v]))for(L in S)if(w=L.split(" "),w[1]===v&&(I=S[s+" "+w[0]]||S["* "+w[0]])){!0===I?I=S[L]:!0!==S[L]&&(v=w[0],T.splice(P--,0,v));break}if(!0!==I)if(I&&l.throws)d=I(d);else try{d=I(d)}catch(e){I={state:"parsererror",error:I?e:"No conversion from "+s+" to "+v};break e}}s=v}I={state:"success",data:d}}T=(l=I).state,d=l.data,l=!(v=l.error)}else v=T,(!T||e)&&(T="error",0>e&&(e=0));E.status=e,E.statusText=(i||T)+"",l?m.resolveWith(g,[d,T,E]):m.rejectWith(g,[E,T,v]),E.statusCode(y),y=t,u&&p.trigger("ajax"+(l?"Success":"Error"),[E,c,l?d:v]),f.fireWith(g,[E,T]),u&&(p.trigger("ajaxComplete",[E,c]),--Y.active||Y.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var n,o,a,r,h,l,u,d,c=Y.ajaxSetup({},i),g=c.context||c,p=g!==c&&(g.nodeType||g instanceof Y)?Y(g):Y.event,m=Y.Deferred(),f=Y.Callbacks("once memory"),y=c.statusCode||{},v={},b={},x=0,w="canceled",E={readyState:0,setRequestHeader:function(e,t){if(!x){var i=e.toLowerCase();e=b[i]=b[i]||e,v[e]=t}return this},getAllResponseHeaders:function(){return 2===x?o:null},getResponseHeader:function(e){var i;if(2===x){if(!a)for(a={};i=qi.exec(o);)a[i[1].toLowerCase()]=i[2];i=a[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return x||(c.mimeType=e),this},abort:function(e){return e=e||w,r&&r.abort(e),s(0,e),this}};if(m.promise(E),E.success=E.done,E.error=E.fail,E.complete=f.add,E.statusCode=function(e){var t;if(e)if(2>x)for(t in e)y[t]=[y[t],e[t]];else t=e[E.status],E.always(t);return this},c.url=((e||c.url)+"").replace(Wi,"").replace($i,Xi[1]+"//"),c.dataTypes=Y.trim(c.dataType||"*").toLowerCase().split(U),null==c.crossDomain&&(l=Qi.exec(c.url.toLowerCase())||!1,c.crossDomain=l&&l.join(":")+(l[3]?"":"http:"===l[1]?80:443)!==Xi.join(":")+(Xi[3]?"":"http:"===Xi[1]?80:443)),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=Y.param(c.data,c.traditional)),T(es,c,i,E),2===x)return E;if(u=c.global,c.type=c.type.toUpperCase(),c.hasContent=!Ui.test(c.type),u&&0==Y.active++&&Y.event.trigger("ajaxStart"),!c.hasContent&&(c.data&&(c.url+=(Vi.test(c.url)?"&":"?")+c.data,delete c.data),n=c.url,!1===c.cache)){l=Y.now();var S=c.url.replace(Ji,"$1_="+l);c.url=S+(S===c.url?(Vi.test(c.url)?"&":"?")+"_="+l:"")}(c.data&&c.hasContent&&!1!==c.contentType||i.contentType)&&E.setRequestHeader("Content-Type",c.contentType),c.ifModified&&(n=n||c.url,Y.lastModified[n]&&E.setRequestHeader("If-Modified-Since",Y.lastModified[n]),Y.etag[n]&&E.setRequestHeader("If-None-Match",Y.etag[n])),E.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+is+"; q=0.01":""):c.accepts["*"]);for(d in c.headers)E.setRequestHeader(d,c.headers[d]);if(!c.beforeSend||!1!==c.beforeSend.call(g,E,c)&&2!==x){w="abort";for(d in{success:1,error:1,complete:1})E[d](c[d]);if(r=T(ts,c,i,E)){E.readyState=1,u&&p.trigger("ajaxSend",[E,c]),c.async&&0<c.timeout&&(h=setTimeout(function(){E.abort("timeout")},c.timeout));try{x=1,r.send(v,s)}catch(e){if(!(2>x))throw e;s(-1,e)}}else s(-1,"No Transport");return E}return E.abort()},active:0,lastModified:{},etag:{}});var ss=[],ns=/\?/,os=/(=)\?(?=&|$)|\?\?/,as=Y.now();Y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ss.pop()||Y.expando+"_"+as++;return this[e]=!0,e}}),Y.ajaxPrefilter("json jsonp",function(i,s,n){var o,a,r,h=i.data,l=i.url,u=!1!==i.jsonp,d=u&&os.test(l),c=u&&!d&&"string"==typeof h&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&os.test(h);if("jsonp"===i.dataTypes[0]||d||c)return o=i.jsonpCallback=Y.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,a=e[o],d?i.url=l.replace(os,"$1"+o):c?i.data=h.replace(os,"$1"+o):u&&(i.url+=(ns.test(l)?"&":"?")+i.jsonp+"="+o),i.converters["script json"]=function(){return r||Y.error(o+" was not called"),r[0]},i.dataTypes[0]="json",e[o]=function(){r=arguments},n.always(function(){e[o]=a,i[o]&&(i.jsonpCallback=s.jsonpCallback,ss.push(o)),r&&Y.isFunction(a)&&a(r[0]),r=a=t}),"script"}),Y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return Y.globalEval(e),e}}}),Y.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),Y.ajaxTransport("script",function(e){if(e.crossDomain){var i,s=N.head||N.getElementsByTagName("head")[0]||N.documentElement;return{send:function(n,o){(i=N.createElement("script")).async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,n){(n||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,s&&i.parentNode&&s.removeChild(i),i=t,n||o(200,"success"))},s.insertBefore(i,s.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var rs,hs=!!e.ActiveXObject&&function(){for(var e in rs)rs[e](0,1)},ls=0;Y.ajaxSettings.xhr=e.ActiveXObject?function(){var t;if(!(t=!this.isLocal&&P()))e:{try{t=new e.ActiveXObject("Microsoft.XMLHTTP");break e}catch(e){}t=void 0}return t}:P;var us=Y.ajaxSettings.xhr();Y.extend(Y.support,{ajax:!!us,cors:!!us&&"withCredentials"in us}),Y.support.ajax&&Y.ajaxTransport(function(i){var s;if(!i.crossDomain||Y.support.cors)return{send:function(n,o){var a,r,h=i.xhr();if(i.username?h.open(i.type,i.url,i.async,i.username,i.password):h.open(i.type,i.url,i.async),i.xhrFields)for(r in i.xhrFields)h[r]=i.xhrFields[r];i.mimeType&&h.overrideMimeType&&h.overrideMimeType(i.mimeType),!i.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");try{for(r in n)h.setRequestHeader(r,n[r])}catch(e){}h.send(i.hasContent&&i.data||null),s=function(e,n){var r,l,u,d,c;try{if(s&&(n||4===h.readyState))if(s=t,a&&(h.onreadystatechange=Y.noop,hs&&delete rs[a]),n)4!==h.readyState&&h.abort();else{r=h.status,u=h.getAllResponseHeaders(),d={},(c=h.responseXML)&&c.documentElement&&(d.xml=c);try{d.text=h.responseText}catch(e){}try{l=h.statusText}catch(e){l=""}r||!i.isLocal||i.crossDomain?1223===r&&(r=204):r=d.text?200:404}}catch(e){n||o(-1,e)}d&&o(r,l,d,u)},i.async?4===h.readyState?setTimeout(s,0):(a=++ls,hs&&(rs||(rs={},Y(e).unload(hs)),rs[a]=s),h.onreadystatechange=s):s()},abort:function(){s&&s(0,1)}}});var ds,cs,gs=/^(?:toggle|show|hide)$/,ps=RegExp("^(?:([-+])=|)("+W+")([a-z%]*)$","i"),ms=/queueHooks$/,fs=[function(e,t,i){var s,n,o,a,r,h,l=this,u=e.style,d={},c=[],g=e.nodeType&&m(e);i.queue||(null==(r=Y._queueHooks(e,"fx")).unqueued&&(r.unqueued=0,h=r.empty.fire,r.empty.fire=function(){r.unqueued||h()}),r.unqueued++,l.always(function(){l.always(function(){r.unqueued--,Y.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],"inline"===Y.css(e,"display")&&"none"===Y.css(e,"float")&&(Y.support.inlineBlockNeedsLayout&&"inline"!==x(e.nodeName)?u.zoom=1:u.display="inline-block")),i.overflow&&(u.overflow="hidden",Y.support.shrinkWrapBlocks||l.done(function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]}));for(s in t)n=t[s],gs.exec(n)&&(delete t[s],n!==(g?"hide":"show")&&c.push(s));if(n=c.length)for(o=Y._data(e,"fxshow")||Y._data(e,"fxshow",{}),g?Y(e).show():l.done(function(){Y(e).hide()}),l.done(function(){var t;Y.removeData(e,"fxshow",!0);for(t in d)Y.style(e,t,d[t])}),s=0;s<n;s++)t=c[s],a=l.createTween(t,g?o[t]:0),d[t]=o[t]||Y.style(e,t),t in o||(o[t]=a.start,g&&(a.end=a.start,a.start="width"===t||"height"===t?1:0))}],ys={"*":[function(e,t){var i,s,n=this.createTween(e,t),o=ps.exec(t),a=n.cur(),r=+a||0,h=1,l=20;if(o){if(i=+o[2],"px"!==(s=o[3]||(Y.cssNumber[e]?"":"px"))&&r){r=Y.css(n.elem,e,!0)||i||1;do{h=h||".5",r/=h,Y.style(n.elem,e,r+s)}while(h!==(h=n.cur()/a)&&1!==h&&--l)}n.unit=s,n.start=r,n.end=o[1]?r+(o[1]+1)*i:i}return n}]};Y.Animation=Y.extend(A,{tweener:function(e,t){Y.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,s=0,n=e.length;s<n;s++)i=e[s],ys[i]=ys[i]||[],ys[i].unshift(t)},prefilter:function(e,t){t?fs.unshift(e):fs.push(e)}}),Y.Tween=_,_.prototype={constructor:_,init:function(e,t,i,s,n,o){this.elem=e,this.prop=i,this.easing=n||"swing",this.options=t,this.start=this.now=this.cur(),this.end=s,this.unit=o||(Y.cssNumber[i]?"":"px")},cur:function(){var e=_.propHooks[this.prop];return e&&e.get?e.get(this):_.propHooks._default.get(this)},run:function(e){var t,i=_.propHooks[this.prop];return this.options.duration?this.pos=t=Y.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):_.propHooks._default.set(this),this}},_.prototype.init.prototype=_.prototype,_.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Y.css(e.elem,e.prop,!1,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){Y.fx.step[e.prop]?Y.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Y.cssProps[e.prop]]||Y.cssHooks[e.prop])?Y.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},_.propHooks.scrollTop=_.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Y.each(["toggle","show","hide"],function(e,t){var i=Y.fn[t];Y.fn[t]=function(s,n,o){return null==s||"boolean"==typeof s||!e&&Y.isFunction(s)&&Y.isFunction(n)?i.apply(this,arguments):this.animate(M(t,!0),s,n,o)}}),Y.fn.extend({fadeTo:function(e,t,i,s){return this.filter(m).css("opacity",0).show().end().animate({opacity:t},e,i,s)},animate:function(e,t,i,s){var n=Y.isEmptyObject(e),o=Y.speed(t,i,s);return t=function(){var t=A(this,Y.extend({},e),o);n&&t.stop(!0)},n||!1===o.queue?this.each(t):this.queue(o.queue,t)},stop:function(e,i,s){var n=function(e){var t=e.stop;delete e.stop,t(s)};return"string"!=typeof e&&(s=i,i=e,e=t),i&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Y.timers,a=Y._data(this);if(i)a[i]&&a[i].stop&&n(a[i]);else for(i in a)a[i]&&a[i].stop&&ms.test(i)&&n(a[i]);for(i=o.length;i--;)o[i].elem===this&&(null==e||o[i].queue===e)&&(o[i].anim.stop(s),t=!1,o.splice(i,1));(t||!s)&&Y.dequeue(this,e)})}}),Y.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Y.fn[e]=function(e,i,s){return this.animate(t,e,i,s)}}),Y.speed=function(e,t,i){var s=e&&"object"==typeof e?Y.extend({},e):{complete:i||!i&&t||Y.isFunction(e)&&e,duration:e,easing:i&&t||t&&!Y.isFunction(t)&&t};return s.duration=Y.fx.off?0:"number"==typeof s.duration?s.duration:s.duration in Y.fx.speeds?Y.fx.speeds[s.duration]:Y.fx.speeds._default,null!=s.queue&&!0!==s.queue||(s.queue="fx"),s.old=s.complete,s.complete=function(){Y.isFunction(s.old)&&s.old.call(this),s.queue&&Y.dequeue(this,s.queue)},s},Y.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Y.timers=[],Y.fx=_.prototype.init,Y.fx.tick=function(){for(var e,t=Y.timers,i=0;i<t.length;i++)e=t[i],!e()&&t[i]===e&&t.splice(i--,1);t.length||Y.fx.stop()},Y.fx.timer=function(e){e()&&Y.timers.push(e)&&!cs&&(cs=setInterval(Y.fx.tick,Y.fx.interval))},Y.fx.interval=13,Y.fx.stop=function(){clearInterval(cs),cs=null},Y.fx.speeds={slow:600,fast:200,_default:400},Y.fx.step={},Y.expr&&Y.expr.filters&&(Y.expr.filters.animated=function(e){return Y.grep(Y.timers,function(t){return e===t.elem}).length});var vs=/^(?:body|html)$/i;Y.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){Y.offset.setOffset(this,e,t)});var i,s,n,o,a,r,h,l={top:0,left:0},u=this[0],d=u&&u.ownerDocument;return d?(s=d.body)===u?Y.offset.bodyOffset(u):(i=d.documentElement,Y.contains(i,u)?(void 0!==u.getBoundingClientRect&&(l=u.getBoundingClientRect()),n=C(d),o=i.clientTop||s.clientTop||0,a=i.clientLeft||s.clientLeft||0,r=n.pageYOffset||i.scrollTop,h=n.pageXOffset||i.scrollLeft,{top:l.top+r-o,left:l.left+h-a}):l):void 0},Y.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return Y.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(Y.css(e,"marginTop"))||0,i+=parseFloat(Y.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var s=Y.css(e,"position");"static"===s&&(e.style.position="relative");var n,o,a=Y(e),r=a.offset(),h=Y.css(e,"top"),l=Y.css(e,"left"),u={},d={};("absolute"===s||"fixed"===s)&&-1<Y.inArray("auto",[h,l])?(n=(d=a.position()).top,o=d.left):(n=parseFloat(h)||0,o=parseFloat(l)||0),Y.isFunction(t)&&(t=t.call(e,i,r)),null!=t.top&&(u.top=t.top-r.top+n),null!=t.left&&(u.left=t.left-r.left+o),"using"in t?t.using.call(e,u):a.css(u)}},Y.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),i=this.offset(),s=vs.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(Y.css(e,"marginTop"))||0,i.left-=parseFloat(Y.css(e,"marginLeft"))||0,s.top+=parseFloat(Y.css(t[0],"borderTopWidth"))||0,s.left+=parseFloat(Y.css(t[0],"borderLeftWidth"))||0,{top:i.top-s.top,left:i.left-s.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||N.body;e&&!vs.test(e.nodeName)&&"static"===Y.css(e,"position");)e=e.offsetParent;return e||N.body})}}),Y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var s=/Y/.test(i);Y.fn[e]=function(n){return Y.access(this,function(e,n,o){var a=C(e);if(o===t)return a?i in a?a[i]:a.document.documentElement[n]:e[n];a?a.scrollTo(s?Y(a).scrollLeft():o,s?o:Y(a).scrollTop()):e[n]=o},e,n,arguments.length,null)}}),Y.each({Height:"height",Width:"width"},function(e,i){Y.each({padding:"inner"+e,content:i,"":"outer"+e},function(s,n){Y.fn[n]=function(n,o){var a=arguments.length&&(s||"boolean"!=typeof n),r=s||(!0===n||!0===o?"margin":"border");return Y.access(this,function(i,s,n){var o;return Y.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(o=i.documentElement,Math.max(i.body["scroll"+e],o["scroll"+e],i.body["offset"+e],o["offset"+e],o["client"+e])):n===t?Y.css(i,s,n,r):Y.style(i,s,n,r)},i,a?n:t,a,null)}})}),e.jQuery=e.$=Y,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return Y})}(window);var ie=getInternetExplorerVersion();function getQueryVariable(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var s=t[i].split("=");if(decodeURIComponent(s[0])==e)return decodeURIComponent(s[1])}}if(this.jukebox={},jukebox.Player=function(e,t){this.id=++jukebox.__jukeboxId,this.origin=t||null,this.settings={};for(var i in this.defaults)this.settings[i]=this.defaults[i];if("[object Object]"===Object.prototype.toString.call(e))for(var s in e)this.settings[s]=e[s];if("[object Function]"===Object.prototype.toString.call(jukebox.Manager)&&(jukebox.Manager=new jukebox.Manager),this.resource=this.isPlaying=null,this.resource="[object Object]"===Object.prototype.toString.call(jukebox.Manager)?jukebox.Manager.getPlayableResource(this.settings.resources):this.settings.resources[0]||null,null===this.resource)throw"Your browser can't playback the given resources - or you have missed to include jukebox.Manager";return this.__init(),this},jukebox.__jukeboxId=0,jukebox.Player.prototype={defaults:{resources:[],autoplay:!1,spritemap:{},flashMediaElement:"./swf/FlashMediaElement.swf",timeout:1e3},__addToManager:function(){!0!==this.__wasAddedToManager&&(jukebox.Manager.add(this),this.__wasAddedToManager=!0)},__init:function(){var e,t=this,i=this.settings,s={};if(jukebox.Manager&&void 0!==jukebox.Manager.features&&(s=jukebox.Manager.features),!0===s.html5audio){if(this.context=new Audio,this.context.src=this.resource,null===this.origin){var n=function(e){t.__addToManager(e)};this.context.addEventListener("canplaythrough",n,!0),window.setTimeout(function(){t.context.removeEventListener("canplaythrough",n,!0),n("timeout")},i.timeout)}this.context.autobuffer=!0,this.context.preload=!0;for(e in this.HTML5API)this[e]=this.HTML5API[e];1<s.channels?!0===i.autoplay?this.context.autoplay=!0:void 0!==i.spritemap[i.autoplay]&&this.play(i.autoplay):1===s.channels&&void 0!==i.spritemap[i.autoplay]&&(this.backgroundMusic=i.spritemap[i.autoplay],this.backgroundMusic.started=Date.now?Date.now():+new Date,this.play(i.autoplay)),1==s.channels&&!0!==i.canPlayBackground&&(window.addEventListener("pagehide",function(){null!==t.isPlaying&&(t.pause(),t.__wasAutoPaused=!0)}),window.addEventListener("pageshow",function(){t.__wasAutoPaused&&(t.resume(),delete t._wasAutoPaused)}))}else{if(!0!==s.flashaudio)throw"Your Browser does not support Flash Audio or HTML5 Audio.";for(e in this.FLASHAPI)this[e]=this.FLASHAPI[e];s=["id=jukebox-flashstream-"+this.id,"autoplay="+i.autoplay,"file="+window.encodeURIComponent(this.resource)],this.__initFlashContext(s),!0===i.autoplay?this.play(0):i.spritemap[i.autoplay]&&this.play(i.autoplay)}},__initFlashContext:function(e){var t,i,s=this.settings.flashMediaElement,n={flashvars:e.join("&"),quality:"high",bgcolor:"#000000",wmode:"transparent",allowscriptaccess:"always",allowfullscreen:"true"};if(navigator.userAgent.match(/MSIE/)){t=document.createElement("div"),document.getElementsByTagName("body")[0].appendChild(t);var o=document.createElement("object");o.id="jukebox-flashstream-"+this.id,o.setAttribute("type","application/x-shockwave-flash"),o.setAttribute("classid","clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"),o.setAttribute("width","0"),o.setAttribute("height","0"),n.movie=s+"?x="+(Date.now?Date.now():+new Date),n.flashvars=e.join("&amp;");for(i in n)e=document.createElement("param"),e.setAttribute("name",i),e.setAttribute("value",n[i]),o.appendChild(e);t.outerHTML=o.outerHTML,this.context=document.getElementById("jukebox-flashstream-"+this.id)}else{(t=document.createElement("embed")).id="jukebox-flashstream-"+this.id,t.setAttribute("type","application/x-shockwave-flash"),t.setAttribute("width","100"),t.setAttribute("height","100"),n.play=!1,n.loop=!1,n.src=s+"?x="+(Date.now?Date.now():+new Date);for(i in n)t.setAttribute(i,n[i]);document.getElementsByTagName("body")[0].appendChild(t),this.context=t}},backgroundHackForiOS:function(){if(void 0!==this.backgroundMusic){var e=Date.now?Date.now():+new Date;void 0===this.backgroundMusic.started?(this.backgroundMusic.started=e,this.setCurrentTime(this.backgroundMusic.start)):(this.backgroundMusic.lastPointer=(e-this.backgroundMusic.started)/1e3%(this.backgroundMusic.end-this.backgroundMusic.start)+this.backgroundMusic.start,this.play(this.backgroundMusic.lastPointer))}},play:function(e,t){if(null!==this.isPlaying&&!0!==t)void 0!==jukebox.Manager&&jukebox.Manager.addToQueue(e,this.id);else{var i,s=this.settings.spritemap;if(void 0!==s[e])i=s[e].start;else if("number"==typeof e){i=e;for(var n in s)if(i>=s[n].start&&i<=s[n].end){e=n;break}}void 0!==i&&"[object Object]"===Object.prototype.toString.call(s[e])&&(this.isPlaying=this.settings.spritemap[e],this.context.play&&this.context.play(),this.wasReady=this.setCurrentTime(i))}},stop:function(){return this.__lastPosition=0,this.isPlaying=null,this.backgroundMusic?this.backgroundHackForiOS():this.context.pause(),!0},pause:function(){return this.isPlaying=null,this.__lastPosition=this.getCurrentTime(),this.context.pause(),this.__lastPosition},resume:function(e){return null!==(e="number"==typeof e?e:this.__lastPosition)?(this.play(e),this.__lastPosition=null,!0):(this.context.play(),!1)},HTML5API:{getVolume:function(){return this.context.volume||1},setVolume:function(e){return this.context.volume=e,1e-4>Math.abs(this.context.volume-e)},getCurrentTime:function(){return this.context.currentTime||0},setCurrentTime:function(e){try{return this.context.currentTime=e,!0}catch(e){return!1}}},FLASHAPI:{getVolume:function(){return this.context&&"function"==typeof this.context.getVolume?this.context.getVolume():1},setVolume:function(e){return!(!this.context||"function"!=typeof this.context.setVolume)&&(this.context.setVolume(e),!0)},getCurrentTime:function(){return this.context&&"function"==typeof this.context.getCurrentTime?this.context.getCurrentTime():0},setCurrentTime:function(e){return!(!this.context||"function"!=typeof this.context.setCurrentTime)&&this.context.setCurrentTime(e)}}},void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";if(jukebox.Manager=function(e){this.features={},this.codecs={},this.__players={},this.__playersLength=0,this.__clones={},this.__queue=[],this.settings={};for(var t in this.defaults)this.settings[t]=this.defaults[t];if("[object Object]"===Object.prototype.toString.call(e))for(var i in e)this.settings[i]=e[i];this.__detectFeatures(),jukebox.Manager.__initialized=!1!==this.settings.useGameLoop||window.setInterval(function(){jukebox.Manager.loop()},20)},jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var e=window.Audio&&new Audio;if(e&&e.canPlayType&&!1===this.settings.useFlash){for(var t,i,s=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],n=0,o=s.length;n<o;n++)if(i=s[n].e,s[n].m.length&&"object"==typeof s[n].m)for(var a=0,r=s[n].m.length;a<r;a++){if(t=s[n].m[a],""!==e.canPlayType(t)){this.codecs[i]=t;break}this.codecs[i]||(this.codecs[i]=!1)}this.features.html5audio=!!(this.codecs.mp3||this.codecs.ogg||this.codecs.webm||this.codecs.wav),this.features.channels=8,e.volume=.1337,this.features.volume=!!(1e-4>Math.abs(e.volume-.1337)),navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}if(this.features.flashaudio=!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1,window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(e){}!0===this.settings.useFlash&&(this.features.flashaudio=!0),!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(e){return this.__players&&void 0!==this.__players[e]?this.__players[e]:null},__getClone:function(e,t){for(var i in this.__clones){var s=this.__clones[i];if(null===s.isPlaying&&s.origin===e)return s}if("[object Object]"===Object.prototype.toString.call(t)){i={};for(var n in t)i[n]=t[n];return i.autoplay=!1,(n=new jukebox.Player(i,e)).isClone=!0,n.wasReady=!1,this.__clones[n.id]=n}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&this.__playersLength<this.features.channels){var e=this.__queue[0],t=this.__getPlayerById(e.origin);if(null!==t){var i=this.__getClone(e.origin,t.settings);null!==i&&(!0===this.features.volume&&(t=this.__players[e.origin])&&i.setVolume(t.getVolume()),this.add(i),i.play(e.pointer,!0))}this.__queue.splice(0,1)}else for(i in this.__queue.length&&1===this.features.channels&&(e=this.__queue[0],t=this.__getPlayerById(e.origin),null!==t&&t.play(e.pointer,!0),this.__queue.splice(0,1)),this.__players)e=this.__players[i],t=e.getCurrentTime()||0,e.isPlaying&&!1===e.wasReady?e.wasReady=e.setCurrentTime(e.isPlaying.start):e.isPlaying&&!0===e.wasReady?t>e.isPlaying.end&&(!0===e.isPlaying.loop?e.play(e.isPlaying.start,!0):e.stop()):e.isClone&&null===e.isPlaying?this.remove(e):void 0!==e.backgroundMusic&&null===e.isPlaying&&t>e.backgroundMusic.end&&e.backgroundHackForiOS()},getPlayableResource:function(e){"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);for(var t=0,i=e.length;t<i;t++){var s=e[t],n=s.match(/\.([^\.]*)$/)[1];if(n&&this.codecs[n])return s}return null},add:function(e){return e instanceof jukebox.Player&&void 0===this.__players[e.id]&&(this.__playersLength++,this.__players[e.id]=e,!0)},remove:function(e){return e instanceof jukebox.Player&&void 0!==this.__players[e.id]&&(this.__playersLength--,delete this.__players[e.id],!0)},addToQueue:function(e,t){return("string"==typeof e||"number"==typeof e)&&void 0!==this.__players[t]&&(this.__queue.push({pointer:e,origin:t}),!0)}},void 0===this.jukebox)throw"jukebox.Manager requires jukebox.Player (Player.js) to run properly.";jukebox.Manager=function(e){this.features={},this.codecs={},this.__players={},this.__playersLength=0,this.__clones={},this.__queue=[],this.settings={};for(var t in this.defaults)this.settings[t]=this.defaults[t];if("[object Object]"===Object.prototype.toString.call(e))for(var i in e)this.settings[i]=e[i];this.__detectFeatures(),jukebox.Manager.__initialized=!1!==this.settings.useGameLoop||window.setInterval(function(){jukebox.Manager.loop()},20)},jukebox.Manager.prototype={defaults:{useFlash:!1,useGameLoop:!1},__detectFeatures:function(){var e=window.Audio&&new Audio;if(e&&e.canPlayType&&!1===this.settings.useFlash){for(var t,i,s=[{e:"3gp",m:["audio/3gpp","audio/amr"]},{e:"aac",m:["audio/aac","audio/aacp"]},{e:"amr",m:["audio/amr","audio/3gpp"]},{e:"caf",m:["audio/IMA-ADPCM","audio/x-adpcm",'audio/x-aiff; codecs="IMA-ADPCM, ADPCM"']},{e:"m4a",m:'audio/mp4{audio/mp4; codecs="mp4a.40.2,avc1.42E01E"{audio/mpeg4{audio/mpeg4-generic{audio/mp4a-latm{audio/MP4A-LATM{audio/x-m4a'.split("{")},{e:"mp3",m:["audio/mp3","audio/mpeg",'audio/mpeg; codecs="mp3"',"audio/MPA","audio/mpa-robust"]},{e:"mpga",m:["audio/MPA","audio/mpa-robust","audio/mpeg","video/mpeg"]},{e:"mp4",m:["audio/mp4","video/mp4"]},{e:"ogg",m:["application/ogg","audio/ogg",'audio/ogg; codecs="theora, vorbis"',"video/ogg",'video/ogg; codecs="theora, vorbis"']},{e:"wav",m:["audio/wave","audio/wav",'audio/wav; codecs="1"',"audio/x-wav","audio/x-pn-wav"]},{e:"webm",m:["audio/webm",'audio/webm; codecs="vorbis"',"video/webm"]}],n=0,o=s.length;n<o;n++)if(i=s[n].e,s[n].m.length&&"object"==typeof s[n].m)for(var a=0,r=s[n].m.length;a<r;a++){if(t=s[n].m[a],""!==e.canPlayType(t)){this.codecs[i]=t;break}this.codecs[i]||(this.codecs[i]=!1)}this.features.html5audio=!!(this.codecs.mp3||this.codecs.ogg||this.codecs.webm||this.codecs.wav),this.features.channels=8,e.volume=.1337,this.features.volume=!!(1e-4>Math.abs(e.volume-.1337)),navigator.userAgent.match(/iPhone|iPod|iPad/i)&&(this.features.channels=1)}if(this.features.flashaudio=!!navigator.mimeTypes["application/x-shockwave-flash"]||!!navigator.plugins["Shockwave Flash"]||!1,window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash.10"),this.features.flashaudio=!0}catch(e){}!0===this.settings.useFlash&&(this.features.flashaudio=!0),!0===this.features.flashaudio&&!this.features.html5audio&&(this.codecs.mp3="audio/mp3",this.codecs.mpga="audio/mpeg",this.codecs.mp4="audio/mp4",this.codecs.m4a="audio/mp4",this.codecs["3gp"]="audio/3gpp",this.codecs.amr="audio/amr",this.features.volume=!0,this.features.channels=1)},__getPlayerById:function(e){return this.__players&&void 0!==this.__players[e]?this.__players[e]:null},__getClone:function(e,t){for(var i in this.__clones){var s=this.__clones[i];if(null===s.isPlaying&&s.origin===e)return s}if("[object Object]"===Object.prototype.toString.call(t)){i={};for(var n in t)i[n]=t[n];return i.autoplay=!1,(n=new jukebox.Player(i,e)).isClone=!0,n.wasReady=!1,this.__clones[n.id]=n}return null},loop:function(){if(0!==this.__playersLength)if(this.__queue.length&&this.__playersLength<this.features.channels){var e=this.__queue[0],t=this.__getPlayerById(e.origin);if(null!==t){var i=this.__getClone(e.origin,t.settings);null!==i&&(!0===this.features.volume&&(t=this.__players[e.origin])&&i.setVolume(t.getVolume()),this.add(i),i.play(e.pointer,!0))}this.__queue.splice(0,1)}else for(i in this.__queue.length&&1===this.features.channels&&(e=this.__queue[0],t=this.__getPlayerById(e.origin),null!==t&&t.play(e.pointer,!0),this.__queue.splice(0,1)),this.__players)e=this.__players[i],t=e.getCurrentTime()||0,e.isPlaying&&!1===e.wasReady?e.wasReady=e.setCurrentTime(e.isPlaying.start):e.isPlaying&&!0===e.wasReady?t>e.isPlaying.end&&(!0===e.isPlaying.loop?e.play(e.isPlaying.start,!0):e.stop()):e.isClone&&null===e.isPlaying?this.remove(e):void 0!==e.backgroundMusic&&null===e.isPlaying&&t>e.backgroundMusic.end&&e.backgroundHackForiOS()},getPlayableResource:function(e){"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);for(var t=0,i=e.length;t<i;t++){var s=e[t],n=s.match(/\.([^\.]*)$/)[1];if(n&&this.codecs[n])return s}return null},add:function(e){return e instanceof jukebox.Player&&void 0===this.__players[e.id]&&(this.__playersLength++,this.__players[e.id]=e,!0)},remove:function(e){return e instanceof jukebox.Player&&void 0!==this.__players[e.id]&&(this.__playersLength--,delete this.__players[e.id],!0)},addToQueue:function(e,t){return("string"==typeof e||"number"==typeof e)&&void 0!==this.__players[t]&&(this.__queue.push({pointer:e,origin:t}),!0)}},function(){var e={},t=null,i=!0,s=!1;try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:i=!1}catch(e){i=!1}if(!i)if("undefined"!=typeof Audio)try{new Audio}catch(e){s=!0}else s=!0;if(i){var n=void 0===t.createGain?t.createGainNode():t.createGain();n.gain.value=1,n.connect(t.destination)}var o=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=i,this.ctx=t,this.noAudio=s,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};o.prototype={volume:function(e){if(0<=(e=parseFloat(e))&&1>=e){this._volume=e,i&&(n.gain.value=e);for(var t in this._howls)if(this._howls.hasOwnProperty(t)&&!1===this._howls[t]._webAudio)for(e=0;e<this._howls[t]._audioNode.length;e++)this._howls[t]._audioNode[e].volume=this._howls[t]._volume*this._volume;return this}return i?n.gain.value:this._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){this._muted=e,i&&(n.gain.value=e?0:this._volume);for(var t in this._howls)if(this._howls.hasOwnProperty(t)&&!1===this._howls[t]._webAudio)for(var s=0;s<this._howls[t]._audioNode.length;s++)this._howls[t]._audioNode[s].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var i=function(){var s=t.createBuffer(1,1,22050),n=t.createBufferSource();n.buffer=s,n.connect(t.destination),void 0===n.start?n.noteOn(0):n.start(0),setTimeout(function(){n.playbackState!==n.PLAYING_STATE&&n.playbackState!==n.FINISHED_STATE||(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchend",i,!1))},0)};return window.addEventListener("touchend",i,!1),e}}};var a=null,r={};s||(a=new Audio,r={mp3:!!a.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var h=new o(r),l=function(e){this._autoplay=e.autoplay||!1,this._buffer=e.buffer||!1,this._duration=e.duration||0,this._format=e.format||null,this._loop=e.loop||!1,this._loaded=!1,this._sprite=e.sprite||{},this._src=e.src||"",this._pos3d=e.pos3d||[0,0,-.5],this._volume=void 0!==e.volume?e.volume:1,this._urls=e.urls||[],this._rate=e.rate||1,this._model=e.model||null,this._onload=[e.onload||function(){}],this._onloaderror=[e.onloaderror||function(){}],this._onend=[e.onend||function(){}],this._onpause=[e.onpause||function(){}],this._onplay=[e.onplay||function(){}],this._onendTimer=[],this._webAudio=i&&!this._buffer,this._audioNode=[],this._webAudio&&this._setupAudioNode(),void 0!==t&&t&&h.iOSAutoEnable&&h._enableiOSAudio(),h._howls.push(this),this.load()};if(l.prototype={load:function(){var t=this,i=null;if(s)t.on("loaderror",Error("No audio support."));else{for(var n=0;n<t._urls.length;n++){var a,l;if(t._format)a=t._format;else{if(l=t._urls[n],(a=/^data:audio\/([^;,]+);/i.exec(l))||(a=/\.([^.]+)$/.exec(l.split("?",1)[0])),!a)return void t.on("loaderror",Error("Could not extract format from passed URLs, please add format parameter."));a=a[1].toLowerCase()}if(r[a]){i=t._urls[n];break}}if(i){if(t._src=i,t._webAudio){var c=i;if(c in e)t._duration=e[c].duration,d(t);else if(/^data:[^;]+;base64,/.test(c)){for(i=atob(c.split(",")[1]),n=new Uint8Array(i.length),a=0;a<i.length;++a)n[a]=i.charCodeAt(a);u(n.buffer,t,c)}else{var g=new XMLHttpRequest;g.open("GET",c,!0),g.responseType="arraybuffer",g.onload=function(){u(g.response,t,c)},g.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[c],t.load())};try{g.send()}catch(e){g.onerror()}}}else{var p=new Audio;p.addEventListener("error",function(){p.error&&4===p.error.code&&(o.noAudio=!0),t.on("loaderror",{type:p.error?p.error.code:0})},!1),t._audioNode.push(p),p.src=i,p._pos=0,p.preload="auto",p.volume=h._muted?0:t._volume*h.volume();var m=function(){t._duration=Math.ceil(10*p.duration)/10,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),p.removeEventListener("canplaythrough",m,!1)};p.addEventListener("canplaythrough",m,!1),p.load()}return t}t.on("loaderror",Error("No codec support for selected audio sources."))}},urls:function(e){return e?(this.stop(),this._urls="string"==typeof e?[e]:e,this._loaded=!1,this.load(),this):this._urls},play:function(i,s){var n=this;return"function"==typeof i&&(s=i),i&&"function"!=typeof i||(i="_default"),n._loaded?n._sprite[i]?(n._inactiveNode(function(o){o._sprite=i;var a=0<o._pos?o._pos:n._sprite[i][0]/1e3,r=0;n._webAudio?(r=n._sprite[i][1]/1e3-o._pos,0<o._pos&&(a=n._sprite[i][0]/1e3+a)):r=n._sprite[i][1]/1e3-(a-n._sprite[i][0]/1e3);var l,u=!(!n._loop&&!n._sprite[i][2]),d="string"==typeof s?s:Math.round(Date.now()*Math.random())+"";if(l=setTimeout(function(){!n._webAudio&&u&&n.stop(d).play(i,d),n._webAudio&&!u&&(n._nodeById(d).paused=!0,n._nodeById(d)._pos=0,n._clearEndTimer(d)),!n._webAudio&&!u&&n.stop(d),n.on("end",d)},r/n._rate*1e3),n._onendTimer.push({timer:l,id:d}),n._webAudio){l=n._sprite[i][0]/1e3;var c=n._sprite[i][1]/1e3;o.id=d,o.paused=!1,l=[u,l,c],(c=n._nodeById(d)).bufferSource=t.createBufferSource(),c.bufferSource.buffer=e[n._src],c.bufferSource.connect(c.panner),c.bufferSource.loop=l[0],l[0]&&(c.bufferSource.loopStart=l[1],c.bufferSource.loopEnd=l[1]+l[2]),c.bufferSource.playbackRate.value=n._rate,n._playStart=t.currentTime,o.gain.value=n._volume,void 0===o.bufferSource.start?u?o.bufferSource.noteGrainOn(0,a,86400):o.bufferSource.noteGrainOn(0,a,r):u?o.bufferSource.start(0,a,86400):o.bufferSource.start(0,a,r)}else{if(4!==o.readyState&&(o.readyState||!navigator.isCocoonJS)){n._clearEndTimer(d);var g=i,p=s,m=function(){n.play(g,p),o.removeEventListener("canplaythrough",m,!1)};return o.addEventListener("canplaythrough",m,!1),n}o.readyState=4,o.id=d,o.currentTime=a,o.muted=h._muted||o.muted,o.volume=n._volume*h.volume(),setTimeout(function(){o.play()},0)}return n.on("play"),"function"==typeof s&&s(d),n}),n):("function"==typeof s&&s(),n):(n.on("load",function(){n.play(i,s)}),n)},pause:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.pause(e)}),t;t._clearEndTimer(e);var i=e?t._nodeById(e):t._activeNode();if(i)if(i._pos=t.pos(null,e),t._webAudio){if(!i.bufferSource||i.paused)return t;i.paused=!0,void 0===i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause();return t.on("pause"),t},stop:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.stop(e)}),t;t._clearEndTimer(e);var i=e?t._nodeById(e):t._activeNode();if(i)if(i._pos=0,t._webAudio){if(!i.bufferSource||i.paused)return t;i.paused=!0,void 0===i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else isNaN(i.duration)||(i.pause(),i.currentTime=0);return t},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var i=e?t._nodeById(e):t._activeNode();return i&&(t._webAudio?i.gain.value=0:i.muted=!0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var i=e?t._nodeById(e):t._activeNode();return i&&(t._webAudio?i.gain.value=t._volume:i.muted=!1),t},volume:function(e,t){var i=this;if(0<=(e=parseFloat(e))&&1>=e){if(i._volume=e,!i._loaded)return i.on("play",function(){i.volume(e,t)}),i;var s=t?i._nodeById(t):i._activeNode();return s&&(i._webAudio?s.gain.value=e:s.volume=e*h.volume()),i}return i._volume},loop:function(e){return"boolean"==typeof e?(this._loop=e,this):this._loop},sprite:function(e){return"object"==typeof e?(this._sprite=e,this):this._sprite},pos:function(e,i){var s=this;if(!s._loaded)return s.on("load",function(){s.pos(e)}),"number"==typeof e?s:s._pos||0;e=parseFloat(e);var n=i?s._nodeById(i):s._activeNode();if(n)return 0<=e?(s.pause(i),n._pos=e,s.play(n._sprite,i),s):s._webAudio?n._pos+(t.currentTime-s._playStart):n.currentTime;if(0<=e)return s;for(n=0;n<s._audioNode.length;n++)if(s._audioNode[n].paused&&4===s._audioNode[n].readyState)return s._webAudio?s._audioNode[n]._pos:s._audioNode[n].currentTime},pos3d:function(e,t,i,s){var n=this;if(t=void 0!==t&&t?t:0,i=void 0!==i&&i?i:-.5,!n._loaded)return n.on("play",function(){n.pos3d(e,t,i,s)}),n;if(!(0<=e||0>e))return n._pos3d;if(n._webAudio){var o=s?n._nodeById(s):n._activeNode();o&&(n._pos3d=[e,t,i],o.panner.setPosition(e,t,i),o.panner.panningModel=n._model||"HRTF")}return n},fade:function(e,t,i,s,n){var o=this,a=Math.abs(e-t),r=e>t?"down":"up",h=i/(a=a/.01);if(!o._loaded)return o.on("load",function(){o.fade(e,t,i,s,n)}),o;o.volume(e,n);for(var l=1;l<=a;l++)!function(){var e=Math.round(1e3*(o._volume+("up"===r?.01:-.01)*l))/1e3;setTimeout(function(){o.volume(e,n),e===t&&s&&s()},h*l)}()},fadeIn:function(e,t,i){return this.volume(0).play().fade(0,e,t,i)},fadeOut:function(e,t,i,s){var n=this;return n.fade(n._volume,e,t,function(){i&&i(),n.pause(s),n.on("end")},s)},_nodeById:function(e){for(var t=this._audioNode[0],i=0;i<this._audioNode.length;i++)if(this._audioNode[i].id===e){t=this._audioNode[i];break}return t},_activeNode:function(){for(var e=null,t=0;t<this._audioNode.length;t++)if(!this._audioNode[t].paused){e=this._audioNode[t];break}return this._drainPool(),e},_inactiveNode:function(e){for(var t=null,i=0;i<this._audioNode.length;i++)if(this._audioNode[i].paused&&4===this._audioNode[i].readyState){e(this._audioNode[i]),t=!0;break}var s;if(this._drainPool(),!t)if(this._webAudio)s=this._setupAudioNode(),e(s);else{this.load(),s=this._audioNode[this._audioNode.length-1];var n=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",o=function(){s.removeEventListener(n,o,!1),e(s)};s.addEventListener(n,o,!1)}},_drainPool:function(){var e,t=0;for(e=0;e<this._audioNode.length;e++)this._audioNode[e].paused&&t++;for(e=this._audioNode.length-1;0<=e&&!(5>=t);e--)this._audioNode[e].paused&&(this._webAudio&&this._audioNode[e].disconnect(0),t--,this._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var t=-1,i=0;i<this._onendTimer.length;i++)if(this._onendTimer[i].id===e){t=i;break}(e=this._onendTimer[t])&&(clearTimeout(e.timer),this._onendTimer.splice(t,1))},_setupAudioNode:function(){var e=this._audioNode,i=this._audioNode.length;return e[i]=void 0===t.createGain?t.createGainNode():t.createGain(),e[i].gain.value=this._volume,e[i].paused=!0,e[i]._pos=0,e[i].readyState=4,e[i].connect(n),e[i].panner=t.createPanner(),e[i].panner.panningModel=this._model||"equalpower",e[i].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]),e[i].panner.connect(e[i]),e[i]},on:function(e,t){var i=this["_on"+e];if("function"==typeof t)i.push(t);else for(var s=0;s<i.length;s++)t?i[s].call(this,t):i[s].call(this);return this},off:function(e,t){var i=this["_on"+e];if(t){for(var s=0;s<i.length;s++)if(t===i[s]){i.splice(s,1);break}}else this["_on"+e]=[];return this},unload:function(){for(var t=this._audioNode,i=0;i<this._audioNode.length;i++)t[i].paused||(this.stop(t[i].id),this.on("end",t[i].id)),this._webAudio?t[i].disconnect(0):t[i].src="";for(i=0;i<this._onendTimer.length;i++)clearTimeout(this._onendTimer[i].timer);null!==(t=h._howls.indexOf(this))&&0<=t&&h._howls.splice(t,1),delete e[this._src]}},i)var u=function(i,s,n){t.decodeAudioData(i,function(t){t&&(e[n]=t,d(s,t))},function(e){s.on("loaderror",e)})},d=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()};"function"==typeof define&&define.amd&&define(function(){return{Howler:h,Howl:l}}),"undefined"!=typeof exports&&(exports.Howler=h,exports.Howl=l),"undefined"!=typeof window&&(window.Howler=h,window.Howl=l)}(),function(e){if(Number.prototype.map=function(e,t,i,s){return i+(this-e)/(t-e)*(s-i)},Number.prototype.limit=function(e,t){return Math.min(t,Math.max(e,this))},Number.prototype.round=function(e){return e=Math.pow(10,e||0),Math.round(this*e)/e},Number.prototype.floor=function(){return Math.floor(this)},Number.prototype.ceil=function(){return Math.ceil(this)},Number.prototype.toInt=function(){return 0|this},Number.prototype.toRad=function(){return this/180*Math.PI},Number.prototype.toDeg=function(){return 180*this/Math.PI},Array.prototype.erase=function(e){for(var t=this.length;t--;)this[t]===e&&this.splice(t,1);return this},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},Function.prototype.bind=Function.prototype.bind||function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,s=function(){},n=function(){return i.apply(this instanceof s&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return s.prototype=this.prototype,n.prototype=new s,n},e.ig={game:null,debug:null,version:"1.23",global:e,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:e.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(e){return"#"==e.charAt(0)?document.getElementById(e.substr(1)):document.getElementsByTagName(e)},$new:function(e){return document.createElement(e)},copy:function(e){if(!e||"object"!=typeof e||e instanceof HTMLElement||e instanceof ig.Class)return e;if(e instanceof Array)for(var t=[],i=0,s=e.length;i<s;i++)t[i]=ig.copy(e[i]);else for(i in t={},e)t[i]=ig.copy(e[i]);return t},merge:function(e,t){for(var i in t){var s=t[i];"object"!=typeof s||s instanceof HTMLElement||s instanceof ig.Class||null===s?e[i]=s:(e[i]&&"object"==typeof e[i]||(e[i]=s instanceof Array?[]:{}),ig.merge(e[i],s))}return e},ksort:function(e){if(!e||"object"!=typeof e)return[];var t,i=[],s=[];for(t in e)i.push(t);for(i.sort(),t=0;t<i.length;t++)s.push(e[i[t]]);return s},setVendorAttribute:function(e,t,i){var s=t.charAt(0).toUpperCase()+t.substr(1);e[t]=void 0!==e.imageSmoothingEnabled?e["ms"+s]=e["moz"+s]=e["o"+s]=i:e["ms"+s]=e["moz"+s]=e["webkit"+s]=e["o"+s]=i},getVendorAttribute:function(e,t){var i=t.charAt(0).toUpperCase()+t.substr(1);return void 0!==e.imageSmoothingEnabled?e[t]||e["ms"+i]||e["moz"+i]||e["o"+i]:e[t]||e["ms"+i]||e["moz"+i]||e["webkit"+i]||e["o"+i]},normalizeVendorAttribute:function(e,t){var i=ig.getVendorAttribute(e,t);!e[t]&&i&&(e[t]=i)},getImagePixels:function(e,t,i,s,n){var o=ig.$new("canvas");o.width=e.width,o.height=e.height;var a=o.getContext("2d");ig.System.SCALE.CRISP(o,a);var r=ig.getVendorAttribute(a,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(a,"getImageDataHD");var h=e.width/r,l=e.height/r;return o.width=Math.ceil(h),o.height=Math.ceil(l),a.drawImage(e,0,0,h,l),1===r?a.getImageData(t,i,s,n):a.getImageDataHD(t,i,s,n)},module:function(e){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[e]&&ig.modules[e].body)throw"Module '"+e+"' is already defined";return ig._current={name:e,requires:[],loaded:!1,body:null},ig.modules[e]=ig._current,ig._loadQueue.push(ig._current),ig},requires:function(){return ig._current.requires=Array.prototype.slice.call(arguments),ig},defines:function(e){ig._current.body=e,ig._current=null,ig._initDOMReady()},addResource:function(e){ig.resources.push(e)},setNocache:function(e){ig.nocache=e?"?"+Date.now():""},log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(e,t){ig.modules[e]={name:e,requires:[],loaded:!1,body:null},ig._waitForOnload++;var i=ig.prefix+ig.lib+e.replace(/\./g,"/")+".js"+ig.nocache,s=ig.$new("script");s.type="text/javascript",s.src=i,s.onload=function(){ig._waitForOnload--,ig._execModules()},s.onerror=function(){throw"Failed to load module "+e+" at "+i+" required from "+t},ig.$("head")[0].appendChild(s)},_execModules:function(){for(var e=!1,t=0;t<ig._loadQueue.length;t++){for(var i=ig._loadQueue[t],s=!0,n=0;n<i.requires.length;n++){var o=i.requires[n];ig.modules[o]?ig.modules[o].loaded||(s=!1):(s=!1,ig._loadScript(o,i.name))}s&&i.body&&(ig._loadQueue.splice(t,1),i.loaded=!0,i.body(),e=!0,t--)}if(e)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){for(e=[],t=0;t<ig._loadQueue.length;t++){for(s=[],o=ig._loadQueue[t].requires,n=0;n<o.length;n++)i=ig.modules[o[n]],(!i||!i.loaded)&&s.push(o[n]);e.push(ig._loadQueue[t].name+" (requires: "+s.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+e.join("\n")}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0,ig._waitForOnload--,ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0),ig.ua.pixelRatio=e.devicePixelRatio||1,ig.ua.viewport={width:e.innerWidth,height:e.innerHeight},ig.ua.screen={width:e.screen.availWidth*ig.ua.pixelRatio,height:e.screen.availHeight*ig.ua.pixelRatio},ig.ua.iPhone=/iPhone/i.test(navigator.userAgent),ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio,ig.ua.iPad=/iPad/i.test(navigator.userAgent),ig.ua.android=/android/i.test(navigator.userAgent),ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent),ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent),ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad,ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent),ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag,ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]),ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent),ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent),ig.ua.Kindle=/Silk/i.test(navigator.userAgent),ig.ua.touchDevice="ontouchstart"in e||e.navigator.msMaxTouchPoints,ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),e.addEventListener("load",ig._DOMReady,!1)))}},ig.normalizeVendorAttribute(e,"requestAnimationFrame"),e.requestAnimationFrame){var t=1,i={};e.ig.setAnimation=function(s,n){var o=t++;i[o]=!0;var a=function(){i[o]&&(e.requestAnimationFrame(a,n),s())};return e.requestAnimationFrame(a,n),o},e.ig.clearAnimation=function(e){delete i[e]}}else e.ig.setAnimation=function(t){return e.setInterval(t,1e3/60)},e.ig.clearAnimation=function(t){e.clearInterval(t)};var s=!1,n=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,o=0;e.ig.Class=function(){};var a=function(e){var t,i=this.prototype,s={};for(t in e)"function"==typeof e[t]&&"function"==typeof i[t]&&n.test(e[t])?(s[t]=i[t],i[t]=function(e,t){return function(){var i=this.parent;this.parent=s[e];var n=t.apply(this,arguments);return this.parent=i,n}}(t,e[t])):i[t]=e[t]};e.ig.Class.extend=function(t){function i(){if(!s){if(this.staticInstantiate){var e=this.staticInstantiate.apply(this,arguments);if(e)return e}for(var t in this)"object"==typeof this[t]&&(this[t]=ig.copy(this[t]));this.init&&this.init.apply(this,arguments)}return this}var r=this.prototype;s=!0;var h=new this;s=!1;for(var l in t)h[l]="function"==typeof t[l]&&"function"==typeof r[l]&&n.test(t[l])?function(e,t){return function(){var i=this.parent;this.parent=r[e];var s=t.apply(this,arguments);return this.parent=i,s}}(l,t[l]):t[l];return i.prototype=h,i.prototype.constructor=i,i.extend=e.ig.Class.extend,i.inject=a,i.classId=h.classId=++o,i},e.ImpactMixin&&ig.merge(ig,e.ImpactMixin)}(window),ig.baked=!0,ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(e){return ig.Image.cache[e]||null},init:function(e){this.path=e,this.load()},load:function(e){this.loaded?e&&e(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=e||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width,this.height=this.data.height,this.loaded=!0,1!=ig.system.scale&&this.resize(ig.system.scale),this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0,this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(e){var t=ig.getImagePixels(this.data,0,0,this.width,this.height),i=this.width*e,s=this.height*e,n=ig.$new("canvas");n.width=i,n.height=s;for(var o=n.getContext("2d"),a=o.getImageData(0,0,i,s),r=0;r<s;r++)for(var h=0;h<i;h++){var l=4*(Math.floor(r/e)*this.width+Math.floor(h/e)),u=4*(r*i+h);a.data[u]=t.data[l],a.data[u+1]=t.data[l+1],a.data[u+2]=t.data[l+2],a.data[u+3]=t.data[l+3]}o.putImageData(a,0,0),this.data=n},draw:function(e,t,i,s,n,o){if(this.loaded){var a=ig.system.scale;n=(n||this.width)*a,o=(o||this.height)*a,ig.system.context.drawImage(this.data,i?i*a:0,s?s*a:0,n,o,ig.system.getDrawPos(e),ig.system.getDrawPos(t),n,o),ig.Image.drawCount++}},drawTile:function(e,t,i,s,n,o,a){if(n=n||s,this.loaded&&!(s>this.width||n>this.height)){var r=ig.system.scale,h=Math.floor(s*r),l=Math.floor(n*r),u=o?-1:1,d=a?-1:1;(o||a)&&(ig.system.context.save(),ig.system.context.scale(u,d)),ig.system.context.drawImage(this.data,Math.floor(i*s)%this.width*r,Math.floor(i*s/this.width)*n*r,h,l,ig.system.getDrawPos(e)*u-(o?h:0),ig.system.getDrawPos(t)*d-(a?l:0),h,l),(o||a)&&ig.system.context.restore(),ig.Image.drawCount++}}}),ig.Image.drawCount=0,ig.Image.cache={},ig.Image.reloadCache=function(){for(var e in ig.Image.cache)ig.Image.cache[e].reload()}}),ig.baked=!0,ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(e){this._loadMetrics(this.data),this.parent(e)},widthForString:function(e){if(-1!==e.indexOf("\n")){e=e.split("\n");for(var t=0,i=0;i<e.length;i++)t=Math.max(t,this._widthForLine(e[i]));return t}return this._widthForLine(e)},_widthForLine:function(e){for(var t=0,i=0;i<e.length;i++)t+=this.widthMap[e.charCodeAt(i)-this.firstChar]+this.letterSpacing;return t},heightForString:function(e){return e.split("\n").length*(this.height+this.lineSpacing)},draw:function(e,t,i,s){if("string"!=typeof e&&(e=e.toString()),-1!==e.indexOf("\n")){e=e.split("\n");for(var n=this.height+this.lineSpacing,o=0;o<e.length;o++)this.draw(e[o],t,i+o*n,s)}else{for(s!=ig.Font.ALIGN.RIGHT&&s!=ig.Font.ALIGN.CENTER||(o=this._widthForLine(e),t-=s==ig.Font.ALIGN.CENTER?o/2:o),1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha),o=0;o<e.length;o++)s=e.charCodeAt(o),t+=this._drawChar(s-this.firstChar,t,i);1!==this.alpha&&(ig.system.context.globalAlpha=1),ig.Image.drawCount+=e.length}},_drawChar:function(e,t,i){if(!this.loaded||0>e||e>=this.indices.length)return 0;var s=ig.system.scale,n=this.widthMap[e]*s,o=(this.height-2)*s;return ig.system.context.drawImage(this.data,this.indices[e]*s,0,n,o,ig.system.getDrawPos(t),ig.system.getDrawPos(i),n,o),this.widthMap[e]+this.letterSpacing},_loadMetrics:function(e){this.height=e.height-1,this.widthMap=[],this.indices=[];for(var t=ig.getImagePixels(e,0,e.height-1,e.width,1),i=0,s=0;s<e.width;s++){var n=4*s+3;127<t.data[n]?i++:128>t.data[n]&&i&&(this.widthMap.push(i),this.indices.push(s-i),0,i=0)}this.widthMap.push(i),this.indices.push(s-i)}}),ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}}),ig.baked=!0,ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(ig.Sound.enabled&&window.Audio){for(var e=new Audio,t=0;t<ig.Sound.use.length;t++){var i=ig.Sound.use[t];if(e.canPlayType(i.mime)){this.format=i;break}}this.format||(ig.Sound.enabled=!1)}else ig.Sound.enabled=!1},load:function(e,t,i){var s=ig.prefix+e.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[e]){if(t&&this.clips[e].length<ig.Sound.channels)for(t=this.clips[e].length;t<ig.Sound.channels;t++){var n=new Audio(s);n.load(),this.clips[e].push(n)}return this.clips[e][0]}var o=new Audio(s);if(i&&(o.addEventListener("canplaythrough",function t(s){o.removeEventListener("canplaythrough",t,!1),i(e,!0,s)},!1),o.addEventListener("error",function(t){i(e,!1,t)},!1)),o.preload="auto",o.load(),this.clips[e]=[o],t)for(t=1;t<ig.Sound.channels;t++)n=new Audio(s),n.load(),this.clips[e].push(n);return o},get:function(e){e=this.clips[e];for(var t,i=0;t=e[i++];)if(t.paused||t.ended)return t.ended&&(t.currentTime=0),t;return e[0].pause(),e[0].currentTime=0,e[0]}}),ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this),Object.defineProperty?(Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)}),Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})):this.__defineGetter__&&(this.__defineGetter__("volume",this.getVolume.bind(this)),this.__defineSetter__("volume",this.setVolume.bind(this)),this.__defineGetter__("loop",this.getLooping.bind(this)),this.__defineSetter__("loop",this.setLooping.bind(this)))},add:function(e,t){if(ig.Sound.enabled){var i=ig.soundManager.load(e instanceof ig.Sound?e.path:e,!1);i.loop=this._loop,i.volume=this._volume,i.addEventListener("ended",this._endedCallbackBound,!1),this.tracks.push(i),t&&(this.namedTracks[t]=i),this.currentTrack||(this.currentTrack=i)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(e){if(e&&this.namedTracks[e])e=this.namedTracks[e],e!=this.currentTrack&&(this.stop(),this.currentTrack=e);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(e){this._loop=e;for(var t in this.tracks)this.tracks[t].loop=e},getVolume:function(){return this._volume},setVolume:function(e){this._volume=e.limit(0,1);for(var t in this.tracks)this.tracks[t].volume=this._volume},fadeOut:function(e){this.currentTrack&&(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(e),this._fadeInterval=setInterval(this._fadeStep.bind(this),50))},_fadeStep:function(){var e=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;.01>=e?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=e},_endedCallback:function(){this._loop?this.play():this.next()}}),ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,init:function(e,t){this.path=e,this.multiChannel=!1!==t,this.load()},load:function(e){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,this.multiChannel,e):ig.addResource(this):e&&e(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}}),ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},CAF:{ext:"caf",mime:"audio/x-caf"}},ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3],ig.Sound.channels=4,ig.Sound.enabled=!0}),ig.baked=!0,ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(e,t){this.gameClass=e,this.resources=t,this._loadCallbackBound=this._loadCallback.bind(this);for(var i=0;i<this.resources.length;i++)this._unloaded.push(this.resources[i].path)},load:function(){if(ig.system.clear("#000"),this.resources.length){for(var e=0;e<this.resources.length;e++)this.loadResource(this.resources[e]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(e){e.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId))},draw:function(){},_loadCallback:function(e,t){if(!t)throw"Failed to load resource: "+e;this._unloaded.erase(e),this.status=1-this._unloaded.length/this.resources.length,0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})}),ig.baked=!0,ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(e){this.last=this.base=ig.Timer.time,this.target=e||0},set:function(e){this.target=e||0,this.base=ig.Timer.time,this.pausedAt=0},reset:function(){this.base=ig.Timer.time,this.pausedAt=0},tick:function(){var e=ig.Timer.time-this.last;return this.last=ig.Timer.time,this.pausedAt?0:e},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||(this.pausedAt=ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}}),ig.Timer._last=0,ig.Timer.time=Number.MIN_VALUE,ig.Timer.timeScale=1,ig.Timer.maxStep=.05,ig.Timer.step=function(){var e=Date.now();ig.Timer.time+=Math.min((e-ig.Timer._last)/1e3,ig.Timer.maxStep)*ig.Timer.timeScale,ig.Timer._last=e}}),ig.baked=!0,ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(e,t,i,s,n){this.fps=t,this.clock=new ig.Timer,this.canvas=ig.$(e),this.resize(i,s,n),this.context=this.canvas.getContext("2d"),this.getDrawPos=ig.System.drawMode,1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP),ig.System.scaleMode(this.canvas,this.context)},resize:function(e,t,i){this.width=e,this.height=t,this.scale=i||this.scale,this.realWidth=this.width*this.scale,this.realHeight=this.height*this.scale,this.canvas.width=this.realWidth,this.canvas.height=this.realHeight},setGame:function(e){this.running?this.newGameClass=e:this.setGameNow(e)},setGameNow:function(e){ig.game=new e,ig.system.setDelegate(ig.game)},setDelegate:function(e){if("function"!=typeof e.run)throw"System.setDelegate: No run() function in object";this.delegate=e,this.startRunLoop()},stopRunLoop:function(){ig.clearAnimation(this.animationId),this.running=!1},startRunLoop:function(){this.stopRunLoop(),this.animationId=ig.setAnimation(this.run.bind(this),this.canvas),this.running=!0},clear:function(e){this.context.fillStyle=e,this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step(),this.tick=this.clock.tick(),this.delegate.run(),ig.input.clearPressed(),this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null}),ig.System.DRAW={AUTHENTIC:function(e){return Math.round(e)*this.scale},SMOOTH:function(e){return Math.round(e*this.scale)},SUBPIXEL:function(e){return e*this.scale}},ig.System.drawMode=ig.System.DRAW.SMOOTH,ig.System.SCALE={CRISP:function(e,t){ig.setVendorAttribute(t,"imageSmoothingEnabled",!1),e.style.imageRendering="-moz-crisp-edges",e.style.imageRendering="-o-crisp-edges",e.style.imageRendering="-webkit-optimize-contrast",e.style.imageRendering="crisp-edges",e.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(e,t){ig.setVendorAttribute(t,"imageSmoothingEnabled",!0),e.style.imageRendering="",e.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH}),ig.baked=!0,ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190},ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){if(!this.isUsingMouse){this.isUsingMouse=!0;var e=this.mousewheel.bind(this);ig.system.canvas.addEventListener("mousewheel",e,!1),ig.system.canvas.addEventListener("DOMMouseScroll",e,!1),ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1),ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1),ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none")}},initKeyboard:function(){this.isUsingKeyboard||(this.isUsingKeyboard=!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||window.addEventListener("devicemotion",this.devicemotion.bind(this),!1)},mousewheel:function(e){var t=this.bindings[0<(e.wheelDelta?e.wheelDelta:-1*e.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];t&&(this.actions[t]=!0,this.presses[t]=!0,this.delayedKeyup[t]=!0,e.stopPropagation(),e.preventDefault())},mousemove:function(e){var t=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;ig.ua.mobile&&(t=ig.system.realWidth);t=ig.system.scale*(t/ig.system.realWidth);var i={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(i=ig.system.canvas.getBoundingClientRect()),e=e.touches?e.touches[0]:e,this.mouse.x=(e.clientX-i.left)/t,this.mouse.y=(e.clientY-i.top)/t},contextmenu:function(e){this.bindings[ig.KEY.MOUSE2]&&(e.stopPropagation(),e.preventDefault())},keydown:function(e){var t=e.target.tagName;"INPUT"!=t&&"TEXTAREA"!=t&&(t="keydown"==e.type?e.keyCode:2==e.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,("touchstart"==e.type||"mousedown"==e.type)&&this.mousemove(e),(t=this.bindings[t])&&(this.actions[t]=!0,this.locks[t]||(this.presses[t]=!0,this.locks[t]=!0),e.stopPropagation(),e.preventDefault()))},keyup:function(e){var t=e.target.tagName;"INPUT"!=t&&"TEXTAREA"!=t&&(t=this.bindings["keyup"==e.type?e.keyCode:2==e.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])&&(this.delayedKeyup[t]=!0,e.stopPropagation(),e.preventDefault())},devicemotion:function(e){this.accel=e.accelerationIncludingGravity},bind:function(e,t){0>e?this.initMouse():0<e&&this.initKeyboard(),this.bindings[e]=t},bindTouch:function(e,t){var i=ig.$(e),s=this;i.addEventListener("touchstart",function(e){s.touchStart(e,t)},!1),i.addEventListener("touchend",function(e){s.touchEnd(e,t)},!1),i.addEventListener("MSPointerDown",function(e){s.touchStart(e,t)},!1),i.addEventListener("MSPointerUp",function(e){s.touchEnd(e,t)},!1)},unbind:function(e){this.delayedKeyup[this.bindings[e]]=!0,this.bindings[e]=null},unbindAll:function(){this.bindings={},this.actions={},this.presses={},this.locks={},this.delayedKeyup={}},state:function(e){return this.actions[e]},pressed:function(e){return this.presses[e]},released:function(e){return!!this.delayedKeyup[e]},clearPressed:function(){for(var e in this.delayedKeyup)this.actions[e]=!1,this.locks[e]=!1;this.delayedKeyup={},this.presses={}},touchStart:function(e,t){return this.actions[t]=!0,this.presses[t]=!0,e.stopPropagation(),e.preventDefault(),!1},touchEnd:function(e,t){return this.delayedKeyup[t]=!0,e.stopPropagation(),e.preventDefault(),!1}})}),ig.baked=!0,ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(e,t,i,s,n,o,a){ig.system=new ig.System(e,i,s,n,o||1),ig.input=new ig.Input,ig.soundManager=new ig.SoundManager,ig.music=new ig.Music,ig.ready=!0,new(a||ig.Loader)(t,ig.resources).load()}}),ig.baked=!0,ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(e,t,i){this.width=t,this.height=i,this.image=new ig.Image(e)}}),ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,init:function(e,t,i,s){this.sheet=e,this.pivot={x:e.width/2,y:e.height/2},this.timer=new ig.Timer,this.frameTime=t,this.sequence=i,this.stop=!!s,this.tile=this.sequence[0]},rewind:function(){return this.timer.set(),this.frame=this.loopCount=0,this.tile=this.sequence[0],this},gotoFrame:function(e){this.timer.set(this.frameTime*-e-1e-4),this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var e=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(e/this.sequence.length),this.frame=this.stop&&0<this.loopCount?this.sequence.length-1:e%this.sequence.length,this.tile=this.sequence[this.frame]},draw:function(e,t){var i=Math.max(this.sheet.width,this.sheet.height);e>ig.system.width||t>ig.system.height||0>e+i||0>t+i||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(e,t,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(e+this.pivot.x),ig.system.getDrawPos(t+this.pivot.y)),ig.system.context.rotate(this.angle),this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})}),ig.baked=!0,ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:44..toRad(),max:136..toRad()},init:function(e,t,i){this.id=++ig.Entity._lastId,this.pos.x=this.last.x=e,this.pos.y=this.last.y=t,ig.merge(this,i)},reset:function(e,t,i){var s=this.constructor.prototype;this.pos.x=e,this.pos.y=t,this.last.x=e,this.last.y=t,this.vel.x=s.vel.x,this.vel.y=s.vel.y,this.accel.x=s.accel.x,this.accel.y=s.accel.y,this.health=s.health,this._killed=s._killed,this.standing=s.standing,this.type=s.type,this.checkAgainst=s.checkAgainst,this.collides=s.collides,ig.merge(this,i)},addAnim:function(e,t,i,s){if(!this.animSheet)throw"No animSheet to add the animation "+e+" to.";return t=new ig.Animation(this.animSheet,t,i,s),this.anims[e]=t,this.currentAnim||(this.currentAnim=t),t},update:function(){this.last.x=this.pos.x,this.last.y=this.pos.y,this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor,this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x),this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var e=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(e),this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(e,t,i,s){return t?(e+t*ig.system.tick).limit(-s,s):i?0<e-(t=i*ig.system.tick)?e-t:0>e+t?e+t:0:e.limit(-s,s)},handleMovementTrace:function(e){if(this.standing=!1,e.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0)),e.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*-this.bounciness:0),e.collision.slope){var t=e.collision.slope;if(0<this.bounciness){var i=this.vel.x*t.nx+this.vel.y*t.ny;this.vel.x=(this.vel.x-2*t.nx*i)*this.bounciness,this.vel.y=(this.vel.y-2*t.ny*i)*this.bounciness}else i=(this.vel.x*t.x+this.vel.y*t.y)/(t.x*t.x+t.y*t.y),this.vel.x=t.x*i,this.vel.y=t.y*i,t=Math.atan2(t.x,t.y),t>this.slopeStanding.min&&t<this.slopeStanding.max&&(this.standing=!0)}this.pos=e.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(e){this.health-=e,0>=this.health&&this.kill()},touches:function(e){return!(this.pos.x>=e.pos.x+e.size.x||this.pos.x+this.size.x<=e.pos.x||this.pos.y>=e.pos.y+e.size.y||this.pos.y+this.size.y<=e.pos.y)},distanceTo:function(e){var t=this.pos.x+this.size.x/2-(e.pos.x+e.size.x/2);return e=this.pos.y+this.size.y/2-(e.pos.y+e.size.y/2),Math.sqrt(t*t+e*e)},angleTo:function(e){return Math.atan2(e.pos.y+e.size.y/2-(this.pos.y+this.size.y/2),e.pos.x+e.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}}),ig.Entity._lastId=0,ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8},ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3},ig.Entity.checkPair=function(e,t){e.checkAgainst&t.type&&e.check(t),t.checkAgainst&e.type&&t.check(e),e.collides&&t.collides&&e.collides+t.collides>ig.Entity.COLLIDES.ACTIVE&&ig.Entity.solveCollision(e,t)},ig.Entity.solveCollision=function(e,t){var i=null;e.collides==ig.Entity.COLLIDES.LITE||t.collides==ig.Entity.COLLIDES.FIXED?i=e:t.collides!=ig.Entity.COLLIDES.LITE&&e.collides!=ig.Entity.COLLIDES.FIXED||(i=t),e.last.x+e.size.x>t.last.x&&e.last.x<t.last.x+t.size.x?(e.last.y<t.last.y?ig.Entity.seperateOnYAxis(e,t,i):ig.Entity.seperateOnYAxis(t,e,i),e.collideWith(t,"y"),t.collideWith(e,"y")):e.last.y+e.size.y>t.last.y&&e.last.y<t.last.y+t.size.y&&(e.last.x<t.last.x?ig.Entity.seperateOnXAxis(e,t,i):ig.Entity.seperateOnXAxis(t,e,i),e.collideWith(t,"x"),t.collideWith(e,"x"))},ig.Entity.seperateOnXAxis=function(e,t,i){var s=e.pos.x+e.size.x-t.pos.x;i?(i.vel.x=-i.vel.x*i.bounciness+(e===i?t:e).vel.x,t=ig.game.collisionMap.trace(i.pos.x,i.pos.y,i==e?-s:s,0,i.size.x,i.size.y),i.pos.x=t.pos.x):(i=(e.vel.x-t.vel.x)/2,e.vel.x=-i,t.vel.x=i,i=ig.game.collisionMap.trace(e.pos.x,e.pos.y,-s/2,0,e.size.x,e.size.y),e.pos.x=Math.floor(i.pos.x),e=ig.game.collisionMap.trace(t.pos.x,t.pos.y,s/2,0,t.size.x,t.size.y),t.pos.x=Math.ceil(e.pos.x))},ig.Entity.seperateOnYAxis=function(e,t,i){var s=e.pos.y+e.size.y-t.pos.y;if(i){t=e===i?t:e,i.vel.y=-i.vel.y*i.bounciness+t.vel.y;var n=0;i==e&&Math.abs(i.vel.y-t.vel.y)<i.minBounceVelocity&&(i.standing=!0,n=t.vel.x*ig.system.tick),e=ig.game.collisionMap.trace(i.pos.x,i.pos.y,n,i==e?-s:s,i.size.x,i.size.y),i.pos.y=e.pos.y,i.pos.x=e.pos.x}else ig.game.gravity&&(t.standing||0<e.vel.y)?(i=ig.game.collisionMap.trace(e.pos.x,e.pos.y,0,-(e.pos.y+e.size.y-t.pos.y),e.size.x,e.size.y),e.pos.y=i.pos.y,0<e.bounciness&&e.vel.y>e.minBounceVelocity?e.vel.y*=-e.bounciness:(e.standing=!0,e.vel.y=0)):(i=(e.vel.y-t.vel.y)/2,e.vel.y=-i,t.vel.y=i,n=t.vel.x*ig.system.tick,i=ig.game.collisionMap.trace(e.pos.x,e.pos.y,n,-s/2,e.size.x,e.size.y),e.pos.y=i.pos.y,e=ig.game.collisionMap.trace(t.pos.x,t.pos.y,0,s/2,t.size.x,t.size.y),t.pos.y=e.pos.y)}}),ig.baked=!0,ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(e,t){this.tilesize=e,this.data=t,this.height=t.length,this.width=t[0].length,this.pxWidth=this.width*this.tilesize,this.pxHeight=this.height*this.tilesize},getTile:function(e,t){var i=Math.floor(e/this.tilesize),s=Math.floor(t/this.tilesize);return 0<=i&&i<this.width&&0<=s&&s<this.height?this.data[s][i]:0},setTile:function(e,t,i){e=Math.floor(e/this.tilesize),t=Math.floor(t/this.tilesize),0<=e&&e<this.width&&0<=t&&t<this.height&&(this.data[t][e]=i)}})}),ig.baked=!0,ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(e,t,i){this.parent(e,t),this.tiledef=i||ig.CollisionMap.defaultTileDef;for(var s in this.tiledef)s|0>this.lastSlope&&(this.lastSlope=0|s)},trace:function(e,t,i,s,n,o){var a={collision:{x:!1,y:!1,slope:!1},pos:{x:e,y:t},tile:{x:0,y:0}},r=Math.ceil(Math.max(Math.abs(i),Math.abs(s))/this.tilesize);if(1<r)for(var h=i/r,l=s/r,u=0;u<r&&(h||l)&&(this._traceStep(a,e,t,h,l,n,o,i,s,u),e=a.pos.x,t=a.pos.y,a.collision.x&&(i=h=0),a.collision.y&&(s=l=0),!a.collision.slope);u++);else this._traceStep(a,e,t,i,s,n,o,i,s,0);return a},_traceStep:function(e,t,i,s,n,o,a,r,h,l){e.pos.x+=s,e.pos.y+=n;var u=0;if(s){var d=0<s?o:0,c=0>s?this.tilesize:0,g=(u=Math.max(Math.floor(i/this.tilesize),0),Math.min(Math.ceil((i+a)/this.tilesize),this.height));s=Math.floor((e.pos.x+d)/this.tilesize);var p=Math.floor((t+d)/this.tilesize);if((0<l||s==p||0>p||p>=this.width)&&(p=-1),0<=s&&s<this.width)for(var m=u;m<g&&!(-1!=p&&(u=this.data[m][p],1<u&&u<=this.lastSlope&&this._checkTileDef(e,u,t,i,r,h,o,a,p,m)));m++)if(u=this.data[m][s],1==u||u>this.lastSlope||1<u&&this._checkTileDef(e,u,t,i,r,h,o,a,s,m)){if(1<u&&u<=this.lastSlope&&e.collision.slope)break;e.collision.x=!0,e.tile.x=u,t=e.pos.x=s*this.tilesize-d+c,r=0;break}}if(n&&(d=0<n?a:0,n=0>n?this.tilesize:0,u=Math.max(Math.floor(e.pos.x/this.tilesize),0),c=Math.min(Math.ceil((e.pos.x+o)/this.tilesize),this.width),m=Math.floor((e.pos.y+d)/this.tilesize),g=Math.floor((i+d)/this.tilesize),(0<l||m==g||0>g||g>=this.height)&&(g=-1),0<=m&&m<this.height))for(s=u;s<c&&!(-1!=g&&(u=this.data[g][s],1<u&&u<=this.lastSlope&&this._checkTileDef(e,u,t,i,r,h,o,a,s,g)));s++)if(u=this.data[m][s],1==u||u>this.lastSlope||1<u&&this._checkTileDef(e,u,t,i,r,h,o,a,s,m)){if(1<u&&u<=this.lastSlope&&e.collision.slope)break;e.collision.y=!0,e.tile.y=u,e.pos.y=m*this.tilesize-d+n;break}},_checkTileDef:function(e,t,i,s,n,o,a,r,h,l){if(!(u=this.tiledef[t]))return!1;t=(u[2]-u[0])*this.tilesize;var u,d,c=(u[3]-u[1])*this.tilesize,g=u[4];return a=i+n+(0>c?a:0)-(h+u[0])*this.tilesize,0<t*(r=s+o+(0<t?r:0)-(l+u[1])*this.tilesize)-c*a&&(0>n*-c+o*t?g:(u=(l=c/(h=Math.sqrt(t*t+c*c)))*(d=a*l+r*(h=-t/h)))*u+(d=h*d)*d>=n*n+o*o?g||.5>t*(r-o)-c*(a-n):(e.pos.x=i+n-u,e.pos.y=s+o-d,e.collision.slope={x:t,y:c,nx:l,ny:h},!0))}});var e=1/3,t=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,t,!0],6:[0,t,1,e,!0],7:[0,e,1,0,!0],3:[0,1,1,.5,!0],4:[0,.5,1,0,!0],2:[0,1,1,0,!0],10:[.5,1,1,0,!0],21:[0,1,.5,0,!0],32:[t,1,1,0,!0],43:[e,1,t,0,!0],54:[0,1,e,0,!0],27:[0,0,1,e,!0],28:[0,e,1,t,!0],29:[0,t,1,1,!0],25:[0,0,1,.5,!0],26:[0,.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,.5,1,!0],22:[.5,0,1,1,!0],33:[0,0,e,1,!0],44:[e,0,t,1,!0],55:[t,0,1,1,!0],16:[1,e,0,0,!0],17:[1,t,0,e,!0],18:[1,1,0,t,!0],14:[1,.5,0,0,!0],15:[1,1,0,.5,!0],13:[1,1,0,0,!0],8:[.5,1,0,0,!0],19:[1,1,.5,0,!0],30:[e,1,0,0,!0],41:[t,1,e,0,!0],52:[1,1,t,0,!0],38:[1,t,0,1,!0],39:[1,e,0,t,!0],40:[1,0,0,e,!0],36:[1,.5,0,1,!0],37:[1,0,0,.5,!0],35:[1,0,0,1,!0],9:[1,0,.5,1,!0],20:[.5,0,0,1,!0],31:[1,0,t,1,!0],42:[t,0,e,1,!0],53:[e,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]},ig.CollisionMap.staticNoCollision={trace:function(e,t,i,s){return{collision:{x:!1,y:!1,slope:!1},pos:{x:e+i,y:t+s},tile:{x:0,y:0}}}}}),ig.baked=!0,ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(e,t,i){this.parent(e,t),this.setTileset(i)},setTileset:function(e){this.tilesetName=e instanceof ig.Image?e.path:e,this.tiles=new ig.Image(this.tilesetName),this.preRenderedChunks=null},setScreenPos:function(e,t){this.scroll.x=e/this.distance,this.scroll.y=t/this.distance},preRenderMapToChunks:function(){var e=this.width*this.tilesize*ig.system.scale,t=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(e,t),this.chunkSize);var i=Math.ceil(e/this.chunkSize),s=Math.ceil(t/this.chunkSize);this.preRenderedChunks=[];for(var n=0;n<s;n++){this.preRenderedChunks[n]=[];for(var o=0;o<i;o++)this.preRenderedChunks[n][o]=this.preRenderChunk(o,n,o==i-1?e-o*this.chunkSize:this.chunkSize,n==s-1?t-n*this.chunkSize:this.chunkSize)}},preRenderChunk:function(e,t,i,s){var n=i/this.tilesize/ig.system.scale+1,o=s/this.tilesize/ig.system.scale+1,a=e*this.chunkSize/ig.system.scale%this.tilesize,r=t*this.chunkSize/ig.system.scale%this.tilesize;e=Math.floor(e*this.chunkSize/this.tilesize/ig.system.scale),t=Math.floor(t*this.chunkSize/this.tilesize/ig.system.scale);var h=ig.$new("canvas");for(h.width=i,h.height=s,h.retinaResolutionEnabled=!1,s=h.getContext("2d"),ig.System.scaleMode(h,s),i=ig.system.context,ig.system.context=s,s=0;s<n;s++)for(var l=0;l<o;l++)if(s+e<this.width&&l+t<this.height){var u=this.data[l+t][s+e];u&&this.tiles.drawTile(s*this.tilesize-a,l*this.tilesize-r,u-1,this.tilesize)}return ig.system.context=i,h},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var e=ig.system.getDrawPos(this.scroll.x),t=ig.system.getDrawPos(this.scroll.y);if(this.repeat){var i=this.width*this.tilesize*ig.system.scale;e=(e%i+i)%i,i=this.height*this.tilesize*ig.system.scale,t=(t%i+i)%i}i=Math.max(Math.floor(e/this.chunkSize),0);var s=Math.max(Math.floor(t/this.chunkSize),0),n=Math.ceil((e+ig.system.realWidth)/this.chunkSize),o=Math.ceil((t+ig.system.realHeight)/this.chunkSize),a=this.preRenderedChunks[0].length,r=this.preRenderedChunks.length;this.repeat||(n=Math.min(n,a),o=Math.min(o,r));for(var h=0;s<o;s++){for(var l=0,u=i;u<n;u++){var d=this.preRenderedChunks[s%r][u%a],c=-e+u*this.chunkSize-l,g=-t+s*this.chunkSize-h;ig.system.context.drawImage(d,c,g),ig.Image.drawCount++,this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(c,g,this.chunkSize,this.chunkSize)),this.repeat&&d.width<this.chunkSize&&c+d.width<ig.system.realWidth&&(l+=this.chunkSize-d.width,n++)}this.repeat&&d.height<this.chunkSize&&g+d.height<ig.system.realHeight&&(h+=this.chunkSize-d.height,o++)}},drawTiled:function(){var e=0,t=null,i=(this.scroll.x/this.tilesize).toInt(),s=(this.scroll.y/this.tilesize).toInt(),n=this.scroll.x%this.tilesize,o=this.scroll.y%this.tilesize,a=-n-this.tilesize,r=(n=ig.system.width+this.tilesize-n,ig.system.height+this.tilesize-o),h=-1;for(o=-o-this.tilesize;o<r;h++,o+=this.tilesize){var l=h+s;if(l>=this.height||0>l){if(!this.repeat)continue;l=(l%this.height+this.height)%this.height}for(var u=-1,d=a;d<n;u++,d+=this.tilesize){if((e=u+i)>=this.width||0>e){if(!this.repeat)continue;e=(e%this.width+this.width)%this.width}(e=this.data[l][e])&&((t=this.anims[e-1])?t.draw(d,o):this.tiles.drawTile(d,o,e-1,this.tilesize))}}}})}),ig.baked=!0,ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){return this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX,ig.game=this,null},loadLevel:function(e){this.screen={x:0,y:0},this.entities=[],this.namedEntities={};for(var t=0;t<e.entities.length;t++){var i=e.entities[t];this.spawnEntity(i.type,i.x,i.y,i.settings)}for(this.sortEntities(),this.collisionMap=ig.CollisionMap.staticNoCollision,this.backgroundMaps=[],t=0;t<e.layer.length;t++)if(i=e.layer[t],"collision"==i.name)this.collisionMap=new ig.CollisionMap(i.tilesize,i.data);else{var s=new ig.BackgroundMap(i.tilesize,i.data,i.tilesetName);s.anims=this.backgroundAnims[i.tilesetName]||{},s.repeat=i.repeat,s.distance=i.distance,s.foreground=!!i.foreground,s.preRender=!!i.preRender,s.name=i.name,this.backgroundMaps.push(s)}for(t=0;t<this.entities.length;t++)this.entities[t].ready()},loadLevelDeferred:function(e){this._levelToLoad=e},getMapByName:function(e){if("collision"==e)return this.collisionMap;for(var t=0;t<this.backgroundMaps.length;t++)if(this.backgroundMaps[t].name==e)return this.backgroundMaps[t];return null},getEntityByName:function(e){return this.namedEntities[e]},getEntitiesByType:function(e){e="string"==typeof e?ig.global[e]:e;for(var t=[],i=0;i<this.entities.length;i++){var s=this.entities[i];s instanceof e&&!s._killed&&t.push(s)}return t},spawnEntity:function(e,t,i,s){var n="string"==typeof e?ig.global[e]:e;if(!n)throw"Can't spawn entity of type "+e;return e=new n(t,i,s||{}),this.entities.push(e),e.name&&(this.namedEntities[e.name]=e),e},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(e){e.name&&delete this.namedEntities[e.name],e._killed=!0,e.type=ig.Entity.TYPE.NONE,e.checkAgainst=ig.Entity.TYPE.NONE,e.collides=ig.Entity.COLLIDES.NEVER,this._deferredKill.push(e)},run:function(){this.update(),this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null),this.updateEntities(),this.checkEntities();for(var e=0;e<this._deferredKill.length;e++)this._deferredKill[e].erase(),this.entities.erase(this._deferredKill[e]);this._deferredKill=[],(this._doSortEntities||this.autoSort)&&(this.sortEntities(),this._doSortEntities=!1);for(var t in this.backgroundAnims){var i;e=this.backgroundAnims[t];for(i in e)e[i].update()}},updateEntities:function(){for(var e=0;e<this.entities.length;e++){var t=this.entities[e];t._killed||t.update()}},draw:function(){var e;for(this.clearColor&&ig.system.clear(this.clearColor),this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale,this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale,e=0;e<this.backgroundMaps.length;e++){var t=this.backgroundMaps[e];if(t.foreground)break;t.setScreenPos(this.screen.x,this.screen.y),t.draw()}for(this.drawEntities();e<this.backgroundMaps.length;e++)t=this.backgroundMaps[e],t.setScreenPos(this.screen.x,this.screen.y),t.draw()},drawEntities:function(){for(var e=0;e<this.entities.length;e++)this.entities[e].draw()},checkEntities:function(){for(var e={},t=0;t<this.entities.length;t++){var i=this.entities[t];if(i.type!=ig.Entity.TYPE.NONE||i.checkAgainst!=ig.Entity.TYPE.NONE||i.collides!=ig.Entity.COLLIDES.NEVER)for(var s={},n=Math.floor(i.pos.y/this.cellSize),o=Math.floor((i.pos.x+i.size.x)/this.cellSize)+1,a=Math.floor((i.pos.y+i.size.y)/this.cellSize)+1,r=Math.floor(i.pos.x/this.cellSize);r<o;r++)for(var h=n;h<a;h++)if(e[r])if(e[r][h]){for(var l=e[r][h],u=0;u<l.length;u++)i.touches(l[u])&&!s[l[u].id]&&(s[l[u].id]=!0,ig.Entity.checkPair(i,l[u]));l.push(i)}else e[r][h]=[i];else e[r]={},e[r][h]=[i]}}}),ig.Game.SORT={Z_INDEX:function(e,t){return e.zIndex-t.zIndex},POS_X:function(e,t){return e.pos.x+e.size.x-(t.pos.x+t.size.x)},POS_Y:function(e,t){return e.pos.y+e.size.y-(t.pos.y+t.size.y)}}}),ig.baked=!0,ig.module("impact.debug.menu").requires("dom.ready","impact.system").defines(function(){ig.System.inject({run:function(){ig.debug.beforeRun(),this.parent(),ig.debug.afterRun()},setGameNow:function(e){this.parent(e),ig.debug.ready()}}),ig.Debug=ig.Class.extend({options:{},panels:{},numbers:{},container:null,panelMenu:null,activePanel:null,debugTime:0,debugTickAvg:.016,debugRealTime:Date.now(),init:function(){var e=ig.$new("link");e.rel="stylesheet",e.type="text/css",e.href=ig.prefix+"lib/impact/debug/debug.css",ig.$("body")[0].appendChild(e),this.container=ig.$new("div"),this.container.className="ig_debug",ig.$("body")[0].appendChild(this.container),this.panelMenu=ig.$new("div"),this.panelMenu.innerHTML='<div class="ig_debug_head">Impact.Debug:</div>',this.panelMenu.className="ig_debug_panel_menu",this.container.appendChild(this.panelMenu),this.numberContainer=ig.$new("div"),this.numberContainer.className="ig_debug_stats",this.panelMenu.appendChild(this.numberContainer),window.console&&window.console.log&&window.console.assert&&(ig.log=console.log.bind?console.log.bind(console):console.log,ig.assert=console.assert.bind?console.assert.bind(console):console.assert),ig.show=this.showNumber.bind(this)},addNumber:function(e){var t=ig.$new("span");this.numberContainer.appendChild(t),this.numberContainer.appendChild(document.createTextNode(e)),this.numbers[e]=t},showNumber:function(e,t,i){this.numbers[e]||this.addNumber(e,i),this.numbers[e].textContent=t},addPanel:function(e){var t=new e.type(e.name,e.label);if(e.options)for(var i=0;i<e.options.length;i++){var s=e.options[i];t.addOption(new ig.DebugOption(s.name,s.object,s.property))}for(this.panels[t.name]=t,t.container.style.display="none",this.container.appendChild(t.container),(e=ig.$new("div")).className="ig_debug_menu_item",e.textContent=t.label,e.addEventListener("click",function(){this.togglePanel(t)}.bind(this),!1),t.menuItem=e,s=!1,i=1;i<this.panelMenu.childNodes.length;i++){var n=this.panelMenu.childNodes[i];if(n.textContent>t.label){this.panelMenu.insertBefore(e,n),s=!0;break}}s||this.panelMenu.appendChild(e)},showPanel:function(e){this.togglePanel(this.panels[e])},togglePanel:function(e){e!=this.activePanel&&this.activePanel&&(this.activePanel.toggle(!1),this.activePanel.menuItem.className="ig_debug_menu_item",this.activePanel=null);var t="block"!=e.container.style.display;e.toggle(t),e.menuItem.className="ig_debug_menu_item"+(t?" active":""),t&&(this.activePanel=e)},ready:function(){for(var e in this.panels)this.panels[e].ready()},beforeRun:function(){var e=Date.now();this.debugTickAvg=.8*this.debugTickAvg+.2*(e-this.debugRealTime),this.debugRealTime=e,this.activePanel&&this.activePanel.beforeRun()},afterRun:function(){var e=Date.now()-this.debugRealTime;this.debugTime=.8*this.debugTime+.2*e,this.activePanel&&this.activePanel.afterRun(),this.showNumber("ms",this.debugTime.toFixed(2)),this.showNumber("fps",Math.round(1e3/this.debugTickAvg)),this.showNumber("draws",ig.Image.drawCount),ig.game&&ig.game.entities&&this.showNumber("entities",ig.game.entities.length),ig.Image.drawCount=0}}),ig.DebugPanel=ig.Class.extend({active:!1,container:null,options:[],panels:[],label:"",name:"",init:function(e,t){this.name=e,this.label=t,this.container=ig.$new("div"),this.container.className="ig_debug_panel "+this.name},toggle:function(e){this.active=e,this.container.style.display=e?"block":"none"},addPanel:function(e){this.panels.push(e),this.container.appendChild(e.container)},addOption:function(e){this.options.push(e),this.container.appendChild(e.container)},ready:function(){},beforeRun:function(){},afterRun:function(){}}),ig.DebugOption=ig.Class.extend({name:"",labelName:"",className:"ig_debug_option",label:null,mark:null,container:null,active:!1,colors:{enabled:"#fff",disabled:"#444"},init:function(e,t,i){this.name=e,this.object=t,this.property=i,this.active=this.object[this.property],this.container=ig.$new("div"),this.container.className="ig_debug_option",this.label=ig.$new("span"),this.label.className="ig_debug_label",this.label.textContent=this.name,this.mark=ig.$new("span"),this.mark.className="ig_debug_label_mark",this.container.appendChild(this.mark),this.container.appendChild(this.label),this.container.addEventListener("click",this.click.bind(this),!1),this.setLabel()},setLabel:function(){this.mark.style.backgroundColor=this.active?this.colors.enabled:this.colors.disabled},click:function(e){return this.active=!this.active,this.object[this.property]=this.active,this.setLabel(),e.stopPropagation(),e.preventDefault(),!1}}),ig.debug=new ig.Debug}),ig.baked=!0,ig.module("impact.debug.entities-panel").requires("impact.debug.menu","impact.entity").defines(function(){ig.Entity.inject({colors:{names:"#fff",velocities:"#0f0",boxes:"#f00"},draw:function(){if(this.parent(),ig.Entity._debugShowBoxes&&(ig.system.context.strokeStyle=this.colors.boxes,ig.system.context.lineWidth=1,ig.system.context.strokeRect(ig.system.getDrawPos(this.pos.x.round()-ig.game.screen.x)-.5,ig.system.getDrawPos(this.pos.y.round()-ig.game.screen.y)-.5,this.size.x*ig.system.scale,this.size.y*ig.system.scale)),ig.Entity._debugShowVelocities){var e=this.pos.x+this.size.x/2,t=this.pos.y+this.size.y/2;this._debugDrawLine(this.colors.velocities,e,t,e+this.vel.x,t+this.vel.y)}if(ig.Entity._debugShowNames&&(this.name&&(ig.system.context.fillStyle=this.colors.names,ig.system.context.fillText(this.name,ig.system.getDrawPos(this.pos.x-ig.game.screen.x),ig.system.getDrawPos(this.pos.y-ig.game.screen.y))),"object"==typeof this.target))for(var i in this.target)(e=ig.game.getEntityByName(this.target[i]))&&this._debugDrawLine(this.colors.names,this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,e.pos.x+e.size.x/2,e.pos.y+e.size.y/2)},_debugDrawLine:function(e,t,i,s,n){ig.system.context.strokeStyle=e,ig.system.context.lineWidth=1,ig.system.context.beginPath(),ig.system.context.moveTo(ig.system.getDrawPos(t-ig.game.screen.x),ig.system.getDrawPos(i-ig.game.screen.y)),ig.system.context.lineTo(ig.system.getDrawPos(s-ig.game.screen.x),ig.system.getDrawPos(n-ig.game.screen.y)),ig.system.context.stroke(),ig.system.context.closePath()}}),ig.Entity._debugEnableChecks=!0,ig.Entity._debugShowBoxes=!1,ig.Entity._debugShowVelocities=!1,ig.Entity._debugShowNames=!1,ig.Entity.oldCheckPair=ig.Entity.checkPair,ig.Entity.checkPair=function(e,t){ig.Entity._debugEnableChecks&&ig.Entity.oldCheckPair(e,t)},ig.debug.addPanel({type:ig.DebugPanel,name:"entities",label:"Entities",options:[{name:"Checks & Collisions",object:ig.Entity,property:"_debugEnableChecks"},{name:"Show Collision Boxes",object:ig.Entity,property:"_debugShowBoxes"},{name:"Show Velocities",object:ig.Entity,property:"_debugShowVelocities"},{name:"Show Names & Targets",object:ig.Entity,property:"_debugShowNames"}]})}),ig.baked=!0,ig.module("impact.debug.maps-panel").requires("impact.debug.menu","impact.game","impact.background-map").defines(function(){ig.Game.inject({loadLevel:function(e){this.parent(e),ig.debug.panels.maps.load(this)}}),ig.DebugMapsPanel=ig.DebugPanel.extend({maps:[],mapScreens:[],init:function(e,t){this.parent(e,t),this.load()},load:function(e){if(this.options=[],this.panels=[],e&&e.backgroundMaps.length)for(this.maps=e.backgroundMaps,this.mapScreens=[],this.container.innerHTML="",e=0;e<this.maps.length;e++){var t=this.maps[e],i=new ig.DebugPanel(e,"Layer "+e),s=new ig.$new("strong");s.textContent=e+": "+t.tiles.path,i.container.appendChild(s),i.addOption(new ig.DebugOption("Enabled",t,"enabled")),i.addOption(new ig.DebugOption("Pre Rendered",t,"preRender")),i.addOption(new ig.DebugOption("Show Chunks",t,"debugChunks")),this.generateMiniMap(i,t,e),this.addPanel(i)}else this.container.innerHTML="<em>No Maps Loaded</em>"},generateMiniMap:function(e,t,i){var s=ig.system.scale,n=ig.$new("canvas"),o=n.getContext("2d"),a=t.tiles.width*s,r=t.tiles.height*s,h=a/t.tilesize,l=r/t.tilesize;for(n.width=h,n.height=l,o.drawImage(t.tiles.data,0,0,a,r,0,0,h,l),(o=ig.$new("canvas")).width=t.width*s,o.height=t.height*s,l=o.getContext("2d"),ig.game.clearColor&&(l.fillStyle=ig.game.clearColor,l.fillRect(0,0,a,r)),r=a=0;r<t.width;r++)for(var u=0;u<t.height;u++)(a=t.data[u][r])&&l.drawImage(n,Math.floor((a-1)*s%h),Math.floor((a-1)*s/h)*s,s,s,r*s,u*s,s,s);(n=ig.$new("div")).className="ig_debug_map_container",n.style.width=t.width*s+"px",n.style.height=t.height*s+"px",(h=ig.$new("div")).className="ig_debug_map_screen",h.style.width=ig.system.width/t.tilesize*s-2+"px",h.style.height=ig.system.height/t.tilesize*s-2+"px",this.mapScreens[i]=h,n.appendChild(o),n.appendChild(h),e.container.appendChild(n)},afterRun:function(){for(var e=ig.system.scale,t=0;t<this.maps.length;t++){var i=this.maps[t],s=this.mapScreens[t];if(i&&s){var n=i.scroll.x/i.tilesize,o=i.scroll.y/i.tilesize;i.repeat&&(n%=i.width,o%=i.height),s.style.left=n*e+"px",s.style.top=o*e+"px"}}}}),ig.debug.addPanel({type:ig.DebugMapsPanel,name:"maps",label:"Background Maps"})}),ig.baked=!0,ig.module("impact.debug.graph-panel").requires("impact.debug.menu","impact.system","impact.game","impact.image").defines(function(){ig.Game.inject({draw:function(){ig.graph.beginClock("draw"),this.parent(),ig.graph.endClock("draw")},update:function(){ig.graph.beginClock("update"),this.parent(),ig.graph.endClock("update")},checkEntities:function(){ig.graph.beginClock("checks"),this.parent(),ig.graph.endClock("checks")}}),ig.DebugGraphPanel=ig.DebugPanel.extend({clocks:{},marks:[],textY:0,height:128,ms:64,timeBeforeRun:0,init:function(e,t){this.parent(e,t),this.mark16ms=(this.height-this.height/this.ms*16).round(),this.mark33ms=(this.height-this.height/this.ms*33).round(),this.msHeight=this.height/this.ms,this.graph=ig.$new("canvas"),this.graph.width=window.innerWidth,this.graph.height=this.height,this.container.appendChild(this.graph),this.ctx=this.graph.getContext("2d"),this.ctx.fillStyle="#444",this.ctx.fillRect(0,this.mark16ms,this.graph.width,1),this.ctx.fillRect(0,this.mark33ms,this.graph.width,1),this.addGraphMark("16ms",this.mark16ms),this.addGraphMark("33ms",this.mark33ms),this.addClock("draw","Draw","#13baff"),this.addClock("update","Entity Update","#bb0fff"),this.addClock("checks","Entity Checks & Collisions","#a2e908"),this.addClock("lag","System Lag","#f26900"),ig.mark=this.mark.bind(this),ig.graph=this},addGraphMark:function(e,t){var i=ig.$new("span");i.className="ig_debug_graph_mark",i.textContent=e,i.style.top=t.round()+"px",this.container.appendChild(i)},addClock:function(e,t,i){var s=ig.$new("span");s.className="ig_debug_legend_color",s.style.backgroundColor=i;var n=ig.$new("span");n.className="ig_debug_legend_number",n.appendChild(document.createTextNode("0"));var o=ig.$new("span");o.className="ig_debug_legend",o.appendChild(s),o.appendChild(document.createTextNode(t+" (")),o.appendChild(n),o.appendChild(document.createTextNode("ms)")),this.container.appendChild(o),this.clocks[e]={description:t,color:i,current:0,start:Date.now(),avg:0,html:n}},beginClock:function(e,t){this.clocks[e].start=Date.now()+(t||0)},endClock:function(e){(e=this.clocks[e]).current=Math.round(Date.now()-e.start),e.avg=.8*e.avg+.2*e.current},mark:function(e,t){this.active&&this.marks.push({msg:e,color:t||"#fff"})},beforeRun:function(){this.endClock("lag"),this.timeBeforeRun=Date.now()},afterRun:function(){var e=Date.now()-this.timeBeforeRun;this.beginClock("lag",Math.max(1e3/ig.system.fps-e,0));e=this.graph.width-1;var t=this.height;this.ctx.drawImage(this.graph,-1,0),this.ctx.fillStyle="#000",this.ctx.fillRect(e,0,1,this.height),this.ctx.fillStyle="#444",this.ctx.fillRect(e,this.mark16ms,1,1),this.ctx.fillStyle="#444",this.ctx.fillRect(e,this.mark33ms,1,1);for(var i in this.clocks){var s=this.clocks[i];if(s.html.textContent=s.avg.toFixed(2),s.color&&0<s.current){this.ctx.fillStyle=s.color;var n=s.current*this.msHeight;t=t-n;this.ctx.fillRect(e,t,1,n),s.current=0}}for(this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.globalAlpha=.5,i=0;i<this.marks.length;i++)t=this.marks[i],this.ctx.fillStyle=t.color,this.ctx.fillRect(e,0,1,this.height),t.msg&&(this.ctx.fillText(t.msg,e-1,this.textY),this.textY=(this.textY+8)%32);this.ctx.globalAlpha=1,this.marks=[]}}),ig.debug.addPanel({type:ig.DebugGraphPanel,name:"graph",label:"Performance"})}),ig.baked=!0,ig.module("impact.debug.debug").requires("impact.debug.entities-panel","impact.debug.maps-panel","impact.debug.graph-panel").defines(function(){}),ig.baked=!0,ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){ig.System&&(ig.System.SCALE={CRISP:function(e,t){t.imageSmoothingEnabled=t.msImageSmoothingEnabled=t.mozImageSmoothingEnabled=t.oImageSmoothingEnabled=!1,e.style.imageRendering="-moz-crisp-edges",e.style.imageRendering="-o-crisp-edges",e.style.imageRendering="-webkit-optimize-contrast",e.style.imageRendering="crisp-edges",e.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(e,t){t.imageSmoothingEnabled=t.msImageSmoothingEnabled=t.mozImageSmoothingEnabled=t.oImageSmoothingEnabled=!0,e.style.imageRendering="",e.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH)}),ig.baked=!0,ig.module("plugins.patches.windowfocus-onMouseDown-patch").defines(function(){var e=!1;try{!1===(e=window.self!==window.top)&&(e=0<window.frames.length)}catch(t){e=!0}ig.Input.inject({keydown:function(t){var i=t.target.tagName;"INPUT"!=i&&"TEXTAREA"!=i&&(i="keydown"==t.type?t.keyCode:2==t.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,e&&0>i&&window.focus(),("touchstart"==t.type||"mousedown"==t.type)&&this.mousemove(t),(i=this.bindings[i])&&(this.actions[i]=!0,this.locks[i]||(this.presses[i]=!0,this.locks[i]=!0),t.stopPropagation(),t.preventDefault()))}})}),ig.baked=!0,ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!=typeof jQuery},addEvent:function(e,t,i,s){this.JQUERYAVAILABLE?e.on(t,i):e.addEventListener(t,i,s)},create:function(e){return this.JQUERYAVAILABLE?$("<"+e+">"):ig.$new(e)},getElementByClass:function(e){return this.JQUERYAVAILABLE?$("."+e):document.getElementsByClassName(e)},getElementById:function(e){return this.JQUERYAVAILABLE?0<$(e).length?$(e):null:ig.$(e)},appendChild:function(e,t){this.JQUERYAVAILABLE?e.append(t):e.appendChild(t)},appendToBody:function(e){this.JQUERYAVAILABLE?$("body").append(e):document.body.appendChild(e)},resize:function(e,t,i){if(this.JQUERYAVAILABLE)e.width(t.toFixed(2)),e.height(i.toFixed(2));else{var s=e.style.visibility;t="width:"+t.toFixed(2)+"px; height:"+i.toFixed(2)+"px;",this.attr(e,"style",t),e.style.visibility=s}},resizeOffsetLeft:function(e,t,i,s){if(this.JQUERYAVAILABLE)e.width(t.toFixed(2)),e.height(i.toFixed(2)),e.css("left",s);else{var n=e.style.visibility;t="width:"+t.toFixed(2)+"px; height:"+i.toFixed(2)+"px; left: "+s.toFixed(2)+"px;",this.attr(e,"style",t),e.style.visibility=n}},css:function(e,t){if(this.JQUERYAVAILABLE)e.css(t);else{var i,s="";for(i in t)s+=i+":"+t[i]+";";this.attr(e,"style",s)}},getOffsets:function(e){return this.JQUERYAVAILABLE?{left:(e=e.offset()).left,top:e.top}:{left:e.offsetLeft,top:e.offsetTop}},attr:function(e,t,i){if(void 0===i)return this.JQUERYAVAILABLE?e.attr(t):e.getAttribute(t);this.JQUERYAVAILABLE?e.attr(t,i):e.setAttribute(t,i)},show:function(e){this.JQUERYAVAILABLE?(e.show(),e.css("visibility","visible")):e&&(e.style?e.style.visibility="visible":e[0]&&(e[0].style.visibility="visible"))},hide:function(e){this.JQUERYAVAILABLE?(e.hide(),e.css("visibility","hidden")):e&&(e.style?e.style.visibility="hidden":e[0]&&(e[0].style.visibility="hidden"))},getQueryVariable:function(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var s=t[i].split("=");if(decodeURIComponent(s[0])==e)return decodeURIComponent(s[1])}},forcedDeviceDetection:function(){var e=this.getQueryVariable("device");if(e)switch(e){case"mobile":console.log("serving mobile version ..."),ig.ua.mobile=!0;break;case"desktop":console.log("serving desktop version ..."),ig.ua.mobile=!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},forcedDeviceRotation:function(){var e=this.getQueryVariable("force-rotate");if(e)switch(e){case"portrait":console.log("force rotate to portrait"),window.orientation=0;break;case"landscape":console.log("force rotate to horizontal"),window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}}})}),ig.baked=!0,ig.module("plugins.data.vector").defines(function(){Vector2=ig.Class.extend({x:null,y:null,valType:"number",init:function(e,t){typeof e===this.valType&&typeof t===this.valType&&(this.x=e,this.y=t)},row:function(e){return typeof e===this.valType&&(this.y=e),this.y},col:function(e){return typeof e===this.valType&&(this.x=e),this.x}})}),ig.baked=!0,ig.module("plugins.handlers.size-handler").requires("plugins.data.vector").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!0,desktop:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(480,640)},mobile:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(480,640)},windowSize:new Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#play","#orientate"],adsToResize:{MobileAdInGamePreroll:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll2:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd2:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll3:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd3:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20}},init:function(e){if(this.domHandler=e,void 0===e)throw"undefined Dom Handler for Size Handler";this.sizeCalcs(),this.eventListenerSetup(),this.samsungFix()},sizeCalcs:function(){if(this.windowSize=new Vector2(window.innerWidth,window.innerHeight),ig.ua.mobile){this.mobile.actualSize=new Vector2(window.innerWidth,window.innerHeight);var e=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=new Vector2(this.mobile.actualSize.x/e.x,this.mobile.actualSize.y/e.y);var t=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.mobile.actualSize.x=e.x*this.scaleRatioMultiplier.x,this.mobile.actualSize.y=e.y*this.scaleRatioMultiplier.y}else this.desktop.actualSize=new Vector2(window.innerWidth,window.innerHeight),e=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y),this.scaleRatioMultiplier=new Vector2(this.desktop.actualSize.x/e.x,this.desktop.actualSize.y/e.y),t=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y),this.desktop.actualSize.x=e.x*t,this.desktop.actualSize.y=e.y*t;this.sizeRatio.x=window.innerWidth/this.mobile.actualResolution.x,this.sizeRatio.y=window.innerHeight/this.mobile.actualResolution.y},resizeLayers:function(){for(var e=0;e<this.coreDivsToResize.length;e++){var t=ig.domHandler.getElementById(this.coreDivsToResize[e]);ig.ua.mobile?ig.domHandler.resize(t,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y)):ig.domHandler.resizeOffsetLeft(t,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/2))}for(var i in this.adsToResize){e=ig.domHandler.getElementById("#"+i),t=ig.domHandler.getElementById("#"+i+"-Box");var s=(window.innerWidth-this.adsToResize[i]["box-width"])/2+"px",n=(window.innerHeight-this.adsToResize[i]["box-height"])/2+"px";e&&ig.domHandler.css(e,{width:window.innerWidth,height:window.innerHeight}),t&&ig.domHandler.css(t,{left:s,top:n})}for(i in this.dynamicClickableEntityDivs){if(t=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y),e=ig.domHandler.getElementById("#"+i),ig.ua.mobile){var o=this.dynamicClickableEntityDivs[i].entity_pos_x,a=this.dynamicClickableEntityDivs[i].entity_pos_y,r=(n=this.dynamicClickableEntityDivs[i].width,s=this.dynamicClickableEntityDivs[i].height,Math.floor(o*this.scaleRatioMultiplier.x)+"px");a=Math.floor(a*this.scaleRatioMultiplier.y)+"px",n=Math.floor(n*this.scaleRatioMultiplier.x)+"px",t=Math.floor(s*this.scaleRatioMultiplier.y)+"px"}else{s=ig.domHandler.getElementById("#canvas"),s=ig.domHandler.getOffsets(s),r=s.left;var h=s.top;o=this.dynamicClickableEntityDivs[i].entity_pos_x,a=this.dynamicClickableEntityDivs[i].entity_pos_y,n=this.dynamicClickableEntityDivs[i].width,s=this.dynamicClickableEntityDivs[i].height,r=Math.floor(r+o*t)+"px",a=Math.floor(h+a*t)+"px",n=Math.floor(n*t)+"px",t=Math.floor(s*t)+"px"}ig.domHandler.css(e,{float:"left",position:"absolute",left:r,top:a,width:n,height:t,"z-index":3})}},resize:function(){this.sizeCalcs(),this.resizeLayers()},reorient:function(){if(ig.ua.mobile){var e=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth,t=this.domHandler.getElementById("#orientate"),i=this.domHandler.getElementById("#game");e?(this.domHandler.show(t),this.domHandler.hide(i)):(this.domHandler.show(i),this.domHandler.hide(t))}ig.ua.mobile?(this.resize(),this.resizeAds()):this.resize()},resizeAds:function(){for(var e in this.adsToResize){var t=ig.domHandler.getElementById("#"+e),i=ig.domHandler.getElementById("#"+e+"-Box"),s=(window.innerWidth-this.adsToResize[e]["box-width"])/2+"px",n=(window.innerHeight-this.adsToResize[e]["box-height"])/2+"px";t&&ig.domHandler.css(t,{width:window.innerWidth,height:window.innerHeight}),i&&ig.domHandler.css(i,{left:s,top:n})}},samsungFix:function(){ig.ua.android&&!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&!(0<navigator.userAgent.indexOf("Firefox"))&&(document.addEventListener("touchstart",function(e){return e.preventDefault(),!1},!1),document.addEventListener("touchmove",function(e){return e.preventDefault(),!1},!1),document.addEventListener("touchend",function(e){return e.preventDefault(),!1},!1))},orientationInterval:null,orientationTimeout:null,orientationHandler:function(){this.reorient(),window.scrollTo(0,1)},orientationDelayHandler:function(){null==this.orientationInterval&&(this.orientationInterval=window.setInterval(this.orientationHandler.bind(this),100)),null==this.orientationTimeout&&(this.orientationTimeout=window.setTimeout(function(){this.clearAllIntervals()}.bind(this),2e3))},clearAllIntervals:function(){window.clearInterval(this.orientationInterval),this.orientationInterval=null,window.clearTimeout(this.orientationTimeout),this.orientationTimeout=null},eventListenerSetup:function(){ig.ua.iOS?(window.addEventListener("orientationchange",this.orientationDelayHandler.bind(this)),window.addEventListener("resize",this.orientationDelayHandler.bind(this))):(window.addEventListener("orientationchange",this.orientationHandler.bind(this)),window.addEventListener("resize",this.orientationHandler.bind(this))),document.ontouchmove=function(e){window.scrollTo(0,1),e.preventDefault()}}})}),ig.baked=!0,ig.module("plugins.handlers.api-handler").defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},MJSHeader:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},MJSFooter:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize()},MJSEnd:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()}},run:function(e,t){this.apiAvailable[e]&&this.apiAvailable[e](t)}})}),ig.baked=!0,ig.module("plugins.audio.sound-player").defines(function(){SoundPlayer=ig.Class.extend({tagName:"SoundPlayer",stayMuteFlag:!1,debug:!1,init:function(){this.debug&&console.log(this.tagName)},play:function(e){this.debug&&console.log("play sound ",e)},stop:function(){this.debug&&console.log("stop sound ")},volume:function(){this.debug&&console.log("set volume")},mute:function(e){this.debug&&console.log("mute"),void 0===e?this.stayMuteFlag=!0:e&&(this.stayMuteFlag=!0)},unmute:function(e){this.debug&&console.log("unmute"),void 0===e?this.stayMuteFlag=!1:e&&(this.stayMuteFlag=!1)}})}),ig.baked=!0,ig.module("plugins.audio.impact-music-player").requires("plugins.audio.sound-player").defines(function(){ImpactMusicPlayer=SoundPlayer.extend({tagName:"ImpactMusicPlayer",bgmPlaying:!1,soundList:{},init:function(e,t){this.parent(e,t);for(var i in e)this.soundList[i]=i,ig.music.add(e[i].path+".*",i);t&&t.loop&&(ig.music.loop=t.loop)},play:function(e){this.stayMuteFlag||(this.bgmPlaying=!0,void 0===e?ig.music.play(e):ig.music.play())},stop:function(){this.bgmPlaying=!1,ig.music.pause()},volume:function(e){console.log("impactmusic:",e),ig.music.volume=0>e?0:isNaN(e)?1:1<e?1:e},getVolume:function(){return ig.music.volume},mute:function(e){this.parent(e),this.bgmPlaying&&this.stop()},unmute:function(e){this.parent(e),this.play()}})}),ig.baked=!0,ig.module("plugins.audio.impact-sound-player").requires("plugins.audio.sound-player").defines(function(){ImpactSoundPlayer=SoundPlayer.extend({tagName:"ImpactSoundPlayer",soundList:{},init:function(e,t){this.parent(e,t);for(var i in e){var s=new ig.Sound(e[i].path+".*");this.soundList[i]=s}},play:function(e){this.stayMuteFlag||("object"==typeof e?(console.log(e+" exists"),e.play()):"string"==typeof e&&this.soundList[e].play())},stop:function(e){this.parent(e),e.stop()},volume:function(e){ig.soundManager.volume=0>e?0:isNaN(e)?1:1<e?1:e},getVolume:function(){return ig.soundManager.volume},mute:function(e){this.parent(e),ig.Sound.enabled=!1},unmute:function(e){this.parent(e),ig.Sound.enabled=!0}})}),ig.baked=!0,ig.module("plugins.audio.howler-player").requires("plugins.audio.sound-player").defines(function(){HowlerPlayer=SoundPlayer.extend({tagName:"HowlerPlayer",soundList:{},init:function(e,t){this.parent(e,t);for(var i in e){var s=e[i].path;s=new Howl({urls:[s+"."+ig.Sound.FORMAT.OGG.ext,s+"."+ig.Sound.FORMAT.MP3.ext]});this.soundList[i]=s}},play:function(e){this.stayMuteFlag||("object"==typeof e?e.play():"string"==typeof e&&this.soundList[e].play())},stop:function(e){this.parent(e),e.stop()},volume:function(e){for(var t in this.soundList){if(0>e){this.soundList[t].volume(0);break}isNaN(e)?this.soundList[t].volume(1):1<e?this.soundList[t].volume(1):this.soundList[t].volume(e)}},getVolume:function(){for(var e in this.soundList)return this.soundList[e].volume()},mute:function(e){this.parent(e),Howler.mute()},unmute:function(e){this.parent(e),Howler.unmute()}})}),ig.baked=!0,ig.module("plugins.audio.howler-music-player").requires("plugins.audio.sound-player").defines(function(){HowlerMusicPlayer=SoundPlayer.extend({tagName:"HowlerMusicPlayer",bgmPlaying:!1,soundList:{},init:function(e,t){this.parent(e,t);for(var i in e){var s=e[i].path;s=new Howl({urls:[s+"."+ig.Sound.FORMAT.OGG.ext,s+"."+ig.Sound.FORMAT.MP3.ext],loop:!0,autoplay:!1,onend:function(){}.bind(this)});this.soundList[i]=s}},play:function(e){if(!this.stayMuteFlag&&!this.bgmPlaying)if("object"==typeof e)this.bgmPlaying=!0,e.play();else if("string"==typeof e)this.bgmPlaying=!0,this.soundList[e].play();else for(var t in this.soundList){this.soundList[t].play(),this.bgmPlaying=!0;break}},stop:function(e){if(this.parent(e),this.bgmPlaying){for(var t in this.soundList)this.soundList[t].stop();this.bgmPlaying=!1}},volume:function(e){for(var t in this.soundList){if(0>e){this.soundList[t].volume(0);break}isNaN(e)?this.soundList[t].volume(1):1<e?this.soundList[t].volume(1):this.soundList[t].volume(e)}},getVolume:function(){for(var e in this.soundList)return this.soundList[e].volume()},mute:function(e){this.parent(e),Howler.mute()},unmute:function(e){this.parent(e),Howler.unmute()}})}),ig.baked=!0,ig.module("plugins.audio.jukebox-player").requires("plugins.audio.sound-player").defines(function(){JukeboxPlayer=SoundPlayer.extend({tagName:"JukeboxPlayer",bgmPlaying:!1,soundList:{},jukeboxPlayer:null,pausePosition:0,premuteVolume:0,minVolume:.001,init:function(e,t){this.parent(e,t);for(var i in e){this.soundList[i]=i;var s=e[i].path;this.jukeboxPlayer=new jukebox.Player({resources:[s+"."+ig.Sound.FORMAT.OGG.ext,s+"."+ig.Sound.FORMAT.MP3.ext],autoplay:!1,spritemap:{music:{start:e[i].startMp3,end:e[i].endMp3,loop:!0}}})}},play:function(){this.stayMuteFlag||(this.bgmPlaying=!0,this.pausePosition?(console.log("resume"),this.jukeboxPlayer.resume(this.pausePosition)):(console.log("play"),this.jukeboxPlayer.play(this.jukeboxPlayer.settings.spritemap.music.start,!0)),this.premuteVolume=this.getVolume())},stop:function(){this.bgmPlaying=!1,this.pausePosition=this.jukeboxPlayer.pause()},volume:function(e){console.log("jukebox:",e),0>=e?this.jukeboxPlayer.setVolume(this.minVolume):isNaN(e)?this.jukeboxPlayer.setVolume(1):1<e?this.jukeboxPlayer.setVolume(1):this.jukeboxPlayer.setVolume(e)},getVolume:function(){return this.jukeboxPlayer.getVolume()},mute:function(e){this.parent(e),this.bgmPlaying&&(console.log("jukebox",this.premuteVolume),this.stayMuteFlag||(this.premuteVolume=this.getVolume()),this.jukeboxPlayer.pause(),this.jukeboxPlayer.setVolume(this.minVolume))},unmute:function(e){this.parent(e),this.stayMuteFlag||(console.log("jukebox",this.premuteVolume),this.jukeboxPlayer.setVolume(this.premuteVolume),this.jukeboxPlayer.resume())}})}),ig.baked=!0,ig.module("plugins.audio.webaudio-music-player").requires("plugins.audio.sound-player").defines(function(){WebaudioMusicPlayer=SoundPlayer.extend({bgmPlaying:!1,isSupported:!1,muteFlag:!1,pausedTime:0,webaudio:null,useHTML5Audio:!1,audio:null,inactiveAudio:null,codecs:null,_volume:1,soundList:{},init:function(e){this.webaudio={compatibility:{},gainNode:null,buffer:null,source_loop:{},source_once:{}};try{this.AudioContext=window.AudioContext||window.webkitAudioContext,this.webaudio.context=new this.AudioContext,this.isSupported=!0}catch(e){console.log("Web Audio API not supported in this browser."),this.webaudio=null,this.useHTML5Audio=!0}if(this.useHTML5Audio)if("undefined"!=typeof Audio)try{new Audio}catch(e){this.useHTML5Audio=!1}else this.useHTML5Audio=!1;if(this.useHTML5Audio&&(this.audio=new Audio,this.isSupported=!0,this.initHTML5Audio(e)),!this.isSupported)return null;this.webaudio&&this.initWebAudio(e)},initWebAudio:function(e){ig.ua.iOS&&this.initIOSWebAudioUnlock(),this.webaudio.gainNode=this.webaudio.context.createGain(),this.webaudio.gainNode.connect(this.webaudio.context.destination),this.webaudio.gainNode.gain.value=this._volume;var t="start",i="stop",s=this.webaudio.context.createBufferSource();"function"!=typeof s.start&&(t="noteOn"),this.webaudio.compatibility.start=t,"function"!=typeof s.stop&&(i="noteOff"),this.webaudio.compatibility.stop=i;for(var n in e){this.soundList[n]=n,e=(t=e[n].path)+"."+ig.Sound.FORMAT.MP3.ext;var o=t+"."+ig.Sound.FORMAT.OGG.ext;ig.ua.mobile?ig.ua.iOS&&(o=e):-1!=(t=navigator.userAgent.toLowerCase()).indexOf("safari")&&-1>=t.indexOf("chrome")&&(o=e);var a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="arraybuffer",a.onload=function(){this.webaudio.context.decodeAudioData(a.response,function(e){this.webaudio.buffer=e,this.webaudio.source_loop={},this.bgmPlaying?this.play():this.stop()}.bind(this),function(){console.log('Error decoding audio "'+o+'".')})}.bind(this),a.send();break}},initIOSWebAudioUnlock:function(){if(this.webaudio){webaudio=this.webaudio;var e=function(){var t=webaudio.context,i=t.createBuffer(1,1,22050),s=t.createBufferSource();s.buffer=i,s.connect(t.destination),void 0===s.start?s.noteOn(0):s.start(0),setTimeout(function(){(s.playbackState===s.PLAYING_STATE||s.playbackState===s.FINISHED_STATE)&&window.removeEventListener("touchend",e,!1)},0)};window.addEventListener("touchend",e,!1)}},initHTML5Audio:function(e){if(this.useHTML5Audio&&this.audio){var t=this.audio;this.codecs={},this.codecs={mp3:!!t.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},this.is={ff:Boolean(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase())),ie:Boolean(document.all&&!window.opera),opera:Boolean(window.opera),chrome:Boolean(window.chrome),safari:Boolean(!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase())&&window.getComputedStyle&&!window.globalStorage&&!window.opera)},this.playDelay=-60,this.stopDelay=30,this.is.chrome&&(this.playDelay=-25),this.is.chrome&&(this.stopDelay=25),this.is.ff&&(this.playDelay=-25),this.is.ff&&(this.stopDelay=85),this.is.opera&&(this.playDelay=5),this.is.opera&&(this.stopDelay=0);for(var i in e){this.soundList[i]=i;t=(s=e[i].path)+"."+ig.Sound.FORMAT.OGG.ext;var s=s+"."+ig.Sound.FORMAT.MP3.ext,n=null;if(this.codecs[ig.Sound.FORMAT.OGG.ext.toLowerCase()]?n=t:this.codecs[ig.Sound.FORMAT.MP3.ext.toLowerCase()]&&(n=s),n){ig.ua.mobile?ig.ua.iOS&&(n=s):-1!=(e=navigator.userAgent.toLowerCase()).indexOf("safari")&&-1>=e.indexOf("chrome")&&(n=s),this.audio.addEventListener("error",function(){this.audio.error&&4===this.audio.error.code&&(this.isSupported=!1)},!1),this.audio.src=n,this.audio._pos=0,this.audio.preload="auto",this.audio.volume=this._volume,this.inactiveAudio=new Audio,this.inactiveAudio.src=n,this.inactiveAudio._pos=0,this.inactiveAudio.preload="auto",this.inactiveAudio.volume=this._volume,this.inactiveAudio.load();var o=function(){this._duration=this.audio.duration,this._loaded||(this._loaded=!0),this.bgmPlaying?this.play():this.stop(),this.audio.removeEventListener("canplaythrough",o,!1)}.bind(this);this.audio.addEventListener("canplaythrough",o,!1),this.audio.load();break}}}},play:function(e){if(this.isSupported)if(this.bgmPlaying=!0,this.webaudio)this.webaudio.buffer?this.muteFlag||(this.bgmPlaying=!0,this.webaudio.source_loop._playing)||(this.webaudio.source_loop=this.webaudio.context.createBufferSource(),this.webaudio.source_loop.buffer=this.webaudio.buffer,this.webaudio.source_loop.loop=!0,this.webaudio.source_loop.connect(this.webaudio.gainNode),isNaN(e)&&(e=0,this.pausedTime&&(e=this.pausedTime)),this.webaudio.source_loop._startTime=this.webaudio.context.currentTime,"noteOn"===this.webaudio.compatibility.start?(this.webaudio.source_once=this.webaudio.context.createBufferSource(),this.webaudio.source_once.buffer=this.webaudio.buffer,this.webaudio.source_once.connect(this.webaudio.gainNode),this.webaudio.source_once.noteGrainOn(0,e,this.webaudio.buffer.duration-e),this.webaudio.source_loop[this.webaudio.compatibility.start](this.webaudio.context.currentTime+(this.webaudio.buffer.duration-e))):this.webaudio.source_loop[this.webaudio.compatibility.start](0,e),this.webaudio.source_loop._playing=!0):this.bgmPlaying=!0;else if(this.audio){var t=this.audio;if(!this.muteFlag){this.bgmPlaying=!0,isNaN(e)&&(e=0,this.pausedTime&&(e=this.pausedTime));var i=this._duration-e;this._onEndTimer&&(clearTimeout(this._onEndTimer),this._onEndTimer=null),this._onEndTimer=setTimeout(function(){if(this.audio.currentTime=0,this.audio.pause(),this.pausedTime=0,this.inactiveAudio){var e=this.audio;this.audio=this.inactiveAudio,this.inactiveAudio=e}this.play()}.bind(this),1e3*i+this.playDelay),4===t.readyState||!t.readyState&&navigator.isCocoonJS?(t.readyState=4,t.currentTime=e,t.muted=this.muteFlag||t.muted,t.volume=this._volume,setTimeout(function(){t.play()},0)):(clearTimeout(this._onEndTimer),this._onEndTimer=null,function(){var e=function(){this.play(),t.removeEventListener("canplaythrough",e,!1)}.bind(this);t.addEventListener("canplaythrough",e,!1)}())}}},stop:function(){if(this.bgmPlaying=!1,this.isSupported)if(this.webaudio)this.webaudio.source_loop._playing&&(this.webaudio.source_loop[this.webaudio.compatibility.stop](0),this.webaudio.source_loop._playing=!1,this.pausedTime+=this.webaudio.context.currentTime-this.webaudio.source_loop._startTime,this.pausedTime%=this.webaudio.source_loop.buffer.duration,this.webaudio.source_loop._startTime=0,"noteOn"===this.webaudio.compatibility.start)&&this.webaudio.source_once[this.webaudio.compatibility.stop](0);else if(this.audio){var e=this.audio;this.pausedTime=e.currentTime,e.currentTime=0,e.pause(),clearTimeout(this._onEndTimer),this._onEndTimer=null}},volume:function(e){this.isSupported&&(this._volume=e,0>this._volume?this._volume=0:1<this._volume&&(this._volume=1),this.webaudio?this.webaudio.gainNode&&(this.webaudio.gainNode.gain.value=this._volume):this.audio&&(this.audio.volume=this._volume,this.inactiveAudio&&(this.inactiveAudio.volume=this._volume)))},getVolume:function(){return this.isSupported?this._volume:0},mute:function(e){this.parent(e),0==this.muteFlag&&(this.muteFlag=!0,this.bgmPlaying&&(this.stop(),this.bgmPlaying=!0))},unmute:function(e){this.parent(e),!this.stayMuteFlag&&1==this.muteFlag&&(this.muteFlag=!1,this.bgmPlaying&&this.play())}})}),ig.baked=!0,ig.module("plugins.audio.sound-info").defines(function(){SoundInfo=ig.Class.extend({FORMATS:{OGG:".ogg",MP3:".mp3"},sfx:{kittyopeningSound:{path:cervezaAguilaPathModule+"media/audio/opening/kittyopening"},staticSound:{path:cervezaAguilaPathModule+"media/audio/play/static"},openingSound:{path:cervezaAguilaPathModule+"media/audio/opening/opening"},coin:{path:cervezaAguilaPathModule+"media/audio/coin"},jump:{path:cervezaAguilaPathModule+"media/audio/jump"},splash:{path:cervezaAguilaPathModule+"media/audio/splash"},button:{path:cervezaAguilaPathModule+"media/audio/button"},whoosh:{path:cervezaAguilaPathModule+"media/audio/whoosh"},purchase:{path:cervezaAguilaPathModule+"media/audio/purchase"},splat:{path:cervezaAguilaPathModule+"media/audio/splat"}},bgm:{background:{path:cervezaAguilaPathModule+"media/audio/bgm2",startOgg:0,endOgg:17,startMp3:0,endMp3:17}}})}),ig.baked=!0,ig.module("plugins.audio.sound-handler").requires("plugins.audio.impact-music-player","plugins.audio.impact-sound-player","plugins.audio.howler-player","plugins.audio.howler-music-player","plugins.audio.jukebox-player","plugins.audio.webaudio-music-player","plugins.audio.sound-info").defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,focusBlurMute:!1,soundInfo:new SoundInfo,init:function(){console.log("Initiating sound handler"),this.initWindowHandler(),ig.ua.mobile?(this.initPowerButtonFix(),this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new JukeboxPlayer(this.soundInfo.bgm,{loop:!0}))):(this.bgmPlayer=new WebaudioMusicPlayer(this.soundInfo.bgm,{loop:!0}),this.bgmPlayer.isSupported||(this.bgmPlayer=new ImpactMusicPlayer(this.soundInfo.bgm,{loop:!0}))),this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx),this.muteBGM()},checkBGM:function(){return this.bgmPlayer.stayMuteFlag},checkSFX:function(){return this.sfxPlayer.stayMuteFlag},muteSFX:function(e){this.sfxPlayer&&this.sfxPlayer.mute(e)},muteBGM:function(e){this.bgmPlayer&&this.bgmPlayer.mute(e)},unmuteSFX:function(e){this.sfxPlayer&&this.sfxPlayer.unmute(e)},unmuteBGM:function(e){this.bgmPlayer&&this.bgmPlayer.unmute(e)},muteAll:function(e){this.muteSFX(e),this.muteBGM(e)},unmuteAll:function(e){this.unmuteSFX(e),this.unmuteBGM(e)},forceMuteAll:function(){this.focusBlurMute||this.muteAll(!1),this.focusBlurMute=!0},forceUnMuteAll:function(){this.focusBlurMute&&(this.unmuteAll(!1),this.focusBlurMute=!1)},initWindowHandler:function(){"true"===ig.domHandler.getQueryVariable("webview")?($(window).focus(function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()}),$(window).blur(function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})):(window.onfocus=function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},window.onblur=function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()})},initPowerButtonFix:function(){var e=this.getHiddenProp();e&&(e=e.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(e,this.visChange)),window.addEventListener("pagehide",function(){ig.soundHandler&&ig.soundHandler.forceMuteAll()},!1),window.addEventListener("pageshow",function(){ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},!1)},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null},isHidden:function(){var e=this.getHiddenProp();return!!e&&document[e]},visChange:function(){ig.soundHandler.isHidden()?ig.soundHandler&&ig.soundHandler.forceMuteAll():ig.soundHandler&&ig.soundHandler.forceUnMuteAll()},saveVolume:function(){this.sfxPlayer&&ig.game.io.storageSet("soundVolume",this.sfxPlayer.getVolume()),this.bgmPlayer&&ig.game.io.storageSet("musicVolume",this.bgmPlayer.getVolume())},forceLoopBGM:function(){var e;if(!this.focusBlurMute&&this.bgmPlayer.bgmPlaying&&this.bgmPlayer){var t=this.bgmPlayer.jukeboxPlayer;if(t){null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase()),e=Boolean(window.chrome),!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase());var i=.1;ig.ua.mobile&&(i=.115,ig.ua.android&&(i=.45,e&&(i=.3))),t.settings.spritemap.music&&(e=t.settings.spritemap.music.end-i,t.getCurrentTime()>=e&&(e=t.settings.spritemap.music.start,ig.ua.android?this.forcelooped||(t.play(e,!0),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},i)):t.setCurrentTime(e)))}else"ImpactMusicPlayer"==this.bgmPlayer.tagName&&(null!=window.mozInnerScreenX&&/firefox/.test(navigator.userAgent.toLowerCase()),e=Boolean(window.chrome),!window.chrome&&/safari/.test(navigator.userAgent.toLowerCase()),i=.1,ig.ua.mobile&&(i=.115,ig.ua.android&&(i=.45,e&&(i=.3))),t=0,"mp3"==ig.soundManager.format.ext&&(t=.05),ig.music.currentTrack&&(e=ig.music.currentTrack.duration-i,ig.music.currentTrack.currentTime>=e&&(ig.ua.android?this.forcelooped||(ig.music.currentTrack.pause(),ig.music.currentTrack.currentTime=t,ig.music.currentTrack.play(),this.forcelooped=!0,setTimeout(function(){ig.soundHandler.forcelooped=!1},i)):ig.music.currentTrack.currentTime=t)))}}})}),ig.baked=!0,ig.module("plugins.io.storage").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return ig.Storage.instance?ig.Storage.instance:null},init:function(){ig.Storage.instance=this},isCapable:function(){return void 0!==window.localStorage},isSet:function(e){return null!==this.get(e)},initUnset:function(e,t){null===this.get(e)&&this.set(e,t)},get:function(e){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(e))}catch(t){return window.localStorage.getItem(e)}},getInt:function(e){return~~this.get(e)},getFloat:function(e){return parseFloat(this.get(e))},getBool:function(e){return!!this.get(e)},key:function(e){return this.isCapable()?window.localStorage.key(e):null},set:function(e,t){if(!this.isCapable())return null;try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},setHighest:function(e,t){t>this.getFloat(e)&&this.set(e,t)},remove:function(e){if(!this.isCapable())return null;window.localStorage.removeItem(e)},clear:function(){if(!this.isCapable())return null;window.localStorage.clear()}})}),ig.baked=!0,ig.module("plugins.io.mouse").defines(function(){Mouse=ig.Class.extend({bindings:{click:[ig.KEY.MOUSE1]},init:function(){ig.input.initMouse();for(var e in this.bindings){this[e]=e;for(var t=0;t<this.bindings[e].length;t++)ig.input.bind(this.bindings[e][t],e)}},getPos:function(){if(ig.ua.mobile)var e=ig.input.mouse.x/ig.sizeHandler.sizeRatio.x,t=ig.input.mouse.y/ig.sizeHandler.sizeRatio.y;else e=ig.input.mouse.x,t=ig.input.mouse.y;return new Vector2(e,t)}})}),ig.baked=!0,ig.module("plugins.io.keyboard").defines(function(){Keyboard=ig.Class.extend({bindings:{jump:[ig.KEY.W,ig.KEY.UP_ARROW],moveright:[ig.KEY.D,ig.KEY.RIGHT_ARROW],moveleft:[ig.KEY.A,ig.KEY.LEFT_ARROW],shoot:[ig.KEY.S,ig.KEY.DOWN_ARROW,ig.KEY.SPACE]},init:function(){for(var e in this.bindings){this[e]=e;for(var t=0;t<this.bindings[e].length;t++)ig.input.bind(this.bindings[e][t],e)}}})}),ig.baked=!0,ig.module("plugins.io.gamepad-input").defines(function(){ig.PADKEY={BUTTON_0:0,PADBUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3},ig.GamepadInput=ig.Class.extend({isInit:!1,isSupported:!1,list:[],bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function(){if(!this.isInit){this.isInit=!0;var e=navigator.getGamepads||navigator.webkitGetGamepads;e&&(!navigator.getGamepads&&navigator.webkitGetGamepads&&(navigator.getGamepads=navigator.webkitGetGamepads),this.list=navigator.getGamepads()),this.isSupported=e}},isAvailable:function(){return this.isInit&&this.isSupported},buttonPressed:function(e){return"object"==typeof e?e.pressed:1==e},buttonDown:function(e){(e=this.bindings[e])&&(this.states[e]=!0,this.downLocks[e]||(this.presses[e]=!0,this.downLocks[e]=!0))},buttonUp:function(e){(e=this.bindings[e])&&this.downLocks[e]&&!this.upLocks[e]&&(this.states[e]=!1,this.releases[e]=!0,this.upLocks[e]=!0)},clearPressed:function(){for(var e in this.releases)this.states[e]=!1,this.downLocks[e]=!1;this.releases={},this.presses={},this.upLocks={}},bind:function(e,t){this.bindings[e]=t},unbind:function(e){this.releases[this.bindings[e]]=!0,this.bindings[e]=null},unbindAll:function(){this.bindings={},this.states={},this.presses={},this.releases={},this.downLocks={},this.upLocks={}},state:function(e){return this.states[e]},pressed:function(e){return this.presses[e]},released:function(e){return this.releases[e]},clamp:function(e,t,i){return e<t?t:e>i?i:e},pollGamepads:function(){if(this.isSupported){this.leftStick.x=0,this.leftStick.y=0,this.rightStick.x=0,this.rightStick.y=0,this.list=navigator.getGamepads();for(var e in this.bindings){for(var t=!1,i=0;i<this.list.length;i++){if((n=this.list[i])&&n.buttons&&this.buttonPressed(n.buttons[e])){t=!0;break}}t?this.buttonDown(e):this.buttonUp(e)}for(i=0;i<this.list.length;i++)if((n=this.list[i])&&n.axes){e=n.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];t=n.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y];var s=n.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X],n=n.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(e)?0:e,this.leftStick.y+=isNaN(t)?0:t,this.rightStick.x+=isNaN(s)?0:s,this.rightStick.y+=isNaN(n)?0:n}0<this.list.length&&(this.leftStick.x=this.clamp(this.leftStick.x,-1,1),this.leftStick.y=this.clamp(this.leftStick.y,-1,1),this.rightStick.x=this.clamp(this.rightStick.x,-1,1),this.rightStick.y=this.clamp(this.rightStick.y,-1,1))}}})}),ig.baked=!0,ig.module("plugins.io.gamepad").requires("plugins.io.gamepad-input").defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0]},init:function(){ig.gamepadInput.start();for(var e in this.bindings)for(var t=0;t<this.bindings[e].length;t++)ig.gamepadInput.bind(this.bindings[e][t],e)},press:function(){},held:function(){},release:function(){}})}),ig.baked=!0,ig.module("plugins.io.multitouch").defines(function(){Multitouch=ig.Class.extend({init:function(){ig.multitouchInput.start()},getTouchesPos:function(){if(ig.ua.mobile){if(0<ig.multitouchInput.touches.length){for(var e=[],t=0;t<ig.multitouchInput.touches.length;t++){var i=ig.multitouchInput.touches[t];e.push({x:i.x,y:i.y})}return e}return null}}})}),ig.baked=!0,ig.module("plugins.io.multitouch-input").defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:!1,touches:[],multitouchCapable:!1,lastEventUp:null,start:function(){this.isStart||(this.isStart=!0,navigator.maxTouchPoints&&1<navigator.maxTouchPoints&&(this.multitouchCapable=!0),ig.ua.touchDevice&&(window.navigator.msPointerEnabled&&(ig.system.canvas.addEventListener("MSPointerDown",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.touchmove.bind(this),!1),ig.system.canvas.style.msContentZooming="none",ig.system.canvas.style.msTouchAction="none"),ig.system.canvas.addEventListener("touchstart",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.touchmove.bind(this),!1)))},touchmove:function(e){if(ig.ua.touchDevice){var t=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,i=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;t=ig.system.scale*(t/ig.system.realWidth),i=ig.system.scale*(i/ig.system.realHeight);if(e.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<e.touches.length&&(this.multitouchCapable=!0);var s={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(s=ig.system.canvas.getBoundingClientRect());for(var n=0;n<e.touches.length;n++){var o=e.touches[n];o&&this.touches.push({x:(o.clientX-s.left)/t,y:(o.clientY-s.top)/i})}}else this.windowMove(e)}},touchdown:function(e){var t=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,i=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;t=ig.system.scale*(t/ig.system.realWidth),i=ig.system.scale*(i/ig.system.realHeight);if(window.navigator.msPointerEnabled)this.windowKeyDown(e);else if(ig.ua.touchDevice&&e.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<e.touches.length&&(this.multitouchCapable=!0);var s={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(s=ig.system.canvas.getBoundingClientRect());for(var n=0;n<e.touches.length;n++){var o=e.touches[n];o&&this.touches.push({x:(o.clientX-s.left)/t,y:(o.clientY-s.top)/i})}}},touchup:function(e){var t=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;if(parseInt(ig.system.canvas.offsetHeight),t=ig.system.scale*(t/ig.system.realWidth),window.navigator.msPointerEnabled)this.windowKeyUp(e);else{this.lastEventUp=e;var i={left:0,top:0};if(ig.system.canvas.getBoundingClientRect&&(i=ig.system.canvas.getBoundingClientRect()),ig.ua.touchDevice)for(e=(e.changedTouches[0].clientX-i.left)/t,t=0;t<this.touches.length;t++)this.touches[t].x>=e-40&&this.touches[t].x<=e+40&&this.touches.splice(t,1)}},windowKeyDown:function(e){var t=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,i=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;t=ig.system.scale*(t/ig.system.realWidth),i=ig.system.scale*(i/ig.system.realHeight);if(window.navigator.msPointerEnabled){var s={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(s=ig.system.canvas.getBoundingClientRect()),e=e.changedTouches?e.changedTouches:[e];for(var n=0;n<e.length;++n){for(var o=void 0!==(r=e[n]).identifier?r.identifier:void 0!==r.pointerId?r.pointerId:1,a=(r.clientX-s.left)/t,r=(r.clientY-s.top)/i,h=0;h<this.touches.length;++h)this.touches[h].identifier==o&&this.touches.splice(h,1);this.touches.push({x:a,y:r,identifier:o})}for(t=0;t<this.touches.length;t++);}},windowKeyUp:function(e){e=void 0!==e.identifier?e.identifier:void 0!==e.pointerId?e.pointerId:1;for(var t=0;t<this.touches.length;++t)this.touches[t].identifier==e&&this.touches.splice(t,1);for(;0<this.touches.length;)this.touches.pop()},windowMove:function(e){var t=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,i=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,s=(t=ig.system.scale*(t/ig.system.realWidth),i=ig.system.scale*(i/ig.system.realHeight),{left:0,top:0});if(ig.system.canvas.getBoundingClientRect&&(s=ig.system.canvas.getBoundingClientRect()),window.navigator.msPointerEnabled)for(var n=void 0!==e.identifier?e.identifier:void 0!==e.pointerId?e.pointerId:1,o=0;o<this.touches.length;++o)if(this.touches[o].identifier==n){var a=(e.clientY-s.top)/i;this.touches[o].x=(e.clientX-s.left)/t,this.touches[o].y=a}}})}),ig.baked=!0,ig.module("plugins.io.io-manager").requires("plugins.io.storage","plugins.io.mouse","plugins.io.keyboard","plugins.io.gamepad","plugins.io.multitouch","plugins.io.multitouch-input","plugins.io.gamepad-input").defines(function(){IoManager=ig.Class.extend({storage:null,localStorageSupport:!1,gamekey:"TeamKaboom",mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput,ig.gamepadInput=new ig.GamepadInput,this.unbindAll(),this.initStorage(),this.initMouse(),this.initKeyboard()},unbindAll:function(){ig.input.unbindAll(),ig.gamepadInput.unbindAll()},initStorage:function(){this._supportsLocalStorage()&&(this.storage=new ig.Storage)},initMouse:function(){this.mouse=new Mouse},initKeyboard:function(){this.keyboard=new Keyboard},initMultitouch:function(){this.multitouch=new Multitouch},initGamepad:function(){this.gamepad=new Gamepad},press:function(e){return!(!ig.input.pressed(e)&&!this.gamepad.press(e))},held:function(e){return!(!ig.input.state(e)&&!this.gamepad.state(e))},release:function(e){return!(!ig.input.released(e)&&!this.gamepad.released(e))},getClickPos:function(){return this.mouse.getPos()},getTouchesPos:function(){return this.multitouch.getTouchesPos()},checkOverlap:function(e,t,i,s,n){return!(e.x>t+s||e.x<t||e.y>i+n||e.y<i)},_supportsLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),this.localStorageSupport="localStorage"in window&&null!==window.localStorage}catch(e){return this.localStorageSupport}},storageIsSet:function(e){return this.localStorageSupport?this.storage.isSet(e):null},storageGet:function(e){return this.localStorageSupport?this.storage.get(e):null},storageSet:function(e,t){if(!this.localStorageSupport)return null;this.storage.set(e,t)},assert:function(e,t,i){if(t!==i)throw"actualValue:"+t+" not equal to testValue:"+i+" at "+e}})}),ig.baked=!0,ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({loadingBgImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/loading/loadingbg.png"),loadingBarImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/loading/loadingbar.png"),loadingBarSize:{x:232,y:13},init:function(e,t){this.parent(e,t),ig.apiHandler.run("MJSPreroll")},end:function(){if(this.parent(),ig.ua.mobile){var e=ig.domHandler.getElementById("#play");ig.domHandler.show(e)}ig.system.setGame(MyGame)},setupCustomAnimation:function(){this.customAnim=new ig.Animation(this.customAnim,.05,[0,1,2,3,4,5]),this.customAnim.currentFrame=0,ig.loadingScreen=this,ig.loadingScreen.animationTimer=window.setInterval("ig.loadingScreen.animate()",100)},animate:function(){this.customAnim.currentFrame<this.customAnim.sequence.length?this.customAnim.currentFrame++:this.customAnim.currentFrame=0,this.customAnim.gotoFrame(this.customAnim.currentFrame)},draw:function(){ig.system.context.clearRect(0,0,480,640),this._drawStatus+=(this.status-this._drawStatus)/5,this.loadingBgImage.draw(0,0),this.loadingBarImage.draw(122,399,0,0,this.loadingBarSize.x*this._drawStatus,this.loadingBarSize.y);var e=_STRINGS.Splash.Loading;ig.system.context.font="bold 20px WorldsAtWar BB",ig.system.context.fillStyle="#ffffff",ig.system.context.textAlign="center",ig.system.context.fillText(e,240,380)}})}),ig.baked=!0,ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1}),ig.Entity.prototype.tweens=[],ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update,ig.Entity.prototype.update=function(){if(this._preTweenUpdate(),0<this.tweens.length){for(var e=[],t=0;t<this.tweens.length;t++)this.tweens[t].update(),this.tweens[t].complete||e.push(this.tweens[t]);this.tweens=e}},ig.Entity.prototype.tween=function(e,t,i){return e=new ig.Tween(this,e,t,i),this.tweens.push(e),e},ig.Entity.prototype.pauseTweens=function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].pause()},ig.Entity.prototype.resumeTweens=function(){for(var e=0;e<this.tweens.length;e++)this.tweens[e].resume()},ig.Entity.prototype.stopTweens=function(e){for(var t=0;t<this.tweens.length;t++)this.tweens[t].stop(e)},ig.Tween=function(e,t,i,s){var n={},o={},a={},r=0,h=!1,l=!1,u=!1;this.duration=i,this.paused=this.complete=!1,this.easing=ig.Tween.Easing.Linear.EaseNone,this.onComplete=!1,this.loop=this.delay=0,this.loopCount=-1,ig.merge(this,s),this.loopNum=this.loopCount,this.chain=function(e){u=e},this.initEnd=function(e,t,i){if("object"!=typeof t[e])i[e]=t[e];else for(subprop in t[e])i[e]||(i[e]={}),this.initEnd(subprop,t[e],i[e])},this.initStart=function(e,t,i,s){if("object"!=typeof i[e])void 0!==t[e]&&(s[e]=i[e]);else for(subprop in i[e])s[e]||(s[e]={}),void 0!==t[e]&&this.initStart(subprop,t[e],i[e],s[e])},this.start=function(){this.paused=this.complete=!1,this.loopNum=this.loopCount,r=0,-1==e.tweens.indexOf(this)&&e.tweens.push(this),l=!0,h=new ig.Timer;for(var i in t)this.initEnd(i,t,o);for(i in o)this.initStart(i,o,e,n),this.initDelta(i,a,e,o)},this.initDelta=function(e,t,i,s){if("object"!=typeof s[e])t[e]=s[e]-i[e];else for(subprop in s[e])t[e]||(t[e]={}),this.initDelta(subprop,t[e],i[e],s[e])},this.propUpdate=function(e,t,i,s,n){if("object"!=typeof i[e])t[e]=void 0!==i[e]?i[e]+s[e]*n:t[e];else for(subprop in i[e])this.propUpdate(subprop,t[e],i[e],s[e],n)},this.propSet=function(e,t,i){if("object"!=typeof t[e])i[e]=t[e];else for(subprop in t[e])i[e]||(i[e]={}),this.propSet(subprop,t[e],i[e])},this.update=function(){if(!l)return!1;if(this.delay){if(h.delta()<this.delay)return;this.delay=0,h.reset()}if(this.paused||this.complete)return!1;var t=1<(t=(h.delta()+r)/this.duration)?1:t,i=this.easing(t);for(property in a)this.propUpdate(property,e,n,a,i);if(1<=t){if(0==this.loopNum||!this.loop)return this.complete=!0,this.onComplete&&this.onComplete(),u&&u.start(),!1;if(this.loop==ig.Tween.Loop.Revert){for(property in n)this.propSet(property,n,e);r=0,h.reset(),-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){t={},i={},ig.merge(t,o),ig.merge(i,n),ig.merge(n,t),ig.merge(o,i);for(property in o)this.initDelta(property,a,e,o);r=0,h.reset(),-1!=this.loopNum&&this.loopNum--}}},this.pause=function(){this.paused=!0,r+=h.delta()},this.resume=function(){this.paused=!1,h.reset()},this.stop=function(e){e&&(this.loop=this.complete=this.paused=!1,r+=i,this.update()),this.complete=!0}},ig.Tween.Loop={Revert:1,Reverse:2},ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}},ig.Tween.Easing.Linear.EaseNone=function(e){return e},ig.Tween.Easing.Quadratic.EaseIn=function(e){return e*e},ig.Tween.Easing.Quadratic.EaseOut=function(e){return-e*(e-2)},ig.Tween.Easing.Quadratic.EaseInOut=function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)},ig.Tween.Easing.Cubic.EaseIn=function(e){return e*e*e},ig.Tween.Easing.Cubic.EaseOut=function(e){return--e*e*e+1},ig.Tween.Easing.Cubic.EaseInOut=function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)},ig.Tween.Easing.Quartic.EaseIn=function(e){return e*e*e*e},ig.Tween.Easing.Quartic.EaseOut=function(e){return-(--e*e*e*e-1)},ig.Tween.Easing.Quartic.EaseInOut=function(e){return 1>(e*=2)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},ig.Tween.Easing.Quintic.EaseIn=function(e){return e*e*e*e*e},ig.Tween.Easing.Quintic.EaseOut=function(e){return(e-=1)*e*e*e*e+1},ig.Tween.Easing.Quintic.EaseInOut=function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},ig.Tween.Easing.Sinusoidal.EaseIn=function(e){return 1-Math.cos(e*Math.PI/2)},ig.Tween.Easing.Sinusoidal.EaseOut=function(e){return Math.sin(e*Math.PI/2)},ig.Tween.Easing.Sinusoidal.EaseInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},ig.Tween.Easing.Exponential.EaseIn=function(e){return 0==e?0:Math.pow(2,10*(e-1))},ig.Tween.Easing.Exponential.EaseOut=function(e){return 1==e?1:1-Math.pow(2,-10*e)},ig.Tween.Easing.Exponential.EaseInOut=function(e){return 0==e?0:1==e?1:1>(e*=2)?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))},ig.Tween.Easing.Circular.EaseIn=function(e){return-(Math.sqrt(1-e*e)-1)},ig.Tween.Easing.Circular.EaseOut=function(e){return Math.sqrt(1- --e*e)},ig.Tween.Easing.Circular.EaseInOut=function(e){return 1>(e/=.5)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},ig.Tween.Easing.Elastic.EaseIn=function(e){var t,i=.1,s=.4;return 0==e?0:1==e?1:(s||(s=.3),!i||1>i?(i=1,t=s/4):t=s/(2*Math.PI)*Math.asin(1/i),-i*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/s))},ig.Tween.Easing.Elastic.EaseOut=function(e){var t,i=.1,s=.4;return 0==e?0:1==e?1:(s||(s=.3),!i||1>i?(i=1,t=s/4):t=s/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin(2*(e-t)*Math.PI/s)+1)},ig.Tween.Easing.Elastic.EaseInOut=function(e){var t,i=.1,s=.4;return 0==e?0:1==e?1:(s||(s=.3),!i||1>i?(i=1,t=s/4):t=s/(2*Math.PI)*Math.asin(1/i),1>(e*=2)?-.5*i*Math.pow(2,10*(e-=1))*Math.sin(2*(e-t)*Math.PI/s):.5*i*Math.pow(2,-10*(e-=1))*Math.sin(2*(e-t)*Math.PI/s)+1)},ig.Tween.Easing.Back.EaseIn=function(e){return e*e*(2.70158*e-1.70158)},ig.Tween.Easing.Back.EaseOut=function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},ig.Tween.Easing.Back.EaseInOut=function(e){return 1>(e*=2)?.5*e*e*(3.5949095*e-2.5949095):.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)},ig.Tween.Easing.Bounce.EaseIn=function(e){return 1-ig.Tween.Easing.Bounce.EaseOut(1-e)},ig.Tween.Easing.Bounce.EaseOut=function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},ig.Tween.Easing.Bounce.EaseInOut=function(e){return.5>e?.5*ig.Tween.Easing.Bounce.EaseIn(2*e):.5*ig.Tween.Easing.Bounce.EaseOut(2*e-1)+.5}}),ig.baked=!0,ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case"true":ig.ua.iPhone=!0,console.log("iPhone mode")}var e=getQueryVariable("webview");if(e)switch(e){case"true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(e=getQueryVariable("debug"))switch(e){case"true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case"stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})}),ig.baked=!0,ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(e,t){this.game=e,this.levels=[],this.currentLevel=0,this.append(t)},loadLevel:function(e){for(var t in ig.sizeHandler.dynamicClickableEntityDivs){var i=ig.domHandler.getElementById("#"+t);ig.domHandler.hide(i)}return this.currentLevel=e,this.game.loadLevel(this.levels[e]),!0},loadLevelWithoutEntities:function(e){return this.currentLevel=e,this.game.loadLevelWithoutEntities(this.levels[e]),!0},append:function(e){return newLevels=[],"object"==typeof e&&(e.constructor===[].constructor?newLevels=e:newLevels[0]=e,this.levels=this.levels.concat(newLevels),!0)},nextLevel:function(){return this.currentLevel+1<this.levels.length&&this.loadLevel(this.currentLevel+1)},previousLevel:function(){return 0<=this.currentLevel-1&&this.loadLevel(this.currentLevel-1)},jumpTo:function(e){var t=null;for(i=0;i<this.levels.length;i++)this.levels[i]==e&&(t=i);return 0<=t&&this.loadLevel(t)},firstLevel:function(){return this.loadLevel(0)},lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})}),ig.baked=!0,ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return ig.Storage.instance?ig.Storage.instance:null},init:function(){ig.Storage.instance=this},isCapable:function(){return void 0!==window.localStorage},isSet:function(e){return null!==this.get(e)},initUnset:function(e,t){null===this.get(e)&&this.set(e,t)},get:function(e){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(e))}catch(t){return window.localStorage.getItem(e)}},getInt:function(e){return~~this.get(e)},getFloat:function(e){return parseFloat(this.get(e))},getBool:function(e){return!!this.get(e)},key:function(e){return this.isCapable()?window.localStorage.key(e):null},set:function(e,t){if(!this.isCapable())return null;try{window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e)}},setHighest:function(e,t){t>this.getFloat(e)&&this.set(e,t)},remove:function(e){if(!this.isCapable())return null;window.localStorage.removeItem(e)},clear:function(){if(!this.isCapable())return null;window.localStorage.clear()}})}),ig.baked=!0,ig.module("plugins.scale").requires("impact.entity").defines(function(){ig.Entity.inject({scale:{x:1,y:1},_offset:{x:0,y:0},_scale:{x:1,y:1},_size:{x:0,y:0},init:function(e,t,i){this.parent(e,t,i),this._offset.x=this.offset.x,this._offset.y=this.offset.y,this._size.x=this.size.x,this._size.y=this.size.y,this.setScale(this.scale.x,this.scale.y)},draw:function(){var e=ig.system.context;e.save(),e.translate(ig.system.getDrawPos(this.pos.x.round()-this.offset.x-ig.game.screen.x),ig.system.getDrawPos(this.pos.y.round()-this.offset.y-ig.game.screen.y)),e.scale(this._scale.x,this._scale.y),this.currentAnim&&this.currentAnim.draw(0,0),e.restore()},setScale:function(e,t){var i=this.size.x,s=this.size.y;this.scale.x=e||this.scale.x,this.scale.y=t||this.scale.y,this._scale.x=this.scale.x/ig.system.scale,this._scale.y=this.scale.y/ig.system.scale,this.offset.x=this._offset.x*this._scale.x,this.offset.y=this._offset.y*this._scale.y,this.size.x=this._size.x*this._scale.x,this.size.y=this._size.y*this._scale.y,this.pos.x+=(i-this.size.x)/2,this.pos.y+=(s-this.size.y)/2}})}),this.START_BRANDING_SPLASH,ig.baked=!0,ig.module("plugins.branding.splash").requires("impact.impact","impact.entity").defines(function(){ig.BrandingSplash=ig.Class.extend({init:function(){ig.game.spawnEntity(EntityBranding,0,0),console.log("spawn branding")}}),EntityBranding=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},splash:new ig.Image(cervezaAguilaPathModule+"branding/splash1.png"),init:function(e,t,i){this.parent(e,t,i),320>=ig.system.width?(this.size.x=320,this.size.y=200):(this.size.x=480,this.size.y=240),this.pos.x=(ig.system.width-this.size.x)/2,this.pos.y=-this.size.y-200,this.endPosY=(ig.system.height-this.size.y)/2,e=this.tween({pos:{y:this.endPosY}},.5,{easing:ig.Tween.Easing.Bounce.EaseIn}),t=this.tween({},2.5,{onComplete:function(){ig.game.director.loadLevel(ig.game.director.currentLevel)}}),e.chain(t),e.start(),this.currentAnim=this.anims.idle},createClickableLayer:function(){console.log("Build clickable layer"),this.checkClickableLayer("branding-splash",_SETTINGS.Branding.Logo.Link,_SETTINGS.Branding.Logo.NewWindow)},doesClickableLayerExist:function(e){for(k in dynamicClickableEntityDivs)if(k==e)return!0;return!1},checkClickableLayer:function(e,t,i){"undefined"==typeof wm&&(this.doesClickableLayerExist(e)?(ig.game.showOverlay([e]),$("#"+e).find("[href]").attr("href",t)):this.createClickableOutboundLayer(e,t,cervezaAguilaPathModule+"media/graphics/misc/invisible.png",i))},createClickableOutboundLayer:function(e,t,i,s){var n=ig.$new("div");if(n.id=e,document.body.appendChild(n),(n=$("#"+n.id)).css("float","left"),n.css("position","absolute"),ig.ua.mobile){var o=window.innerHeight/mobileHeight,a=window.innerWidth/mobileWidth;n.css("left",this.pos.x*a),n.css("top",this.pos.y*o),n.css("width",this.size.x*a),n.css("height",this.size.y*o)}else o=w/2-destW/2,a=h/2-destH/2,console.log(o,a),n.css("left",o+this.pos.x*multiplier),n.css("top",a+this.pos.y*multiplier),n.css("width",this.size.x*multiplier),n.css("height",this.size.y*multiplier);s?n.html("<a target='_blank' href='"+t+"'><img style='width:100%;height:100%' src='"+i+"'></a>"):n.html("<a href='"+t+"'><img style='width:100%;height:100%' src='"+i+"'></a>"),dynamicClickableEntityDivs[e]={},dynamicClickableEntityDivs[e].width=this.size.x*multiplier,dynamicClickableEntityDivs[e].height=this.size.y*multiplier,dynamicClickableEntityDivs[e].entity_pos_x=this.pos.x,dynamicClickableEntityDivs[e].entity_pos_y=this.pos.y},draw:function(){ig.system.context.fillStyle="#ffffff",ig.system.context.fillRect(0,0,ig.system.width,ig.system.height),ig.system.context.fillStyle="#000",ig.system.context.font="12px Arial",ig.system.context.textAlign="left",320>=ig.system.width?ig.system.context.fillText("powered by MarketJS.com",ig.system.width-150,ig.system.height-15):ig.system.context.fillText("powered by MarketJS.com",ig.system.width-160,ig.system.height-15),this.parent(),this.splash&&ig.system.context.drawImage(this.splash.data,0,0,this.splash.data.width,this.splash.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y)}})}),this.END_BRANDING_SPLASH,ig.baked=!0,ig.module("game.entities.buttons.button").requires("impact.entity","plugins.data.vector").defines(function(){EntityButton=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new Vector2(48,48),fillColor:null,zIndex:95e3,init:function(e,t,i){this.parent(e,t,i),!ig.global.wm&&!isNaN(i.zIndex)&&(this.zIndex=i.zIndex),e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),i=Math.floor(256*Math.random()),this.fillColor="rgba("+e+","+i+","+t+",1)"},clicked:function(){throw"no implementation on clicked()"},clicking:function(){throw"no implementation on clicking()"},released:function(){throw"no implementation on released()"}})}),ig.baked=!0,ig.module("plugins.clickable-div-layer").requires("plugins.data.vector").defines(function(){ClickableDivLayer=ig.Class.extend({pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:cervezaAguilaPathModule+"media/graphics/misc/invisible.png",init:function(e){this.pos=new Vector2(e.pos.x,e.pos.y),this.size=new Vector2(e.size.x,e.size.y);var t="more-games",i="www.google.com",s=!1;e.div_layer_name&&(t=e.div_layer_name),e.link&&(i=e.link),e.newWindow&&(s=e.newWindow),this.createClickableLayer(t,i,s)},createClickableLayer:function(e,t,i){this.identifier=e;var s=ig.domHandler.getElementById("#"+e);s?(ig.domHandler.show(s),ig.domHandler.attr(s,"href",t)):this.createClickableOutboundLayer(e,t,this.invisImagePath,i)},update:function(e,t){this.pos.x===e&&this.pos.y===t||(ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y)},createClickableOutboundLayer:function(e,t,i,s){var n=ig.domHandler.create("div");ig.domHandler.attr(n,"id",e);var o=ig.domHandler.create("a");if(s?(ig.domHandler.attr(o,"href",t),ig.domHandler.attr(o,"target","_blank")):ig.domHandler.attr(o,"href",t),t=ig.domHandler.create("img"),ig.domHandler.css(t,{width:"100%",height:"100%"}),ig.domHandler.attr(t,"src",i),i=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y),ig.ua.mobile){s=Math.floor(this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var a=Math.floor(this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",r=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";i=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px"}else s=ig.domHandler.getElementById("#canvas"),s=ig.domHandler.getOffsets(s),a=s.top,s=Math.floor(s.left+this.pos.x*i)+"px",a=Math.floor(a+this.pos.y*i)+"px",r=Math.floor(this.size.x*i)+"px",i=Math.floor(this.size.y*i)+"px";ig.domHandler.css(n,{float:"left",position:"absolute",left:s,top:a,width:r,height:i,"z-index":3}),ig.domHandler.addEvent(n,"mousemove",ig.input.mousemove.bind(ig.input),!1),ig.domHandler.appendChild(o,t),ig.domHandler.appendChild(n,o),ig.domHandler.appendToBody(n),ig.sizeHandler.dynamicClickableEntityDivs[e]={},ig.sizeHandler.dynamicClickableEntityDivs[e].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[e].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[e].entity_pos_x=this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[e].entity_pos_y=this.pos.y}})}),ig.baked=!0,ig.module("game.entities.buttons.button-branding-logo").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonBrandingLogo=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet(cervezaAguilaPathModule+"branding/logo.png",_SETTINGS.Branding.Logo.Width,_SETTINGS.Branding.Logo.Height),zIndex:10001,size:{x:64,y:66},clickableLayer:null,link:null,newWindow:!1,div_layer_name:"branding-logo",name:"brandinglogo",init:function(e,t,i){if(this.parent(e,t,i),!ig.global.wm){if("undefined"==typeof wm){if(!_SETTINGS.Branding.Logo.Enabled)return void this.kill();this.size.x=_SETTINGS.Branding.Logo.Width,this.size.y=_SETTINGS.Branding.Logo.Height,this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,i&&i.centralize&&(this.pos.x=ig.system.width/2-this.size.x/2,console.log("centralize true ... centering branded logo ...")),_SETTINGS.Branding.Logo.LinkEnabled&&(this.link=_SETTINGS.Branding.Logo.Link,this.newWindow=_SETTINGS.Branding.Logo.NewWindow,this.clickableLayer=new ClickableDivLayer(this))}this.div_layer_name=i.div_layer_name?i.div_layer_name:"branding-logo"}},show:function(){var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(e)},hide:function(){var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(e)},clicked:function(){},clicking:function(){},released:function(){}})}),ig.baked=!0,ig.module("game.entities.branding-logo-placeholder").requires("impact.entity","game.entities.buttons.button-branding-logo").defines(function(){EntityBrandingLogoPlaceholder=ig.Entity.extend({gravityFactor:0,size:{x:32,y:32},_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",init:function(e,t,i){if(this.parent(e,t,i),i)switch(console.log("settings found ... using that div layer name"),e=i.div_layer_name,console.log("settings.centralize:",i.centralize),i.centralize){case"true":console.log("centralize true"),centralize=!0;break;case"false":console.log("centralize false"),centralize=!1;break;default:console.log("default ... centralize false"),centralize=!1}else e="branding-logo",centralize=!1;if("undefined"==typeof wm){if(_SETTINGS.Branding.Logo.Enabled)try{ig.game.spawnEntity(EntityButtonBrandingLogo,this.pos.x,this.pos.y,{div_layer_name:e,centralize:centralize})}catch(e){console.log(e)}this.kill()}}})}),ig.baked=!0,ig.module("game.entities.buttons.button-more-games").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonMoreGames=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/moregames.png",49,50),size:{x:49,y:50},zIndex:750,clickableLayer:null,link:null,newWindow:!1,div_layer_name:"more-games",name:"moregames",init:function(e,t,i){this.parent(e,t,i),ig.global.wm||(this.div_layer_name=i.div_layer_name?i.div_layer_name:"more-games",_SETTINGS.MoreGames.Enabled?(this.anims.idle=new ig.Animation(this.logo,0,[0],!0),this.currentAnim=this.anims.idle,_SETTINGS.MoreGames.Link&&(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=_SETTINGS.MoreGames.NewWindow),this.clickableLayer=new ClickableDivLayer(this)):this.kill())},show:function(){var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.show(e)},hide:function(){var e=ig.domHandler.getElementById("#"+this.div_layer_name);ig.domHandler.hide(e)},clicked:function(){},clicking:function(){},released:function(){}})}),ig.baked=!0,ig.module("game.entities.opening-shield").requires("impact.entity").defines(function(){EntityOpeningShield=ig.Entity.extend({size:{x:48,y:48},move:0,mIconAnim:0,shieldAnim:0,titleAnim:0,shieldImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/opening/shield.png"),mIconImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/opening/m_icon.png"),titleImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/opening/title.png"),init:function(e,t,i){this.parent(e,t,i)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(.1);try{ig.soundHandler.playSound(ig.soundHandler.SOUNDID.openingSound)}catch(e){console.log(e)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent(),this.updateOriginalShieldOpening()},draw:function(){this.parent(),ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawOriginalShieldOpening())},updateOriginalShieldOpening:function(){this.initTimer&&0<this.initTimer.delta()&&(this.initTimer=null,this.sheildTimer=new ig.Timer(.05)),this.sheildTimer&&0<this.sheildTimer.delta()&&(3>this.shieldAnim?(this.shieldAnim++,this.sheildTimer.reset()):(this.sheildTimer=null,this.moveTimer=new ig.Timer(.001),this.mIconTimer=new ig.Timer(.05),this.titleTimer=new ig.Timer(.15))),this.moveTimer&&0<this.moveTimer.delta()&&(this.move+=.3,this.moveTimer.reset()),this.mIconTimer&&0<this.mIconTimer.delta()&&(12>this.mIconAnim?(this.mIconAnim++,this.moveTimer.reset()):this.mIconTimer=null),this.titleTimer&&0<this.titleTimer.delta()&&(11>this.titleAnim?(this.titleAnim++,this.titleTimer.reset()):(this.titleTimer=null,this.nextLevelTimer=new ig.Timer(1))),this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawOriginalShieldOpening:function(){if(this.moveTimer){var e=ig.system.context;e.save();var t=ig.system.width/2,i=ig.system.height/2;e.translate(t,i),e.rotate(this.move*Math.PI/180),e.beginPath(),e.moveTo(0,0);for(var s=0,n=1;48>=n;n+=1)e.lineTo(0+800*Math.cos(2*n*Math.PI/48),0+800*Math.sin(2*n*Math.PI/48)),s++,2==s&&(s=0,e.lineTo(0,0));e.translate(-t,-i),(t=e.createRadialGradient(t,i,100,t,i,250)).addColorStop(0,"rgba(255,255,255,0.1)"),t.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=t,e.fill(),e.restore()}this.shieldImage.drawTile(ig.system.width/2-91,0-(768-ig.system.height)/2,this.shieldAnim,182,768),this.moveTimer&&(this.mIconImage.drawTile(ig.system.width/2-96,ig.system.height/2-70,this.mIconAnim,166,160),this.titleImage.drawTile(ig.system.width/2-204,ig.system.height/2+100,this.titleAnim,409,76)),ig.system.context.globalAlpha=1}})}),ig.baked=!0,ig.module("game.entities.opening-kitty").requires("impact.entity").defines(function(){EntityOpeningKitty=ig.Entity.extend({size:{x:48,y:48},kittyAnim:-1,kittyImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/opening/kitty.png"),kittyTitleImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/opening/kittytitle.png"),soundKey:"kittyopeningSound",init:function(e,t,i){this.parent(e,t,i)},ready:function(){if(!ig.wm)if(_SETTINGS.DeveloperBranding.Splash.Enabled){this.initTimer=new ig.Timer(.1);try{ig.soundHandler.sfxPlayer.play(this.soundKey)}catch(e){console.log(e)}}else ig.game.director.nextLevel(),ig.system.context.globalAlpha=1,this.kill()},update:function(){this.parent(),this.updateKittyOpening()},draw:function(){this.parent(),ig.global.wm||(this.nextLevelTimer&&0>this.nextLevelTimer.delta()&&(ig.system.context.globalAlpha=-this.nextLevelTimer.delta()),this.drawKittyOpening())},updateKittyOpening:function(){this.initTimer&&0<this.initTimer.delta()&&(this.initTimer=null,this.kittyTimer=new ig.Timer(.15)),this.kittyTimer&&0<this.kittyTimer.delta()&&(7>this.kittyAnim?(this.kittyAnim++,this.kittyTimer.reset()):(this.kittyTimer=null,this.nextLevelTimer=new ig.Timer(2))),this.nextLevelTimer&&0<this.nextLevelTimer.delta()&&(this.nextLevelTimer=null,ig.game.director.nextLevel(),ig.system.context.globalAlpha=1)},drawKittyOpening:function(){var e=ig.system.context.createLinearGradient(0,0,0,ig.system.height);e.addColorStop(0,"#ffed94"),e.addColorStop(1,"#ffcd85"),ig.system.context.fillStyle=e,ig.system.context.fillRect(0,0,ig.system.width,ig.system.height),0<=this.kittyAnim&&(this.kittyImage.drawTile(ig.system.width/2-this.kittyImage.width/8,ig.system.height/2-this.kittyImage.height/4,this.kittyAnim,218,325),this.kittyTitleImage.drawTile(ig.system.width/2-this.kittyTitleImage.width/2,ig.system.height/2+this.kittyImage.height/4+10,this.kittyAnim,380,37)),ig.system.context.globalAlpha=1}})}),ig.baked=!0,ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,isFirstPressed:!1,isPressed:!1,isReleased:!1,isHovering:!1,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:!0,zIndex:5e3,check:function(e){this.objectArray.push(e)},clickObject:function(e){this.isFirstPressed&&"function"==typeof e.clicked&&(e.clicked(),this.addToClickedObjectList(e)),this.isPressed&&!this.isReleased&&"function"==typeof e.clicking&&e.clicking(),this.isReleased&&"function"==typeof e.released&&(e.released(),this.removeFromClickedObjectList(e))},refreshPos:function(){this.pos=ig.game.io.getClickPos()},update:function(){this.parent(),this.refreshPos();var e=null,t=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>t&&(t=this.objectArray[a].zIndex,e=this.objectArray[a]);if(null!=e)null!=this.hoveringItem?this.hoveringItem!=e&&("function"==typeof this.hoveringItem.leave&&this.hoveringItem.leave(),"function"==typeof e.over&&e.over()):"function"==typeof e.over&&e.over(),this.hoveringItem=e,this.clickObject(e),this.objectArray=[];else if(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.leave&&(this.hoveringItem.leave(),this.hoveringItem=null),this.isReleased){for(e=0;e<this.clickedObjectList.length;e++)t=this.clickedObjectList[e],"function"==typeof t.releasedOutside&&t.releasedOutside();this.clickedObjectList=[]}this.isFirstPressed=ig.input.pressed("click"),this.isReleased=ig.input.released("click"),this.isPressed=ig.input.state("click")},addToClickedObjectList:function(e){this.clickedObjectList.push(e)},removeFromClickedObjectList:function(e){for(var t=[],i=0;i<this.clickedObjectList.length;i++){var s=this.clickedObjectList[i];s!=e&&t.push(s)}this.clickedObjectList=t}})}),ig.baked=!0,ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1e3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(e,t,i){this.parent(e,t,i)}})}),ig.baked=!0,ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(e,t,i){this.parent(e,t,i),this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(e){for(k in dynamicClickableEntityDivs)if(k==e)return!0;return!1},checkClickableLayer:function(e,t,i){"undefined"==typeof wm&&(this.doesClickableLayerExist(e)?(ig.game.showOverlay([e]),$("#"+e).find("[href]").attr("href",t)):this.createClickableOutboundLayer(e,t,cervezaAguilaPathModule+"media/graphics/misc/invisible.png",i))},createClickableOutboundLayer:function(e,t,i,s){var n=ig.$new("div");n.id=e,document.body.appendChild(n),$("#"+n.id).css("float","left"),$("#"+n.id).css("width",this.size.x*multiplier),$("#"+n.id).css("height",this.size.y*multiplier),$("#"+n.id).css("position","absolute");var o=w/2-destW/2,a=h/2-destH/2;w==mobileWidth?($("#"+n.id).css("left",this.pos.x),$("#"+n.id).css("top",this.pos.y)):($("#"+n.id).css("left",o+this.pos.x*multiplier),$("#"+n.id).css("top",a+this.pos.y*multiplier)),s?$("#"+n.id).html("<a target='_blank' href='"+t+"'><img style='width:100%;height:100%' src='"+i+"'></a>"):$("#"+n.id).html("<a href='"+t+"'><img style='width:100%;height:100%' src='"+i+"'></a>"),dynamicClickableEntityDivs[e]={},dynamicClickableEntityDivs[e].width=$("#"+n.id).width(),dynamicClickableEntityDivs[e].height=$("#"+n.id).height(),dynamicClickableEntityDivs[e].entity_pos_x=this.pos.x,dynamicClickableEntityDivs[e].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0,this.dehoverOthers()},dehoverOthers:function(){var e=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<e.length;i++)e[i]!=this&&(e[i].isHovering=!1)},deselectOthers:function(){var e=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<e.length;i++)e[i]!=this&&(e[i].isSelected=!1)},update:function(){this.parent(),this.canSelectTimer&&0<this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})}),ig.baked=!0,ig.module("game.entities.world").requires("impact.entity").defines(function(){EntityWorld=ig.Entity.extend({size:{x:480,y:640},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/tileset/road.png",480,640),coinSpawnPos:[160,235,300,385,450,550],name:"world",vehicleArray:"car1 car2 car3 car4 car5 car6 car7 car8 car9 car10 car11 car12 car13 car14".split(" "),vehicleIndex:0,carLaneOne:null,carLaneTwo:null,carLaneThree:null,carLaneFour:null,carLaneFive:null,carLaneSix:null,carSpeedOne:null,carSpeedTwo:null,carSpeedThree:null,carSpeedFour:null,carSpeedFive:null,carSpeedSix:null,treeArray:"building3 tree1 tree3 tree4 suporter1 suporter2 building1 building2".split(" "),treeGridStart:[40,80,120,160,200,240],gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("background",1,[0]),this.timerOne=new ig.Timer(1*Math.random()+0),this.timerTwo=new ig.Timer(1*Math.random()+0),this.timerThree=new ig.Timer(1*Math.random()+0),this.timerFour=new ig.Timer(1*Math.random()+0),this.timerFive=new ig.Timer(1*Math.random()+0),this.timerSix=new ig.Timer(1*Math.random()+0),this.vehicleIndex=Math.floor(15*Math.random())+0,this.carLaneOne=this.vehicleArray[this.vehicleIndex],this.carSpeedOne=3>=Math.floor(this.timerOne.target)?Math.floor(101*Math.random())+200:Math.floor(301*Math.random())+100,this.vehicleIndex=Math.floor(15*Math.random())+0,this.carLaneTwo=this.vehicleArray[this.vehicleIndex],this.carSpeedTwo=3>=Math.floor(this.timerTwo.target)?Math.floor(101*Math.random())+200:Math.floor(301*Math.random())+100,this.vehicleIndex=Math.floor(15*Math.random())+0,this.carLaneThree=this.vehicleArray[this.vehicleIndex],this.carSpeedThree=3>=Math.floor(this.timerThree.target)?Math.floor(101*Math.random())+200:Math.floor(301*Math.random())+100,this.vehicleIndex=Math.floor(15*Math.random())+0,this.carLaneFour=this.vehicleArray[this.vehicleIndex],this.carSpeedFour=3>=Math.floor(this.timerFour.target)?Math.floor(101*Math.random())+200:Math.floor(301*Math.random())+100,this.vehicleIndex=Math.floor(15*Math.random())+0,this.carLaneFive=this.vehicleArray[this.vehicleIndex],this.carSpeedFive=3>=Math.floor(this.timerFive.target)?Math.floor(101*Math.random())+200:Math.floor(301*Math.random())+100,this.vehicleIndex=Math.floor(15*Math.random())+0,this.carLaneSix=this.vehicleArray[this.vehicleIndex],this.carSpeedSix=3>=Math.floor(this.timerSix.target)?Math.floor(101*Math.random())+200:Math.floor(301*Math.random())+100,this.puddleProbabilty=Math.floor(3*Math.random())+1,1==this.puddleProbabilty&&ig.game.spawnEntity(EntityPuddle,this.puddlePositionX(),this.puddlePositionY()),ig.game.getTutorial(),1==ig.game.showTutorial?(ig.game.spawnEntity(EntityTutorial,220,200),this.tutorialLane=!0):this.tutorialLane=!1,this.platformSpawn=!1},puddlePositionY:function(){return this.randPuddle=Math.floor(3*Math.random())+1,1==this.randPuddle?Math.floor(101*Math.random())+180-Math.abs(this.pos.y):2==this.randPuddle?Math.floor(66*Math.random())+400-Math.abs(this.pos.y):3==this.randPuddle?Math.floor(21*Math.random())+560-Math.abs(this.pos.y):void 0},puddlePositionX:function(){return Math.floor(361*Math.random())+60},update:function(){if(1!=ig.game.gamePause){if(0==this.platformSpawn){var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&-615<=this.pos.y-e.pos.y&&(ig.game.spawnEntity(EntityPlatform,480,this.pos.y+75),this.platformSpawn=!0)}this.init&&(this.treeSpawn(),ig.game.spawnEntity(EntityCoin,Math.floor(381*Math.random())+50,this.pos.y+this.coinSpawnPos[Math.floor(Math.random()*this.coinSpawnPos.length)],{zIndex:99}),this.init=!1),0<=this.timerOne.delta()&&(ig.game.spawnEntity(EntityVehicle,-200,this.pos.y+170,{xdir:1,zIndex:100,flip:!1,vehicleName:this.carLaneOne,speed:this.carSpeedOne}),this.timerOne=new ig.Timer(3.5*Math.random()+1.5)),0<=this.timerTwo.delta()&&(ig.game.spawnEntity(EntityVehicle,480,this.pos.y+235,{xdir:-1,zIndex:200,vehicleName:this.carLaneTwo,speed:this.carSpeedTwo}),this.timerTwo=new ig.Timer(3.5*Math.random()+1.5)),0<=this.timerThree.delta()&&(ig.game.spawnEntity(EntityVehicle,-200,this.pos.y+298,{xdir:1,zIndex:300,flip:!1,vehicleName:this.carLaneThree,speed:this.carSpeedThree}),this.timerThree=new ig.Timer(3.5*Math.random()+1.5)),0<=this.timerFour.delta()&&(ig.game.spawnEntity(EntityVehicle,480,this.pos.y+390,{xdir:-1,zIndex:400,vehicleName:this.carLaneFour,speed:this.carSpeedFour}),this.timerFour=new ig.Timer(3.5*Math.random()+1.5)),0<=this.timerFive.delta()&&(ig.game.spawnEntity(EntityVehicle,-200,this.pos.y+455,{xdir:1,zIndex:500,flip:!1,vehicleName:this.carLaneFive,speed:this.carSpeedFive}),this.timerFive=new ig.Timer(3.5*Math.random()+1.5)),0<=this.timerSix.delta()&&(0==this.tutorialLane&&ig.game.spawnEntity(EntityVehicle,480,this.pos.y+545,{xdir:-1,zIndex:600,vehicleName:this.carLaneSix,speed:this.carSpeedSix}),this.timerSix=new ig.Timer(3.5*Math.random()+1.5)),ig.game.sortEntitiesDeferred(),(e=ig.game.getEntitiesByType(EntityPlayer)[0])&&-400>=e.pos.y-this.pos.y&&this.kill(),this.parent()}},treeSpawn:function(){this.group=1,1==this.group?this.firstGroup=!0:2==this.group&&(this.firstGroup=!1),ig.game.spawnEntity(EntityFoliage,this.treeGridStart[Math.floor(Math.random()*this.treeGridStart.length)],this.firstGroup?this.pos.y+133:this.pos.y+90,{zIndex:50,group:this.group,numOfTrees:Math.floor(3*Math.random())+1}),ig.game.spawnEntity(EntityFoliage,this.treeGridStart[Math.floor(Math.random()*this.treeGridStart.length)],this.firstGroup?this.pos.y+355:this.pos.y+310,{zIndex:350,group:this.group,numOfTrees:Math.floor(3*Math.random())+1}),0==ig.game.showTutorial?ig.game.spawnEntity(EntityFoliage,this.treeGridStart[Math.floor(Math.random()*this.treeGridStart.length)],this.firstGroup?this.pos.y+510:this.pos.y+460,{zIndex:550,group:this.group,numOfTrees:Math.floor(3*Math.random())+1}):ig.game.spawnEntity(EntityFoliage,this.treeGridStart[2],this.firstGroup?this.pos.y+510:this.pos.y+460,{zIndex:550,group:this.group,numOfTrees:3}),this.group=2,this.treeName=this.treeArray[Math.floor(Math.random()*this.treeArray.length)],ig.game.spawnEntity(EntityFoliage,this.treeGridStart[Math.floor(Math.random()*this.treeGridStart.length)],this.firstGroup?this.pos.y-15+55:this.pos.y+460,{zIndex:700,group:this.group,numOfTrees:Math.floor(3*Math.random())+1,treeName:this.treeName})},kill:function(){this.parent();var e=ig.game.getEntitiesByType(EntityPuddle)[0];e&&e.kill()}}),EntityPuddle=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/puddle.png",52,29),zIndex:0,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("puddle",1,[0]),this.currentAnim=this.anims.puddle}}),EntityTutorial=ig.Entity.extend({mobileAnimSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/tutorial.png",45,74),desktopMAnimSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mouse.png",47,96),zIndex:99999,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),ig.ua.mobile?(this.anims.tap=new ig.Animation(this.mobileAnimSheet,.3,[0,1]),this.anims.idle=new ig.Animation(this.mobileAnimSheet,1,[1])):(this.anims.tap=new ig.Animation(this.desktopMAnimSheet,.3,[0,1]),this.anims.idle=new ig.Animation(this.desktopMAnimSheet,1,[1]),ig.game.spawnEntity(EntityKeyboardTutorial,170,360)),this.currentAnim=this.anims.tap,this.timer=new ig.Timer},update:function(){if(1!=ig.game.gamePause){if(this.parent(),ig.input.released("click")||ig.input.released("up")){var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&1==e.tutforward&&(this.currentAnim=this.anims.idle,e=ig.game.getEntitiesByType(EntityKeyboardTutorial)[0])&&(e.currentAnim=e.anims.side)}this.currentAnim==this.anims.idle&&(this.pos.x=60*Math.sin(5*this.timer.delta())+220,(e=ig.game.getEntitiesByType(EntityPlayer)[0])&&1==e.tutside)&&(this.currentAnim.alpha-=.05,(e=ig.game.getEntitiesByType(EntityKeyboardTutorial)[0])&&(e.currentAnim.alpha-=.05,0>=e.currentAnim.alpha&&e.kill()),0>=this.currentAnim.alpha&&(ig.game.showTutorial=!1,ig.game.saveTutorial(),this.kill()))}},draw:function(){if(this.parent(),!ig.ua.mobile){var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&0==e.tutside&&(this.context=ig.system.context,this.context.font="45pt WorldsAtWar BB",this.context.fillStyle="#ffffff",this.context.textAlign="center",this.context.fillText(_STRINGS.PetHop.Or,244,350))}}}),EntityKeyboardTutorial=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/arrow.png",150,103),zIndex:99999,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("up",.3,[0,1]),this.addAnim("side",.3,[0,2]),this.currentAnim=this.anims.up}})}),ig.baked=!0,ig.module("game.entities.player").requires("impact.entity").defines(function(){EntityPlayer=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/characters.png",45.2,55),size:{x:35,y:10},offset:{x:10,y:45},type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.B,halfPointPos:null,worldSpawnPos:null,playerMidPos:null,zIndex:700,playerPos:615,onRiver:!1,treeBlock:!1,platformSpawnOffset:0,score:0,character:"rabbit",gravityFactor:0,playerForwardRow:[0,-40,-90,-140,-190,-240,-290,-340,-415,-465,-505,-585],pauseGameRect:{x:445,y:600,w:25,h:25},tscore:0,init:function(e,t,i){this.parent(e,t,i),ig.game.spawnEntity(EntityPointer,this.pos.x,this.pos.y),this.pointer=ig.game.getEntitiesByType(EntityPointer)[0],this.addAnim("rabbitidle",1,[0]),this.addAnim("pandaidle",1,[1]),this.addAnim("chickenidle",1,[2]),this.addAnim("tigeridle",1,[3]),this.addAnim("pigidle",1,[4]),ig.game.getActiveCharacter(),this.character=ig.game.character,this.characterIdle(),this.halfPointPos=ig.system.height/2,this.worldSpawnPos=-640,this.playerMidPos=this.pos.y,this.initialScreen=ig.game.screen.y,this.shadowOffset=this.targetScreen=0,this.shadowTargetY=612,this.shadowTargetX=240+this.shadowOffset,ig.game.spawnEntity(EntityShadow,240+this.shadowOffset,612),ig.game.getHighScore(),this.grass=this.road=this.water=this.squashSprite=this.scoreStop=this.leftBlocked=this.rightBlocked=this.forwardBlocked=this.moveDown=this.moveRight=this.moveLeft=!1,ig.game.getTutorial(),this.tutside=1==ig.game.showTutorial?this.tutforward=!1:this.tutforward=!0,ig.game.getSoundState(),0==ig.game.soundMute?ig.soundHandler.unmuteAll(!0):ig.soundHandler.muteAll(!0),this.clearSwipe()},aabbCheck:function(e,t){return e.x+e.w>t.x&&e.x<t.x+t.w&&e.y+e.h>t.y&&e.y<t.y+t.h},checkPauseClick:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var e={};e.x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.pauseGameRect)&&0==ig.game.gamePause&&(ig.game.spawnEntity(EntityPausecontrol,0,0),ig.soundHandler.muteAll(!0),ig.Timer.timeScale=0,ig.game.gamePause=!0)}},update:function(){if(this.checkPauseClick(),1!=ig.game.gamePause){if((this.pos.x<-this.size.x||this.pos.x>480-this.size.x/2)&&this.kill(),320>this.pos.y&&Math.ceil(this.pos.y)==this.playerMidPos&&(this.targetScreen=-Math.abs(320-this.pos.y),this.initialScreen>this.targetScreen&&(ig.game.screen.y=this.lerp(this.initialScreen,this.targetScreen,.1),this.initialScreen=ig.game.screen.y)),this.swipeControls(),this.keyboardControls(),ig.input.pressed("up")||ig.input.pressed("click"),(ig.input.released("up")||ig.input.released("click"))&&0==this.moveRight&&0==this.moveLeft&&0==this.moveDown){if(0==this.forwardBlocked){if(this.hopPositionForward(),615>this.pos.y)for(var e=0;5>e;e++)ig.game.spawnEntity(EntityParticle,this.pos.x+10,this.pos.y,{zIndex:this.zIndex});this.squashSprite=!0}this.pos.y<this.halfPointPos&&(ig.game.spawnEntity(EntityWorld,0,this.worldSpawnPos,{zIndex:-1e3}),this.worldSpawnPos-=640,this.platformSpawnOffset-=640,this.halfPointPos-=ig.system.height),this.pos.y<this.playerMidPos&&(0==this.scoreStop&&(this.playerMidPos=this.pos.y,this.score++),this.score>ig.game.highScore&&(ig.game.highScore=this.score,ig.game.saveHighScore())),this.xDiff=0,ig.soundHandler.sfxPlayer.play("jump")}if(ig.input.pressed("click")||ig.input.pressed("left"),(ig.input.released("click")||ig.input.released("left"))&&1==this.moveLeft&&0==this.leftBlocked&&1==this.tutforward)for(15<this.pos.x&&(this.xDiff=-40,this.pos.x-=40,this.squashSprite=!0),this.yDiff=Math.floor(Math.abs(this.pos.y-this.playerPos)),ig.soundHandler.sfxPlayer.play("jump"),e=0;5>e;e++)ig.game.spawnEntity(EntityParticle,this.pos.x+10,this.pos.y,{zIndex:this.zIndex});if(ig.input.pressed("click")||ig.input.pressed("right"),(ig.input.released("click")||ig.input.released("right"))&&1==this.moveRight&&0==this.rightBlocked&&1==this.tutforward)for(this.pos.x<ig.system.width-(2*this.size.x-10)&&(this.xDiff=40,this.pos.x+=40,this.squashSprite=!0),this.yDiff=Math.floor(Math.abs(this.pos.y-this.playerPos)),ig.soundHandler.sfxPlayer.play("jump"),e=0;5>e;e++)ig.game.spawnEntity(EntityParticle,this.pos.x+10,this.pos.y,{zIndex:this.zIndex});this.shadowTargetX=this.pos.x+this.shadowOffset,(e=ig.game.getEntitiesByType(EntityShadow)[0])&&(e.pos.y=this.lerp(e.pos.y,this.shadowTargetY,.5),e.pos.x=this.lerp(e.pos.x,this.shadowTargetX,1),1==this.squashSprite&&615>=this.pos.y?(this.setScale(.85,1.15),this.lerpTime=new ig.Timer):(this.scale.x=this.lerp(this.scale.x,1,.075),this.scale.y=this.lerp(this.scale.y,1,.075),this.setScale(this.scale.x,this.scale.y)),1==this.squashSprite&&615>=this.pos.y?(this.setScale(.85,1.15),this.lerpTime=new ig.Timer):(this.scale.x=this.lerp(this.scale.x,1,.075),this.scale.y=this.lerp(this.scale.y,1,.075),this.setScale(this.scale.x,this.scale.y)),this.lerpTime&&.01<this.lerpTime.delta()&&.1>this.lerpTime.delta()?this.setScale(1.15,.85):(this.scale.x=this.lerp(this.scale.x,1,.075),this.scale.y=this.lerp(this.scale.y,1,.075),this.setScale(this.scale.x,this.scale.y))),this.calculateZIndex(),this.moveDown=this.moveLeft=this.moveRight=this.scoreStop=this.rightBlocked=this.leftBlocked=this.forwardBlocked=this.squashSprite=!1,this.parent(),this.tscore!=this.score&&(this.tscore=this.score,0==this.score%10&&0<this.score&&(ig.game.addspeed+=.25))}},setScale:function(e,t){this.scale.x=e||this.scale.x,this.scale.y=t||this.scale.y,this._scale.x=this.scale.x/ig.system.scale,this._scale.y=this.scale.y/ig.system.scale,"rabbit"==this.character?this.charOffset=0:"chicken"==this.character?this.charOffset=7:"panda"==this.character?this.charOffset=3:"pig"==this.character?this.charOffset=13:"tiger"==this.character&&(this.charOffset=10),this.offset.x=.5*-this.size.x+.5*this._scale.x*this.size.x+this.charOffset,this.offset.y=this._offset.y*this._scale.y},closestPlayerPosition:function(e,t){var i,s=0,n=1e3;for(s in e){var o=Math.abs(Math.round(t)-e[s]);o<n&&(n=o,i=e[s])}return i},swipeControls:function(){ig.input.pressed("click")?(this.swipeStartX=ig.input.mouse.x,this.swipeStartY=ig.input.mouse.y):ig.input.released("click")&&(this.swipeEndX=ig.input.mouse.x,this.swipeEndY=ig.input.mouse.y,this.swipeStartX||null!=this.swipeStartY)&&(this.swipe=!0),1==this.swipe&&(50<this.swipeEndX-this.swipeStartX?(this.moveRight=!0,1==this.tutforward&&(this.tutside=!0)):this.swipeStartX-50>this.swipeEndX?(this.moveLeft=!0,1==this.tutforward&&(this.tutside=!0)):50<this.swipeEndY-this.swipeStartY&&(this.moveDown=!0),this.clearSwipe())},keyboardControls:function(){ig.input.released("right")?(this.moveRight=!0,1==this.tutforward&&(this.tutside=!0)):ig.input.released("left")?(this.moveLeft=!0,1==this.tutforward&&(this.tutside=!0)):ig.input.released("down")&&(this.moveDown=!0)},clearSwipe:function(){this.swipeEndY=this.swipeEndX=this.swipeStartY=this.swipeStartX=null,this.swipe=!1},hopPositionForward:function(){700!=this.pos.y&&(this.pos.y=this.playerPos- -this.closestPlayerPosition(this.playerForwardRow,this.pos.y-this.playerPos)),this.pos.y=Math.floor(this.pos.y),700==this.pos.y?(this.pos.y=this.playerPos,this.shadowTargetY=this.pos.y):this.pos.y==this.playerPos?(this.pos.y=this.playerPos-40,this.shadowTargetY=this.pos.y,this.yDiff=40):this.pos.y==this.playerPos-40?(this.pos.y=this.playerPos-90,this.shadowTargetY=this.pos.y):this.pos.y==this.playerPos-90?(this.pos.y=this.playerPos-140,this.shadowTargetY=this.pos.y):this.pos.y==this.playerPos-140?(this.pos.y=this.playerPos-190,this.shadowTargetY=this.pos.y,this.yDiff=190):this.pos.y==this.playerPos-190?(this.pos.y=this.playerPos-240,this.shadowTargetY=this.pos.y):this.pos.y==this.playerPos-240?(this.pos.y=this.playerPos-290,this.shadowTargetY=this.pos.y):this.pos.y==this.playerPos-290?(this.pos.y=this.playerPos-340,this.shadowTargetY=this.pos.y):this.pos.y==this.playerPos-340?(this.pos.y=this.playerPos-415,this.shadowTargetY=this.pos.y,this.yDiff=415):this.pos.y==this.playerPos-415?(this.pos.y=this.playerPos-465,this.shadowTargetY=this.pos.y):this.pos.y==this.playerPos-465?(this.pos.y=this.playerPos-505,this.onRiver=!0,this.shadowTargetY=this.pos.y,this.yDiff=505):this.pos.y==this.playerPos-505?(this.pos.y=this.playerPos-585,this.onRiver=!1,this.shadowTargetY=this.pos.y,this.pos.x=40*Math.round(Math.round(this.pos.x/40))):this.pos.y==this.playerPos-585&&(this.pos.y=this.playerPos-640,this.shadowTargetY=this.playerPos=this.pos.y),this.tutforward=!0},calculateZIndex:function(){this.pos.y==this.playerPos-40||this.pos.y==this.playerPos?this.zIndex=650:this.pos.y==this.playerPos-90?this.zIndex=525:this.pos.y==this.playerPos-190?this.zIndex=450:this.pos.y==this.playerPos-240?this.zIndex=325:this.pos.y==this.playerPos-340?this.zIndex=150:this.pos.y==this.playerPos-415?this.zIndex=75:this.pos.y==this.playerPos-465||this.pos.y==this.playerPos-505?this.zIndex=25:this.pos.y==this.playerPos-585&&(this.zIndex=15)},kill:function(){ig.game.restartEnabled=!0,ig.game.spawnEntity(EntityEndcontrol,0,0,{character:this.character,score:this.score}),ig.game.saveCoinStats();var e=ig.game.getEntitiesByType(EntityShadow)[0];e&&e.kill(),this.parent()},check:function(e){1!=ig.game.gamePause&&(e instanceof EntityFoliage&&(this.forwardBlocked=!0),e instanceof EntityFoliageCollision&&(this.scoreStop=this.forwardBlocked=!0),e instanceof EntityFoliageCollisionLeft&&(this.rightBlocked=!0),e instanceof EntityFoliageCollisionRight&&(this.leftBlocked=!0))},lerp:function(e,t,i){return(1-i)*e+i*t},characterIdle:function(){"rabbit"==this.character?this.currentAnim=this.anims.rabbitidle:"chicken"==this.character?this.currentAnim=this.anims.chickenidle:"panda"==this.character?this.currentAnim=this.anims.pandaidle:"pig"==this.character?this.currentAnim=this.anims.pigidle:"tiger"==this.character&&(this.currentAnim=this.anims.tigeridle)}}),EntityShadow=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/shadow.png",35,14),zIndex:11,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("shadow",1,[0]),this.currentAnim=this.anims.shadow}}),EntityPlayerDeath=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/death.png",62.8,59),size:{x:62.8,y:59},zIndex:1,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),e=ig.game.getEntitiesByType("EntityPlayer")[0],this.score=e.score,"rabbit"==e.character?this.addAnim("rabbitdead",1,[0]):"panda"==e.character?this.addAnim("pandadead",1,[1]):"chicken"==e.character?this.addAnim("chickendead",1,[2]):"tiger"==e.character?this.addAnim("tigerdead",1,[3]):"pig"==e.character&&this.addAnim("pigdead",1,[4])}}),EntityParticle=ig.Entity.extend({maxVel:{x:160,y:200},lifetime:.5,fadetime:.5,vel:{x:40,y:50},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/particle.png",6,6),gravityFactor:1,init:function(e,t,i){this.parent(e,t,i),this.vel.x*=4*Math.random()-1,this.vel.y=-70,this.idleTimer=new ig.Timer,e=Math.floor(3*Math.random()),this.addAnim("grass",.2,[e]),e=Math.round(3*Math.random())+5,this.addAnim("road",.2,[e]),e=Math.floor(2*Math.random())+3,this.addAnim("water",.2,[e]),this.currentAnim=this.anims.road},update:function(){1!=ig.game.gamePause&&(this.idleTimer.delta()>this.lifetime?this.kill():(this.currentAnim.alpha=this.idleTimer.delta().map(this.lifetime-this.fadetime,this.lifetime,1,0),this.parent()))}})}),ig.baked=!0,ig.module("game.entities.platform").requires("impact.entity").defines(function(){EntityPlatform=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/tileset/platform.png",80,70),size:{x:80,y:70},xdirArray:[-1,1],xdir:-1,speed:200,type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.A,zIndex:10,onPlatform:!1,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0]),this.xdir=this.xdirArray[Math.floor(Math.random()*this.xdirArray.length)]},update:function(){if(1!=ig.game.gamePause){var e=ig.game.getEntitiesByType(EntityPlayer)[0];this.vel.x=this.speed*this.xdir,-1==this.xdir&&this.pos.x<-this.size.x&&(this.pos.x=ig.system.width),1==this.xdir&&this.pos.x>ig.system.width&&(this.pos.x=-this.size.x),e&&(-320>=e.pos.y-this.pos.y&&this.kill(),1==e.onRiver&&(1==this.onPlatform?this.onPlatform=!1:0==this.onPlatform&&(e.kill(),ig.soundHandler.sfxPlayer.play("splash")))),this.parent()}},check:function(e){1!=ig.game.gamePause&&e instanceof EntityPlayer&&(this.onPlatform=!0,"rabbit"==e.character?e.pos.x=this.pos.x+24:"chicken"==e.character?e.pos.x=this.pos.x+24:"panda"==e.character?e.pos.x=this.pos.x+24:"pig"==e.character?e.pos.x=this.pos.x+24:"tiger"==e.character&&(e.pos.x=this.pos.x+24))}})}),ig.baked=!0,ig.module("game.entities.foliage").requires("impact.entity").defines(function(){EntityFoliage=ig.Entity.extend({size:{x:108.2,y:122},offset:{x:0,y:0},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/trees.png",108.2,122),treeName:null,type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,group:null,treeNum:0,spread:0,numOfTrees:null,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("tree1",1,[0]),this.addAnim("tree2",1,[1]),this.addAnim("tree3",1,[2]),this.addAnim("tree4",1,[3]),this.addAnim("tree5",1,[4]),this.addAnim("matrioska1",1,[5]),this.addAnim("matrioska2",1,[6]),this.addAnim("suporter1",1,[7]),this.addAnim("suporter2",1,[8]),this.addAnim("building1",1,[10]),this.addAnim("building2",1,[11]),this.addAnim("building3",1,[12]),this.scaley=this.scalex=1,this.index_x=.009,this.index_y=.0091,this.foliageSelect(),"tree2"!=this.treeName&&"tree5"!=this.treeName||(this.col=ig.game.spawnEntity(EntityFoliageCollision,this.pos.x-5,this.pos.y+50,{size:{x:45,y:35}}),this.colr=ig.game.spawnEntity(EntityFoliageCollisionRight,this.pos.x+25,this.pos.y+10,{size:{x:45,y:35}}),this.coll=ig.game.spawnEntity(EntityFoliageCollisionLeft,this.pos.x-20,this.pos.y+10,{size:{x:45,y:35}})),"matrioska1"!=this.treeName&&"matrioska2"!=this.treeName||(this.col=ig.game.spawnEntity(EntityFoliageCollision,this.pos.x,this.pos.y+50,{size:{x:80,y:35}}),this.colr=ig.game.spawnEntity(EntityFoliageCollisionRight,this.pos.x+25,this.pos.y+10,{size:{x:80,y:35}}),this.coll=ig.game.spawnEntity(EntityFoliageCollisionLeft,this.pos.x-25,this.pos.y+10,{size:{x:80,y:35}}))},foliageSelect:function(){1==this.group&&(this.rand=Math.floor(4*Math.random())+1,1==this.rand?(this.treeName="tree2",this.currentAnim=this.anims.tree2,this.size.x=40,this.size.y=35,this.offset.x=35,this.offset.y=85):2==this.rand?(this.treeName="tree5",this.currentAnim=this.anims.tree5,this.size.x=40,this.size.y=35,this.offset.x=52,this.offset.y=85):3==this.rand?(this.treeName="matrioska1",this.currentAnim=this.anims.matrioska1,this.size.x=80,this.size.y=35,this.offset.x=20,this.offset.y=85):4==this.rand&&(this.treeName="matrioska2",this.currentAnim=this.anims.matrioska2,this.size.x=80,this.size.y=40,this.offset.x=30,this.offset.y=85),this.treeNum<this.numOfTrees&&(this.calculateSpread(this.numOfTrees),ig.game.spawnEntity(EntityFoliage,this.pos.x+this.size.x*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees}))),2==this.group&&("tree1"==this.treeName?(this.size.x=75,this.size.y=75,this.offset.x=10,this.offset.y=95,this.currentAnim=this.anims.tree1,this.treeNum<this.numOfTrees&&(this.spread=4,ig.game.spawnEntity(EntityFoliage,this.pos.x+80*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees,treeName:"tree1"})),ig.game.spawnEntity(EntityTreeCollition,this.pos.x,this.pos.y,{size:{x:this.size.x,y:this.size.y}})):"tree3"==this.treeName?(this.size.x=50,this.size.y=75,this.offset.x=50,this.offset.y=95,this.currentAnim=this.anims.tree3,this.treeNum<this.numOfTrees&&(this.spread=3,ig.game.spawnEntity(EntityFoliage,this.pos.x+80*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees,treeName:"tree3"})),ig.game.spawnEntity(EntityTreeCollition,this.pos.x,this.pos.y,{size:{x:this.size.x,y:this.size.y}})):"tree4"==this.treeName?(this.size.x=80,this.size.y=75,this.offset.x=30,this.offset.y=95,this.currentAnim=this.anims.tree4,this.treeNum<this.numOfTrees&&(this.spread=4,ig.game.spawnEntity(EntityFoliage,this.pos.x+80*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees,treeName:"tree4"})),ig.game.spawnEntity(EntityTreeCollition,this.pos.x,this.pos.y,{size:{x:this.size.x,y:this.size.y}})):"suporter1"==this.treeName?(this.vel.x=50,this.pos.y-=60,this.size.x=80,this.size.y=75,this.offset.x=30,this.offset.y=30,this.currentAnim=this.anims.suporter1,this.treeNum<this.numOfTrees&&(this.spread=2,ig.game.spawnEntity(EntityFoliage,this.pos.x+80*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees,treeName:"tree4"}))):"suporter2"==this.treeName?(this.vel.x=-50,this.pos.y-=60,this.size.x=80,this.size.y=75,this.offset.x=30,this.offset.y=30,this.currentAnim=this.anims.suporter2,this.treeNum<this.numOfTrees&&(this.spread=3,ig.game.spawnEntity(EntityFoliage,this.pos.x+80*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees,treeName:"tree4"}))):"building1"==this.treeName?(this.size.x=80,this.size.y=75,this.offset.x=10,this.offset.y=95,this.currentAnim=this.anims.building1,this.treeNum<this.numOfTrees&&(this.spread=4,ig.game.spawnEntity(EntityFoliage,this.pos.x+80*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees,treeName:"building3"})),ig.game.spawnEntity(EntityTreeCollition,this.pos.x,this.pos.y,{size:{x:this.size.x,y:this.size.y}})):"building2"==this.treeName?(this.size.x=100,this.size.y=75,this.offset.x=10,this.offset.y=95,this.currentAnim=this.anims.building2,this.treeNum<this.numOfTrees&&(this.spread=2,ig.game.spawnEntity(EntityFoliage,this.pos.x+80*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees,treeName:"building2"}))):"building3"==this.treeName&&(this.size.x=60,this.size.y=75,this.offset.x=40,this.offset.y=95,this.currentAnim=this.anims.building3,this.treeNum<this.numOfTrees&&(this.spread=4,ig.game.spawnEntity(EntityFoliage,this.pos.x+80*this.spread,this.pos.y,{zIndex:this.zIndex,group:this.group,treeNum:this.treeNum+1,numOfTrees:this.numOfTrees,treeName:"building1"})),ig.game.spawnEntity(EntityTreeCollition,this.pos.x,this.pos.y,{size:{x:this.size.x,y:this.size.y}})))},update:function(){if(1!=ig.game.gamePause){var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&-400>=e.pos.y-this.pos.y&&this.kill(),this.parent(),0!=this.vel.x&&(0>this.pos.x+this.size.x&&(this.vel.x=50),480<this.pos.x&&(this.vel.x=-50)),"suporter1"!=this.treeName&&"suporter2"!=this.treeName||(this.scalex+=this.index_x,this.scaley+=this.index_y,this.setScale(this.scalex,this.scaley),(1.05<this.scalex||.95>this.scalex)&&(this.index_x*=-1),(1.05<this.scaley||.95>this.scaley)&&(this.index_y*=-1))}},calculateSpread:function(e){4==e?this.spread=2:3==e?this.spread=3:2==e?this.spread=4:1==e&&(this.spread=5)},check:function(e){e instanceof EntityPlayer&&("suporter1"==this.treeName||"suporter2"==this.treeName)&&(ig.game.spawnEntity(EntityPlayerDeath,e.pos.x,e.pos.y-30,{zIndex:1}),ig.soundHandler.sfxPlayer.play("splat"),e.kill()),e instanceof EntityTreeCollition&&("suporter1"==this.treeName||"suporter2"==this.treeName)&&(this.vel.x*=-1)},draw:function(){this.parent()}}),EntityTreeCollition=ig.Entity.extend({offset:{x:0,y:0},type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.B,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i)},update:function(){this.parent()}}),EntityFoliageCollision=ig.Entity.extend({offset:{x:0,y:0},type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i)},update:function(){if(1!=ig.game.gamePause){var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&-400>=e.pos.y-this.pos.y&&this.kill(),this.parent()}}}),EntityFoliageCollisionRight=ig.Entity.extend({offset:{x:0,y:0},type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i)},update:function(){if(1!=ig.game.gamePause){var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&-400>=e.pos.y-this.pos.y&&this.kill(),this.parent()}}}),EntityFoliageCollisionLeft=ig.Entity.extend({offset:{x:0,y:0},type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i)},update:function(){if(1!=ig.game.gamePause){var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&-400>=e.pos.y-this.pos.y&&this.kill(),this.parent()}}})}),ig.baked=!0,ig.module("game.entities.coin").requires("impact.entity").defines(function(){EntityCoin=ig.Entity.extend({size:{x:54,y:98},coinwshadowAnimSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/coinss.png",54,98),coinwshadowAnimSheetBlue:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/coinss2.png",54,98),coinwshadowAnimSheetChoco:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/coinss3.png",54,98),coinwoshadowAnimSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/coinws.png",54,98),coinwoshadowAnimSheetBlue:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/coinws2.png",54,98),coinwoshadowAnimSheetChoco:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/coinws3.png",54,98),type:ig.Entity.TYPE.A,checkAgainst:ig.Entity.TYPE.A,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.zIndex=600,this.rand=Math.floor(3*Math.random())+1,1==this.rand?(this.anims.coin=new ig.Animation(this.coinwshadowAnimSheet,.1,[0,1,2,3]),this.anims.coinws=new ig.Animation(this.coinwoshadowAnimSheet,.1,[0,1,2,3])):2==this.rand?(this.anims.coin=new ig.Animation(this.coinwshadowAnimSheetBlue,.1,[0,1,2,3]),this.anims.coinws=new ig.Animation(this.coinwoshadowAnimSheetBlue,.1,[0,1,2,3])):(this.anims.coin=new ig.Animation(this.coinwshadowAnimSheetChoco,.1,[0,1,2,3]),this.anims.coinws=new ig.Animation(this.coinwoshadowAnimSheetChoco,.1,[0,1,2,3])),this.pos.y-=40,this.currentAnim=this.anims.coin,this.setScale(.75,.75)},check:function(e){1!=ig.game.gamePause&&e instanceof EntityPlayer&&(ig.game.coinCollected++,ig.soundHandler.sfxPlayer.play("coin"),ig.game.saveCoinStats(),this.checkAgainst=ig.Entity.TYPE.NONE,this.currentAnim=this.anims.coinws,this.zIndex=999,this.idleTimer=new ig.Timer)},update:function(){if(1!=ig.game.gamePause){this.checkAgainst==ig.Entity.TYPE.NONE&&(this.pos.y-=3,this.currentAnim.alpha=this.idleTimer.delta().map(0,.5,1,0),.5<this.idleTimer.delta()&&this.kill());var e=ig.game.getEntitiesByType(EntityPlayer)[0];e&&e&&-640>=e.pos.y-this.pos.y&&this.kill(),this.parent()}}})}),ig.baked=!0,ig.module("game.entities.vehicle").requires("impact.entity").defines(function(){EntityVehicle=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/vehicles/vehicles.png",223.75,115),size:{x:200,y:55},offset:{x:0,y:50},speed:null,maxVel:{x:5e3,y:300},vehicleName:null,vehicleSpawnPos:[130,195,260,345,410,500],flip:!1,type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,xdir:null,gravityFactor:0,directionStatus:!0,tscore:null,init:function(e,t,i){this.parent(e,t,i),this.addAnim("car1",1,[0]),this.addAnim("car2",1,[1]),this.addAnim("car3",1,[2]),this.addAnim("car4",1,[3]),this.addAnim("car5",1,[4]),this.addAnim("car6",1,[5]),this.addAnim("car7",1,[6]),this.addAnim("car7rev",1,[9]),this.addAnim("car8",1,[7]),this.addAnim("car9",1,[8]),this.addAnim("car10",1,[10]),this.addAnim("car11",1,[11]),this.addAnim("car12",1,[12]),this.addAnim("car13",1,[13]),this.addAnim("car14",1,[14]),-1==this.xdir?this.flip=!1:1==this.xdir&&(this.flip=!0),this.vehicleSelect()},update:function(){1!=ig.game.gamePause&&(1==this.xdir&&"car7"==this.vehicleName?this.vel.x=this.speed*this.xdir*ig.game.addspeed:(this.vel.x=this.speed*this.xdir*ig.game.addspeed,this.currentAnim.flip.x=this.flip),this.pos.x<=0-this.size.x&&-1==this.xdir&&this.kill(),480<=this.pos.x&&1==this.xdir&&this.kill(),this.parent())},vehicleSelect:function(){"car1"==this.vehicleName?(this.size.x=200,this.size.y=45,0==this.flip&&(this.offset.x=15,this.offset.y=50),1==this.flip&&(this.offset.x=10,this.offset.y=50),this.currentAnim=this.anims.car1):"car2"==this.vehicleName?(this.size.x=200,this.size.y=55,0==this.flip&&(this.offset.x=15,this.offset.y=50),1==this.flip&&(this.offset.x=10,this.offset.y=50),this.currentAnim=this.anims.car2):"car3"==this.vehicleName?(this.size.x=80,this.size.y=55,0==this.flip&&(this.offset.x=75,this.offset.y=50),1==this.flip&&(this.offset.x=70,this.offset.y=50),this.currentAnim=this.anims.car3):"car4"==this.vehicleName?(this.size.x=100,this.size.y=55,0==this.flip&&(this.offset.x=65,this.offset.y=53),1==this.flip&&(this.offset.x=60,this.offset.y=53),this.currentAnim=this.anims.car4):"car5"==this.vehicleName?(this.size.x=115,this.size.y=46,0==this.flip&&(this.offset.x=65,this.offset.y=60),1==this.flip&&(this.offset.x=45,this.offset.y=60),this.currentAnim=this.anims.car5):"car6"==this.vehicleName?(this.size.x=115,this.size.y=55,this.flip?(this.offset.x=50,this.offset.y=50):(this.offset.x=60,this.offset.y=50,this.currentAnim=this.anims.car6)):"car7"==this.vehicleName?(this.size.x=200,this.size.y=55,0==this.flip&&(this.offset.x=15,this.offset.y=55,this.currentAnim=this.anims.car7),1==this.flip&&(this.offset.x=10,this.offset.y=55,this.currentAnim=this.anims.car7rev)):"car8"==this.vehicleName?(this.size.x=200,this.size.y=67,0==this.flip&&(this.offset.x=15,this.offset.y=40),1==this.flip&&(this.offset.x=10,this.offset.y=40),this.currentAnim=this.anims.car8):"car9"==this.vehicleName?(this.size.x=200,this.size.y=67,0==this.flip&&(this.offset.x=15,this.offset.y=40),1==this.flip&&(this.offset.x=10,this.offset.y=40),this.currentAnim=this.anims.car9):"car10"==this.vehicleName?(this.size.x=120,this.size.y=55,0==this.flip&&(this.offset.x=55,this.offset.y=50),1==this.flip&&(this.offset.x=45,this.offset.y=50),this.currentAnim=this.anims.car10):"car11"==this.vehicleName?(this.size.x=200,this.size.y=67,0==this.flip&&(this.offset.x=15,this.offset.y=40),1==this.flip&&(this.offset.x=10,this.offset.y=40),this.currentAnim=this.anims.car11):"car12"==this.vehicleName?(this.size.x=120,this.size.y=55,0==this.flip&&(this.offset.x=55,this.offset.y=50),1==this.flip&&(this.offset.x=45,this.offset.y=50),this.currentAnim=this.anims.car12):"car13"==this.vehicleName?(this.size.x=120,this.size.y=55,0==this.flip&&(this.offset.x=55,this.offset.y=50),1==this.flip&&(this.offset.x=45,this.offset.y=50),this.currentAnim=this.anims.car13):"car14"==this.vehicleName&&(this.size.x=120,this.size.y=55,0==this.flip&&(this.offset.x=55,this.offset.y=50),1==this.flip&&(this.offset.x=45,this.offset.y=50),this.currentAnim=this.anims.car14)},check:function(e){1!=ig.game.gamePause&&e instanceof EntityPlayer&&(ig.game.spawnEntity(EntityPlayerDeath,e.pos.x,e.pos.y-30,{zIndex:1}),ig.soundHandler.sfxPlayer.play("splat"),e.kill())}})}),ig.baked=!0,ig.module("game.entities.endcontrol").requires("impact.entity").defines(function(){EntityEndcontrol=ig.Entity.extend({gameOverImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/gameover.png"),restartGameRect:{x:178,y:304,w:125,h:80},backToHomeRect:{x:98,y:338,w:43,h:40},shopRect:{x:328,y:330,w:43,h:40},character:null,score:null,zIndex:1e5,init:function(e,t,i){this.parent(e,t,i),this.delayTimer=new ig.Timer(1),ig.game.spawnEntity(EntityPointer,this.pos.x,this.pos.y),this.pointer=ig.game.getEntitiesByType(EntityPointer)[0],this.targetScreen=-650,this.targetText=-350,ig.soundHandler.sfxPlayer.play("whoosh"),this.soundPlay=this.buttonPressed=this.backPressed=this.shopPressed=this.restartPressed=!1,this.buttonDelay=new ig.Timer;var s=ig.game.coinCollected;this.saveResult(this.score,s)},saveResult:function(e,t){var i="/user/"+(window.location!==window.parent.location?parent._p:_p);$.post(i,{points:e,coins:t},function(e,t){window.location!==window.parent.location?parent.document.location=e.redirect:document.location=e.redirect})},draw:function(){if(1!=ig.game.gamePause){if(this.parent(),.2<=this.delayTimer.delta()){this.gameOverImage.draw(this.targetScreen=this.lerp(this.targetScreen,-83,.2),234);var e=ig.game.getEntitiesByType(EntityPlayButtonEnd)[0];e&&0==this.buttonPressed&&(e.pos.x=this.lerp(e.pos.x,178,.2)),(e=ig.game.getEntitiesByType(EntityBackButtonEnd)[0])&&0==this.buttonPressed&&(e.pos.x=this.lerp(e.pos.x,98,.2))}-450<this.targetScreen&&(this.targetText=this.lerp(this.targetText,240,.22),this.context=ig.system.context,this.context.font="40pt WorldsAtWar BB",this.context.textAlign="center",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.TryAgain,this.targetText,330))}},aabbCheck:function(e,t){return e.x+e.w>t.x&&e.x<t.x+t.w&&e.y+e.h>t.y&&e.y<t.y+t.h},checkMainClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var e={};if(e.x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.restartGameRect)){var t=ig.game.getEntitiesByType(EntityPlayButtonEnd)[0];t&&(t.setScale(.9,.9),this.buttonPressed=!0)}this.aabbCheck(e,this.shopRect),this.aabbCheck(e,this.backToHomeRect)&&(t=ig.game.getEntitiesByType(EntityBackButtonEnd)[0])&&(t.setScale(.9,.9),this.buttonPressed=!0)}ig.input.released("click")&&((e={}).x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.restartGameRect)?(this.buttonDelay.reset(),(t=ig.game.getEntitiesByType(EntityPlayButtonEnd)[0])&&t.setScale(1,1),this.restartPressed=!0):(this.restartPressed=!1,(t=ig.game.getEntitiesByType(EntityPlayButtonEnd)[0])&&t.setScale(1,1)),this.aabbCheck(e,this.backToHomeRect)?(this.buttonDelay.reset(),(t=ig.game.getEntitiesByType(EntityBackButtonEnd)[0])&&t.setScale(1,1),this.backPressed=!0):(this.backPressed=!1,(t=ig.game.getEntitiesByType(EntityBackButtonEnd)[0])&&t.setScale(1,1)),this.aabbCheck(e,this.shopRect)&&this.buttonDelay.reset())},update:function(){0==this.soundPlay&&0<=this.delayTimer.delta()&&(ig.soundHandler.sfxPlayer.play("whoosh"),this.soundPlay=!0)},lerp:function(e,t,i){return(1-i)*e+i*t}}),EntityPlayButtonEnd=ig.Entity.extend({size:{x:123,y:87},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/playbtn.png",123,87),zIndex:100001,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntityBackButtonEnd=ig.Entity.extend({size:{x:51,y:50},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/backbtn.png",51,50),zIndex:100001,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntityShopButtonEnd=ig.Entity.extend({size:{x:50,y:60},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/shop.png",50,60),zIndex:100001,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}})}),ig.baked=!0,ig.module("game.entities.shop").requires("impact.entity").defines(function(){EntityShop=ig.Entity.extend({backToGameRect:{x:22,y:25,w:50,h:50},previousRect:{x:30,y:285,w:40,h:68},nextRect:{x:410,y:285,w:40,h:68},selectRect:{x:167,y:500,w:156,h:65},lockedChicken:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/chickenlocked.png"),lockedPanda:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/pandalocked.png"),lockedPig:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/piglocked.png"),lockedTiger:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/tigerlocked.png"),unlockedRabbit:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/rabbit.png"),unlockedChicken:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/chicken.png"),unlockedPanda:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/panda.png"),unlockedPig:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/pig.png"),unlockedTiger:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/characters/tiger.png"),coinUI:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/coinui.png"),selectUI:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/selectui.png"),lockUI:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/lock.png"),character:null,init:function(e,t,i){this.parent(e,t,i),this.midX=190,this.midY=200,this.rightX=290,this.rightY=255,this.leftX=90,this.leftY=255,this.outerRight1=490,this.outerRight2=690,this.outerRight3=890,this.outerLeft1=-110,this.outerLeft2=-310,this.outerLeft3=-510,this.midPos0=!0,this.midPos1=this.leftPos0=this.rightPos0=!1,this.rightPos1=!0,this.leftPos4=this.rightPos4=this.midPos4=this.leftPos3=this.rightPos3=this.midPos3=this.leftPos2=this.rightPos2=this.midPos2=this.leftPos1=!1,this.posX0=this.midX,this.posY0=this.midY,this.posX1=this.rightX,this.posY1=this.rightY,this.posX2=this.outerRight1,this.posY2=this.rightY,this.posX3=this.outerRight2,this.posY3=this.rightY,this.posX4=this.outerRight3,this.posY4=this.rightY,this.scrollableLeft=!0,this.scrollableRight=!1,ig.game.getUnlockedCharacter(),ig.game.spawnEntity(EntityBackButtonShop,22,25),ig.game.spawnEntity(EntitySelectButtonShop,167,500),ig.game.spawnEntity(EntityLeftButtonShop,30,285),ig.game.spawnEntity(EntityRightButtonShop,410,285),this.rightPressed=this.leftPressed=this.selectPressed=this.backPressed=!1,this.buttonDelay=new ig.Timer,this.displayPrice=!0,ig.game.getSoundState(),0==ig.game.soundMute?ig.soundHandler.unmuteSFX(!0):ig.soundHandler.muteAll(!0)},draw:function(){this.parent(),this.context=ig.system.context,this.context.font="36pt WorldsAtWar BB",this.context.textAlign="center",this.context.fillStyle="#ffffff";var e=_STRINGS.PetHop.Select,t=_STRINGS.PetHop.Unlock;1==this.midPos0&&(this.unlockedRabbit.draw(this.posX0=this.lerp(this.posX0,this.midX,.5),this.posY0=this.lerp(this.posY0,this.midY,.5)),this.context.fillText(e,245,545),this.displayPrice=!1),1==this.leftPos0&&this.unlockedRabbit.draw(this.posX0=this.lerp(this.posX0,this.leftX,.5),this.posY0=this.lerp(this.posY0,this.leftY,.5)),1==this.rightPos0&&this.unlockedRabbit.draw(this.posX0=this.lerp(this.posX0,this.rightX,.5),this.posY0=this.lerp(this.posY0,this.rightY,.5)),0==this.midPos0&&0==this.leftPos0&&0==this.rightPos0&&this.unlockedRabbit.draw(this.posX0,this.posY0),1==this.midPos1&&0==ig.game.unlockedCharacter[1]?(this.lockedChicken.draw(this.posX1=this.lerp(this.posX1,this.midX,.5),this.posY1=this.lerp(this.posY1,this.midY,.5)),this.context.fillText(t,245,545),this.displayPrice=!0):1==this.midPos1&&1==ig.game.unlockedCharacter[1]&&(this.unlockedChicken.draw(this.posX1=this.lerp(this.posX1,this.midX,.5),this.posY1=this.lerp(this.posY1,this.midY,.5)),this.context.fillText(e,245,545),this.displayPrice=!1),1==this.leftPos1&&0==ig.game.unlockedCharacter[1]?this.lockedChicken.draw(this.posX1=this.lerp(this.posX1,this.leftX,.5),this.posY1=this.lerp(this.posY1,this.leftY,.5)):1==this.leftPos1&&1==ig.game.unlockedCharacter[1]&&this.unlockedChicken.draw(this.posX1=this.lerp(this.posX1,this.leftX,.5),this.posY1=this.lerp(this.posY1,this.leftY,.5)),1==this.rightPos1&&0==ig.game.unlockedCharacter[1]?this.lockedChicken.draw(this.posX1=this.lerp(this.posX1,this.rightX,.5),this.posY1=this.lerp(this.posY1,this.rightY,.5)):1==this.rightPos1&&1==ig.game.unlockedCharacter[1]&&this.unlockedChicken.draw(this.posX1=this.lerp(this.posX1,this.rightX,.5),this.posY1=this.lerp(this.posY1,this.rightY,.5)),0==this.midPos1&&0==this.leftPos1&&0==this.rightPos1&&this.lockedChicken.draw(this.posX1,this.posY1),1==this.midPos2&&0==ig.game.unlockedCharacter[2]?(this.lockedPanda.draw(this.posX2=this.lerp(this.posX2,this.midX,.5),this.posY2=this.lerp(this.posY2,this.midY,.5)),this.context.fillText(t,245,545),this.displayPrice=!0):1==this.midPos2&&1==ig.game.unlockedCharacter[2]&&(this.unlockedPanda.draw(this.posX2=this.lerp(this.posX2,this.midX,.5),this.posY2=this.lerp(this.posY2,this.midY,.5)),this.context.fillText(e,245,545),this.displayPrice=!1),1==this.leftPos2&&0==ig.game.unlockedCharacter[2]?this.lockedPanda.draw(this.posX2=this.lerp(this.posX2,this.leftX,.5),this.posY2=this.lerp(this.posY2,this.leftY,.5)):1==this.leftPos2&&1==ig.game.unlockedCharacter[2]&&this.unlockedPanda.draw(this.posX2=this.lerp(this.posX2,this.leftX,.5),this.posY2=this.lerp(this.posY2,this.leftY,.5)),1==this.rightPos2&&0==ig.game.unlockedCharacter[2]?this.lockedPanda.draw(this.posX2=this.lerp(this.posX2,this.rightX,.5),this.posY2=this.lerp(this.posY2,this.rightY,.5)):1==this.rightPos2&&1==ig.game.unlockedCharacter[2]&&this.unlockedPanda.draw(this.posX2=this.lerp(this.posX2,this.rightX,.5),this.posY2=this.lerp(this.posY2,this.rightY,.5)),0==this.midPos2&&0==this.leftPos2&&0==this.rightPos2&&this.lockedPanda.draw(this.posX2,this.posY2),1==this.midPos3&&0==ig.game.unlockedCharacter[3]?(this.lockedPig.draw(this.posX3=this.lerp(this.posX3,this.midX,.5),this.posY3=this.lerp(this.posY3,this.midY,.5)),this.context.fillText(t,245,545),this.displayPrice=!0):1==this.midPos3&&1==ig.game.unlockedCharacter[3]&&(this.unlockedPig.draw(this.posX3=this.lerp(this.posX3,this.midX,.5),this.posY3=this.lerp(this.posY3,this.midY,.5)),this.context.fillText(e,245,545),this.displayPrice=!1),1==this.leftPos3&&0==ig.game.unlockedCharacter[3]?this.lockedPig.draw(this.posX3=this.lerp(this.posX3,this.leftX,.5),this.posY3=this.lerp(this.posY3,this.leftY,.5)):1==this.leftPos3&&1==ig.game.unlockedCharacter[3]&&this.unlockedPig.draw(this.posX3=this.lerp(this.posX3,this.leftX,.5),this.posY3=this.lerp(this.posY3,this.leftY,.5)),1==this.rightPos3&&0==ig.game.unlockedCharacter[3]?this.lockedPig.draw(this.posX3=this.lerp(this.posX3,this.rightX,.5),this.posY3=this.lerp(this.posY3,this.rightY,.5)):1==this.rightPos3&&1==ig.game.unlockedCharacter[3]&&this.unlockedPig.draw(this.posX3=this.lerp(this.posX3,this.rightX,.5),this.posY3=this.lerp(this.posY3,this.rightY,.5)),0==this.midPos3&&0==this.leftPos3&&0==this.rightPos3&&this.lockedPig.draw(this.posX3,this.posY3),1==this.midPos4&&0==ig.game.unlockedCharacter[4]?(this.lockedTiger.draw(this.posX4=this.lerp(this.posX4,this.midX,.5),this.posY4=this.lerp(this.posY4,this.midY,.5)),this.context.fillText(t,245,545),this.displayPrice=!0):1==this.midPos4&&1==ig.game.unlockedCharacter[4]&&(this.unlockedTiger.draw(this.posX4=this.lerp(this.posX4,this.midX,.5),this.posY4=this.lerp(this.posY4,this.midY,.5)),this.context.fillText(e,245,545),this.displayPrice=!1),1==this.leftPos4&&0==ig.game.unlockedCharacter[4]?this.lockedTiger.draw(this.posX4=this.lerp(this.posX4,this.leftX,.5),this.posY4=this.lerp(this.posY4,this.leftY,.5)):1==this.leftPos4&&1==ig.game.unlockedCharacter[4]&&this.unlockedTiger.draw(this.posX4=this.lerp(this.posX4,this.leftX,.5),this.posY4=this.lerp(this.posY4,this.leftY,.5)),1==this.rightPos4&&0==ig.game.unlockedCharacter[4]?this.lockedTiger.draw(this.posX4=this.lerp(this.posX4,this.rightX,.5),this.posY4=this.lerp(this.posY4,this.rightY,.5)):1==this.rightPos4&&1==ig.game.unlockedCharacter[4]&&this.unlockedTiger.draw(this.posX4=this.lerp(this.posX4,this.rightX,.5),this.posY4=this.lerp(this.posY4,this.rightY,.5)),0==this.midPos4&&0==this.leftPos4&&0==this.rightPos4&&this.lockedTiger.draw(this.posX4,this.posY4),1==this.displayPrice&&(this.coinUI.draw(200,425),this.context.fillStyle="#ffffff",this.context.fillText("150",260,450)),this.coinUI.draw(ig.system.width-45,35),this.context.textAlign="right",this.context.fillStyle="#ffffff",this.context.fillText(ig.game.coinCollected,428,60),this.context.textAlign="center",1==this.midPos0&&0==this.displayPrice&&(this.context.font="45pt WorldsAtWar BB",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.Rabbit,240,150)),1==this.midPos1&&0==this.displayPrice&&(this.context.font="45pt WorldsAtWar BB",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.Chicken,240,150)),1==this.midPos2&&0==this.displayPrice&&(this.context.font="45pt WorldsAtWar BB",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.Panda,240,150)),1==this.midPos3&&0==this.displayPrice&&(this.context.font="45pt WorldsAtWar BB",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.Pig,240,150)),1==this.midPos4&&0==this.displayPrice&&(this.context.font="45pt WorldsAtWar BB",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.Tiger,240,150)),1==this.displayPrice&&this.lockUI.draw(215,125)},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},aabbCheck:function(e,t){return e.x+e.w>t.x&&e.x<t.x+t.w&&e.y+e.h>t.y&&e.y<t.y+t.h},checkMainClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var e={};if(e.x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.backToGameRect)){var t=ig.game.getEntitiesByType(EntityBackButtonShop)[0];t&&t.setScale(.9,.9)}this.aabbCheck(e,this.selectRect)&&(t=ig.game.getEntitiesByType(EntitySelectButtonShop)[0])&&t.setScale(.9,.9),this.aabbCheck(e,this.previousRect)&&(t=ig.game.getEntitiesByType(EntityLeftButtonShop)[0])&&t.setScale(.9,.9),this.aabbCheck(e,this.nextRect)&&(t=ig.game.getEntitiesByType(EntityRightButtonShop)[0])&&t.setScale(.9,.9)}ig.input.released("click")&&(this.pointer.refreshPos(),(e={}).x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.backToGameRect)?(this.buttonDelay.reset(),(t=ig.game.getEntitiesByType(EntityBackButtonShop)[0])&&t.setScale(1,1),this.backPressed=!0,ig.soundHandler.sfxPlayer.play("button")):(this.backPressed=!1,(t=ig.game.getEntitiesByType(EntityBackButtonShop)[0])&&t.setScale(1,1)),this.aabbCheck(e,this.previousRect)?(this.buttonDelay.reset(),(t=ig.game.getEntitiesByType(EntityLeftButtonShop)[0])&&t.setScale(1,1),this.leftPressed=!0,ig.soundHandler.sfxPlayer.play("button")):(this.leftPressed=!1,(t=ig.game.getEntitiesByType(EntityLeftButtonShop)[0])&&t.setScale(1,1)),this.aabbCheck(e,this.nextRect)?(this.buttonDelay.reset(),(t=ig.game.getEntitiesByType(EntityRightButtonShop)[0])&&t.setScale(1,1),this.rightPressed=!0,ig.soundHandler.sfxPlayer.play("button")):(this.rightPressed=!1,(t=ig.game.getEntitiesByType(EntityRightButtonShop)[0])&&t.setScale(1,1)),this.aabbCheck(e,this.selectRect)?(this.buttonDelay.reset(),(t=ig.game.getEntitiesByType(EntitySelectButtonShop)[0])&&t.setScale(1,1),this.selectPressed=!0,ig.soundHandler.sfxPlayer.play("button")):(this.selectPressed=!1,(t=ig.game.getEntitiesByType(EntitySelectButtonShop)[0])&&t.setScale(1,1)),ig.game.saveUnlockedCharacter(),ig.game.saveActiveCharacter(),ig.game.saveCoinStats())},update:function(){this.checkMainClicks(),1==this.backPressed&&.1<this.buttonDelay.delta()&&(ig.game.director.loadLevel(2),2==ig.game.director.currentLevel&&(ig.game.spawnEntity(EntityWorld,0,0,{zIndex:-1e3}),ig.game.spawnEntity(EntityPlayer,240,615,{character:this.character})),this.backPressed=!1),1==this.leftPressed&&.1<this.buttonDelay.delta()&&(1==this.scrollableRight&&(this.scrollRight(),ig.game.getUnlockedCharacter()),this.leftPressed=!1),1==this.rightPressed&&.1<this.buttonDelay.delta()&&(1==this.scrollableLeft&&(this.scrollLeft(),ig.game.getUnlockedCharacter()),this.rightPressed=!1),1==this.selectPressed&&.1<this.buttonDelay.delta()&&(1==this.midPos0?(this.character="rabbit",ig.game.unlockedCharacter[0]=1,ig.game.character=this.character,ig.game.saveUnlockedCharacter(),ig.game.saveActiveCharacter(),ig.game.saveCoinStats(),ig.game.director.loadLevel(2),2==ig.game.director.currentLevel&&(ig.game.spawnEntity(EntityWorld,0,0,{zIndex:-1e3}),ig.game.spawnEntity(EntityPlayer,240,615,{character:this.character}))):1==this.midPos1?(this.character="chicken",ig.game.getCoinStats(),0==ig.game.unlockedCharacter[1]&&150<=ig.game.coinCollected?(ig.game.unlockedCharacter[1]=1,ig.game.coinCollected-=150,ig.soundHandler.sfxPlayer.play("purchase")):1==ig.game.unlockedCharacter[1]&&(ig.game.character=this.character,ig.game.saveUnlockedCharacter(),ig.game.saveActiveCharacter(),ig.game.saveCoinStats(),ig.game.director.loadLevel(2),2==ig.game.director.currentLevel&&(ig.game.spawnEntity(EntityWorld,0,0,{zIndex:-1e3}),ig.game.spawnEntity(EntityPlayer,240,615,{character:this.character})))):1==this.midPos2?(this.character="panda",ig.game.getCoinStats(),0==ig.game.unlockedCharacter[2]&&150<=ig.game.coinCollected?(ig.game.unlockedCharacter[2]=1,ig.game.coinCollected-=150,ig.soundHandler.sfxPlayer.play("purchase")):1==ig.game.unlockedCharacter[2]&&(ig.game.character=this.character,ig.game.saveUnlockedCharacter(),ig.game.saveActiveCharacter(),ig.game.saveCoinStats(),ig.game.director.loadLevel(2),2==ig.game.director.currentLevel&&(ig.game.spawnEntity(EntityWorld,0,0,{zIndex:-1e3}),ig.game.spawnEntity(EntityPlayer,240,615,{character:this.character})))):1==this.midPos3?(this.character="pig",ig.game.getCoinStats(),0==ig.game.unlockedCharacter[3]&&150<=ig.game.coinCollected?(ig.game.unlockedCharacter[3]=1,ig.game.coinCollected-=150,ig.soundHandler.sfxPlayer.play("purchase")):1==ig.game.unlockedCharacter[3]&&(ig.game.character=this.character,ig.game.saveUnlockedCharacter(),ig.game.saveActiveCharacter(),ig.game.saveCoinStats(),ig.game.director.loadLevel(2),2==ig.game.director.currentLevel&&(ig.game.spawnEntity(EntityWorld,0,0,{zIndex:-1e3}),ig.game.spawnEntity(EntityPlayer,240,615,{character:this.character})))):1==this.midPos4&&(this.character="tiger",ig.game.getCoinStats(),0==ig.game.unlockedCharacter[4]&&150<=ig.game.coinCollected?(ig.game.unlockedCharacter[4]=1,ig.game.coinCollected-=150,ig.soundHandler.sfxPlayer.play("purchase")):1==ig.game.unlockedCharacter[4]&&(ig.game.character=this.character,ig.game.saveUnlockedCharacter(),ig.game.saveActiveCharacter(),ig.game.saveCoinStats(),ig.game.director.loadLevel(2),2==ig.game.director.currentLevel&&(ig.game.spawnEntity(EntityWorld,0,0,{zIndex:-1e3}),ig.game.spawnEntity(EntityPlayer,240,615,{character:this.character})))),this.selectPressed=!1)},lerp:function(e,t,i){return(1-i)*e+i*t},scrollLeft:function(){this.scrollableRight=!0,1==this.midPos0?(this.rightPos0=this.midPos0=!1,this.leftPos0=!0):1==this.rightPos0?(this.midPos0=!0,this.leftPos0=this.rightPos0=!1):1==this.leftPos0?(this.leftPos0=this.rightPos0=this.midPos0=!1,this.posX0=this.outerLeft1):this.posX0==this.outerLeft1?this.posX0=this.outerLeft2:this.posX0==this.outerLeft2?this.posX0=this.outerLeft3:this.posX0==this.outerRight3?this.posX0=this.outerRight2:this.posX0==this.outerRight2?this.posX0=this.outerRight1:this.posX0==this.outerRight1&&(this.posX0=this.rightX,this.rightPos0=!0),1==this.midPos1?(this.rightPos1=this.midPos1=!1,this.leftPos1=!0):1==this.rightPos1?(this.midPos1=!0,this.leftPos1=this.rightPos1=!1):1==this.leftPos1?(this.leftPos1=this.rightPos1=this.midPos1=!1,this.posX1=this.outerLeft1):this.posX1==this.outerLeft1?this.posX1=this.outerLeft2:this.posX1==this.outerLeft2?this.posX1=this.outerLeft3:this.posX1==this.outerRight3?this.posX1=this.outerRight2:this.posX1==this.outerRight2?this.posX1=this.outerRight1:this.posX1==this.outerRight1&&(this.posX1=this.rightX,this.rightPos1=!0),1==this.midPos2?(this.rightPos2=this.midPos2=!1,this.leftPos2=!0):1==this.rightPos2?(this.midPos2=!0,this.leftPos2=this.rightPos2=!1):1==this.leftPos2?(this.leftPos2=this.rightPos2=this.midPos2=!1,this.posX2=this.outerLeft1):this.posX2==this.outerLeft1?this.posX2=this.outerLeft2:this.posX2==this.outerLeft2?this.posX2=this.outerLeft3:this.posX2==this.outerRight3?this.posX2=this.outerRight2:this.posX2==this.outerRight2?this.posX2=this.outerRight1:this.posX2==this.outerRight1&&(this.posX2=this.rightX,this.rightPos2=!0),1==this.midPos3?(this.rightPos3=this.midPos3=!1,this.leftPos3=!0):1==this.rightPos3?(this.midPos3=!0,this.leftPos3=this.rightPos3=!1):1==this.leftPos3?(this.leftPos3=this.rightPos3=this.midPos3=!1,this.posX3=this.outerLeft1):this.posX3==this.outerLeft1?this.posX3=this.outerLeft2:this.posX3==this.outerLeft2?this.posX3=this.outerLeft3:this.posX3==this.outerRight3?this.posX3=this.outerRight2:this.posX3==this.outerRight2?this.posX3=this.outerRight1:this.posX3==this.outerRight1&&(this.posX3=this.rightX,this.rightPos3=!0),1==this.midPos4?(this.rightPos4=this.midPos4=!1,this.leftPos4=!0):1==this.rightPos4?(this.midPos4=!0,this.scrollableLeft=this.leftPos4=this.rightPos4=!1):1==this.leftPos4?(this.leftPos4=this.rightPos4=this.midPos4=!1,this.posX4=this.outerLeft1):this.posX4==this.outerLeft1?this.posX4=this.outerLeft2:this.posX4==this.outerLeft2?this.posX4=this.outerLeft3:this.posX4==this.outerRight3?this.posX4=this.outerRight2:this.posX4==this.outerRight2?this.posX4=this.outerRight1:this.posX4==this.outerRight1&&(this.posX4=this.rightX,this.rightPos4=!0)},scrollRight:function(){this.scrollableLeft=!0,1==this.midPos0?(this.midPos0=!1,this.rightPos0=!0,this.leftPos0=!1):1==this.rightPos0?(this.leftPos0=this.rightPos0=this.midPos0=!1,this.posX0=this.outerRight1):1==this.leftPos0?(this.midPos0=!0,this.scrollableRight=this.leftPos0=this.rightPos0=!1):this.posX0==this.outerLeft3?this.posX0=this.outerLeft2:this.posX0==this.outerLeft2?this.posX0=this.outerLeft1:this.posX0==this.outerRight1?this.posX0=this.outerRight2:this.posX0==this.outerRight2?this.posX0=this.outerRight3:this.posX0==this.outerLeft1&&(this.posX0=this.leftX,this.leftPos0=!0),1==this.midPos1?(this.midPos1=!1,this.rightPos1=!0,this.leftPos1=!1):1==this.rightPos1?(this.leftPos1=this.rightPos1=this.midPos1=!1,this.posX1=this.outerRight1):1==this.leftPos1?(this.midPos1=!0,this.leftPos1=this.rightPos1=!1):this.posX1==this.outerLeft3?this.posX1=this.outerLeft2:this.posX1==this.outerLeft2?this.posX1=this.outerLeft1:this.posX1==this.outerRight1?this.posX1=this.outerRight2:this.posX1==this.outerRight2?this.posX1=this.outerRight3:this.posX1==this.outerLeft1&&(this.posX1=this.leftX,this.leftPos1=!0),1==this.midPos2?(this.midPos2=!1,this.rightPos2=!0,this.leftPos2=!1):1==this.rightPos2?(this.leftPos2=this.rightPos2=this.midPos2=!1,this.posX2=this.outerRight1):1==this.leftPos2?(this.midPos2=!0,this.leftPos2=this.rightPos2=!1):this.posX2==this.outerLeft3?this.posX2=this.outerLeft2:this.posX2==this.outerLeft2?this.posX2=this.outerLeft1:this.posX2==this.outerRight1?this.posX2=this.outerRight2:this.posX2==this.outerRight2?this.posX2=this.outerRight3:this.posX2==this.outerLeft1&&(this.posX2=this.leftX,this.leftPos2=!0),1==this.midPos3?(this.midPos3=!1,this.rightPos3=!0,this.leftPos3=!1):1==this.rightPos3?(this.leftPos3=this.rightPos3=this.midPos3=!1,this.posX3=this.outerRight1):1==this.leftPos3?(this.midPos3=!0,this.leftPos3=this.rightPos3=!1):this.posX3==this.outerLeft3?this.posX3=this.outerLeft2:this.posX3==this.outerLeft2?this.posX3=this.outerLeft1:this.posX3==this.outerRight1?this.posX3=this.outerRight2:this.posX3==this.outerRight2?this.posX3=this.outerRight3:this.posX3==this.outerLeft1&&(this.posX3=this.leftX,this.leftPos3=!0),1==this.midPos4?(this.midPos4=!1,this.rightPos4=!0,this.leftPos4=!1):1==this.rightPos4?(this.leftPos4=this.rightPos4=this.midPos4=!1,this.posX4=this.outerRight1):1==this.leftPos4?(this.midPos4=!0,this.leftPos4=this.rightPos4=!1):this.posX4==this.outerLeft3?this.posX4=this.outerLeft2:this.posX4==this.outerLeft2?this.posX4=this.outerLeft1:this.posX4==this.outerRight1?this.posX4=this.outerRight2:this.posX4==this.outerRight2?this.posX4=this.outerRight3:this.posX4==this.outerLeft1&&(this.posX4=this.leftX,this.leftPos4=!0)}}),EntityBackButtonShop=ig.Entity.extend({size:{x:51,y:50},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/backbtn.png",51,50),zIndex:100001,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntitySelectButtonShop=ig.Entity.extend({size:{x:156,y:65},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/selectui.png",156,65),zIndex:0,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntityLeftButtonShop=ig.Entity.extend({size:{x:46,y:78},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/left.png",46,78),zIndex:0,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntityRightButtonShop=ig.Entity.extend({size:{x:46,y:78},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/right.png",46,78),zIndex:0,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}})}),ig.baked=!0,ig.module("game.entities.backbutton").requires("impact.entity").defines(function(){EntityBackbutton=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/backbtn.png",51,50),gravityFactor:0,zIndex:9999,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}})}),ig.baked=!0,ig.module("game.entities.pausecontrol").requires("impact.entity").defines(function(){EntityPausecontrol=ig.Entity.extend({gameOverImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/gameover.png"),restartGameRect:{x:178,y:304,w:125,h:80},backToHomeRect:{x:98,y:338,w:43,h:40},shopRect:{x:328,y:330,w:43,h:40},pauseGameRect:{x:445,y:600,w:25,h:25},character:null,score:null,zIndex:1e5,init:function(e,t,i){this.parent(e,t,i),ig.game.spawnEntity(EntityPointer,this.pos.x,this.pos.y),this.pointer=ig.game.getEntitiesByType(EntityPointer)[0],this.targetScreen=-650,this.targetText=-350,ig.game.spawnEntity(EntityPlayButtonPause,-650,ig.game.screen.y+304),ig.game.spawnEntity(EntityBackButtonPause,-748,ig.game.screen.y+338),this.buttonPressed=this.backPressed=this.shopPressed=this.restartPressed=!1},draw:function(){this.parent(),this.gameOverImage.draw(-83,234);var e=ig.game.getEntitiesByType(EntityPlayButtonPause)[0];e&&0==this.buttonPressed&&(e.pos.x=178),(e=ig.game.getEntitiesByType(EntityBackButtonPause)[0])&&0==this.buttonPressed&&(e.pos.x=98),this.targetText=240,this.context=ig.system.context,this.context.font="40pt WorldsAtWar BB",this.context.textAlign="center",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.Pause,this.targetText,280)},aabbCheck:function(e,t){return e.x+e.w>t.x&&e.x<t.x+t.w&&e.y+e.h>t.y&&e.y<t.y+t.h},checkMainClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var e={};if(e.x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.restartGameRect)){var t=ig.game.getEntitiesByType(EntityPlayButtonPause)[0];t&&(t.setScale(.9,.9),this.buttonPressed=!0)}this.aabbCheck(e,this.shopRect),this.aabbCheck(e,this.backToHomeRect)&&(t=ig.game.getEntitiesByType(EntityBackButtonPause)[0])&&(t.setScale(.9,.9),this.buttonPressed=!0)}ig.input.released("click")&&((e={}).x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.restartGameRect)?((t=ig.game.getEntitiesByType(EntityPlayButtonPause)[0])&&t.setScale(1,1),this.restartPressed=!0):(this.restartPressed=!1,(t=ig.game.getEntitiesByType(EntityPlayButtonPause)[0])&&t.setScale(1,1)),this.aabbCheck(e,this.backToHomeRect)?((t=ig.game.getEntitiesByType(EntityBackButtonPause)[0])&&t.setScale(1,1),this.backPressed=!0):(this.backPressed=!1,(t=ig.game.getEntitiesByType(EntityBackButtonPause)[0])&&t.setScale(1,1)),this.aabbCheck(e,this.shopRect)||(this.shopPressed=!1))},update:function(){if(this.checkMainClicks(),1==this.restartPressed){ig.Timer.timeScale=1,ig.game.getSoundState(),0==ig.game.soundMute?ig.soundHandler.unmuteAll(!0):ig.soundHandler.muteAll(!0),ig.game.gamePause=!1;var e=ig.game.getEntitiesByType(EntityPlayButtonPause)[0];e&&e.kill(),(e=ig.game.getEntitiesByType(EntityBackButtonPause)[0])&&e.kill(),this.kill(),ig.soundHandler.sfxPlayer.play("button"),this.restartPressed=!1}1==this.shopPressed&&(ig.Timer.timeScale=1,ig.game.gamePause=!1,ig.game.director.loadLevel(3),ig.soundHandler.sfxPlayer.play("button"),this.shopPressed=!1),1==this.backPressed&&(ig.Timer.timeScale=1,ig.game.gamePause=!1,ig.game.director.loadLevel(1),ig.soundHandler.sfxPlayer.play("button"),this.backPressed=!1)},lerp:function(e,t,i){return(1-i)*e+i*t}}),EntityPlayButtonPause=ig.Entity.extend({size:{x:123,y:87},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/playbtn.png",123,87),zIndex:100001,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntityBackButtonPause=ig.Entity.extend({size:{x:51,y:50},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/backbtn.png",51,50),zIndex:100001,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntityShopButtonPause=ig.Entity.extend({size:{x:50,y:60},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/shop.png",50,60),zIndex:100001,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}})}),ig.baked=!0,ig.module("game.levels.opening").requires("impact.image","game.entities.opening-kitty").defines(function(){LevelOpening={entities:[{type:"EntityOpeningKitty",x:520,y:212}],layer:[]}}),ig.baked=!0,ig.module("game.entities.buttons.button-sound").requires("game.entities.buttons.button").defines(function(){EntityButtonSound=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,logo:new ig.AnimationSheet(cervezaAguilaPathModule+"branding/logo.png",_SETTINGS.Branding.Logo.Width,_SETTINGS.Branding.Logo.Height),zIndex:10001,size:{x:50,y:50},mutetest:!1,name:"soundtest",init:function(e,t,i){this.parent(e,t,i)},draw:function(){this.parent(),ig.system.context.fillRect(this.pos.x,this.pos.y,50,50)},clicked:function(){console.log("pressed"),1==this.mutetest?(console.log("unmute"),ig.soundHandler.unmuteAll(!0),this.mutetest=!1):(console.log("mute"),ig.soundHandler.muteAll(!0),this.mutetest=!0)},clicking:function(){},released:function(){}})}),ig.baked=!0,ig.module("game.levels.test-desktop").requires("impact.image","game.entities.branding-logo-placeholder","game.entities.buttons.button-more-games","game.entities.pointer","game.entities.buttons.button-sound").defines(function(){LevelTestDesktop={entities:[{type:"EntityBrandingLogoPlaceholder",x:296,y:396,settings:{div_layer_name:"layer_mainmenu",centralize:"true"}},{type:"EntityButtonMoreGames",x:432,y:284,settings:{div_layer_name:"layer_moregames_mainmenu"}},{type:"EntityPointer",x:608,y:120},{type:"EntityButtonSound",x:192,y:284}],layer:[{name:"background",width:40,height:30,linkWithCollision:!1,visible:1,tilesetName:cervezaAguilaPathModule+"media/graphics/backgrounds/desktop/background.jpg",repeat:!1,preRender:!0,distance:"1",tilesize:16,foreground:!1,data:[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],[41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],[121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160],[161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200],[201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280],[281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320],[321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360],[361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400],[401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440],[441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480],[481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520],[521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560],[561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576,577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600],[601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640],[641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672,673,674,675,676,677,678,679,680],[681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720],[721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760],[761,762,763,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800],[801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816,817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840],[841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880],[881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920],[921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960],[961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1e3],[1001,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040],[1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080],[1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120],[1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152,1153,1154,1155,1156,1157,1158,1159,1160],[1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200]]}]},LevelTestDesktopResources=[new ig.Image(cervezaAguilaPathModule+"media/graphics/backgrounds/desktop/background.jpg")]}),ig.baked=!0,ig.module("game.entities.homecontrol").requires("impact.entity").defines(function(){EntityHomecontrol=ig.Entity.extend({bgImage:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/mobile/startscreen.png"),taxi:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/mobile/taxi.png"),rabbit:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/mobile/rabbit.png"),title:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/mobile/title.png"),startGameRect:{x:175,y:395,w:130,h:75},shopRect:{x:425,y:585,w:50,h:50},moreGamesRect:{x:7,y:585,w:50,h:50},soundRect:{x:423,y:9,w:50,h:50},soundMute:null,pointer:null,init:function(e,t,i){this.parent(e,t,i),this.targetTitle=220,this.targetTaxi=-150,this.timer=new ig.Timer,ig.game.spawnEntity(EntityCoinStart,80,350),ig.game.spawnEntity(EntityPlayerStart,102,380),ig.game.spawnEntity(EntityButtonMoreGames,7,585),ig.game.spawnEntity(EntityPlayButton,175,395),ig.game.spawnEntity(EntitySoundButton,423,9),ig.game.getSoundState(),this.soundMute=ig.game.soundMute,0==this.soundMute?(ig.soundHandler.unmuteAll(!0),(e=ig.game.getEntitiesByType(EntitySoundButton)[0])&&(e.currentAnim=e.anims.soundon)):(ig.soundHandler.muteAll(!0),(e=ig.game.getEntitiesByType(EntitySoundButton)[0])&&(e.currentAnim=e.anims.soundoff)),this.shopPressed=this.soundPressed=this.playPressed=!1,this.buttonDelay=new ig.Timer},ready:function(){this.pointer=ig.game.getEntitiesByType(EntityPointer)[0]},draw:function(){this.bgImage.draw(this.pos.x-this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y),this.taxi.draw(this.targetTaxi=this.lerp(this.targetTaxi,800,.01),320),this.title.draw(35,this.targetTitle)},aabbCheck:function(e,t){return e.x+e.w>t.x&&e.x<t.x+t.w&&e.y+e.h>t.y&&e.y<t.y+t.h},checkMainClicks:function(){if(ig.input.pressed("click")){this.pointer.refreshPos();var e={};if(e.x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.startGameRect)){var t=ig.game.getEntitiesByType(EntityPlayButton)[0];t&&t.setScale(.9,.9)}this.aabbCheck(e,this.shopRect),this.aabbCheck(e,this.soundRect)&&(e=ig.game.getEntitiesByType(EntitySoundButton)[0])&&e.setScale(.9,.9)}ig.input.released("click")&&(this.pointer.refreshPos(),(e={}).x=this.pointer.pos.x,e.y=this.pointer.pos.y,e.w=this.pointer.size.x,e.h=this.pointer.size.y,this.aabbCheck(e,this.startGameRect)?(this.buttonDelay.reset(),(t=ig.game.getEntitiesByType(EntityPlayButton)[0])&&t.setScale(1,1),this.playPressed=!0,ig.game.saveSoundState()):(this.playPressed=!1,(t=ig.game.getEntitiesByType(EntityPlayButton)[0])&&t.setScale(1,1)),this.aabbCheck(e,this.shopRect)?(this.buttonDelay.reset(),ig.game.saveSoundState()):this.shopPressed=!1,this.aabbCheck(e,this.moreGamesRect)&&(console.log("more games"),ig.soundHandler.sfxPlayer.play("button")),this.aabbCheck(e,this.soundRect)?(this.buttonDelay.reset(),(e=ig.game.getEntitiesByType(EntitySoundButton)[0])&&e.setScale(1,1),this.soundPressed=!0):(this.soundPressed=!1,(e=ig.game.getEntitiesByType(EntitySoundButton)[0])&&e.setScale(1,1)))},update:function(){if(this.checkMainClicks(),this.targetTitle=4*Math.sin(5*this.timer.delta())+130,750<=this.targetTaxi&&(this.targetTaxi=-150),1==this.playPressed&&.1<this.buttonDelay.delta()&&(ig.game.director.loadLevel(2),2==ig.game.director.currentLevel&&(ig.game.spawnEntity(EntityWorld,0,0,{zIndex:-1e3}),ig.game.spawnEntity(EntityPlayer,240,615)),ig.soundHandler.sfxPlayer.play("button"),this.playPressed=!1),1==this.soundPressed&&.1<this.buttonDelay.delta()){if(1==this.soundMute){console.log("unmute"),ig.soundHandler.unmuteAll(!0),this.soundMute=!1,ig.game.soundMute=this.soundMute;var e=ig.game.getEntitiesByType(EntitySoundButton)[0];e&&(e.currentAnim=e.anims.soundon)}else console.log("mute"),ig.soundHandler.muteAll(!0),this.soundMute=!0,ig.game.soundMute=this.soundMute,(e=ig.game.getEntitiesByType(EntitySoundButton)[0])&&(e.currentAnim=e.anims.soundoff);ig.game.saveSoundState(),this.soundPressed=!1}1==this.shopPressed&&.1<this.buttonDelay.delta()&&(ig.game.director.loadLevel(3),ig.soundHandler.sfxPlayer.play("button"),this.shopPressed=!1)},lerp:function(e,t,i){return(1-i)*e+i*t}}),EntityTitle=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/title.png",400,300),zIndex:100,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntityPlayButton=ig.Entity.extend({size:{x:123,y:87},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/playbtn.png",123,87),zIndex:100,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntitySoundButton=ig.Entity.extend({size:{x:49.5,y:61},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/soundsprite.png",49.5,61),zIndex:100,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("soundon",1,[0]),this.addAnim("soundoff",1,[1]),this.currentAnim=this.anims.soundon}}),EntityShopButton=ig.Entity.extend({size:{x:50,y:60},animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/shop.png",50,60),zIndex:100,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("idle",1,[0])}}),EntityCoinStart=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/coinss.png",54,98),zIndex:100,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("coin",.1,[0,1,2,3]),this.currentAnim=this.anims.coin,this.setScale(.75,.75)}}),EntityPlayerStart=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/rabbit.png",37,50),zIndex:100,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("player",1,[0]),this.currentAnim=this.anims.player,this.timerMove=new ig.Timer,this.timerStatic=new ig.Timer,this.move=!0,ig.game.spawnEntity(EntityShadowStart,108.5,452.5)},update:function(){if(1==this.move&&(this.pos.y=20*Math.sin(6*this.timerMove.delta())+400,this.timerStatic.reset()),419<=this.pos.y&&(this.move=!1,.1<this.timerStatic.delta()&&(this.move=!0)),410<=this.pos.y)this.setScale(1,-.01*(this.pos.y-410)+1);else{this.setScale(1,1);var e=ig.game.getEntitiesByType(EntityShadowStart)[0];e&&e.setScale(.01*(this.pos.y-400)+.8,.01*(this.pos.y-400)+.8)}},lerp:function(e,t,i){return(1-i)*e+i*t}}),EntityShadowStart=ig.Entity.extend({animSheet:new ig.AnimationSheet(cervezaAguilaPathModule+"media/graphics/game/mobile/shadow.png",25,16),zIndex:100,gravityFactor:0,init:function(e,t,i){this.parent(e,t,i),this.addAnim("shadow",1,[0]),this.currentAnim=this.anims.shadow}})}),ig.baked=!0,ig.module("game.levels.test-mobile").requires("impact.image","game.entities.homecontrol","game.entities.pointer").defines(function(){LevelTestMobile={entities:[{type:"EntityHomecontrol",x:0,y:0},{type:"EntityPointer",x:444,y:192}],layer:[]}}),ig.baked=!0,ig.module("game.levels.gameworld").requires("impact.image").defines(function(){LevelGameworld={entities:[],layer:[{name:"main",width:48,height:64,linkWithCollision:!1,visible:1,tilesetName:cervezaAguilaPathModule+"media/graphics/game/mobile/startscreen.png",repeat:!1,preRender:!1,distance:"1",tilesize:10,foreground:!1,data:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}]},LevelGameworldResources=[new ig.Image(cervezaAguilaPathModule+"media/graphics/game/mobile/startscreen.png")]}),ig.baked=!0,ig.module("game.levels.shop").requires("impact.image","game.entities.pointer","game.entities.shop").defines(function(){LevelShop={entities:[{type:"EntityShop",x:190,y:255},{type:"EntityPointer",x:396,y:128}],layer:[{name:"main",width:48,height:64,linkWithCollision:!1,visible:1,tilesetName:cervezaAguilaPathModule+"media/graphics/game/shopbg.png",repeat:!1,preRender:!1,distance:"1",tilesize:10,foreground:!1,data:[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],[49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96],[97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144],[145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192],[193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240],[241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288],[289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336],[337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384],[385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432],[433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480],[481,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528],[529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,545,546,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,569,570,571,572,573,574,575,576],[577,578,579,580,581,582,583,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624],[625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,670,671,672],[673,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,689,690,691,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720],[721,722,723,724,725,726,727,728,729,730,731,732,733,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768],[769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,815,816],[817,818,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,841,842,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,858,859,860,861,862,863,864],[865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,899,900,901,902,903,904,905,906,907,908,909,910,911,912],[913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960],[961,962,963,964,965,966,967,968,969,970,971,972,973,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1e3,1001,1002,1003,1004,1005,1006,1007,1008],[1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056],[1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104],[1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,1122,1123,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,1152],[1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,1182,1183,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,1199,1200],[1201,1202,1203,1204,1205,1206,1207,1208,1209,1210,1211,1212,1213,1214,1215,1216,1217,1218,1219,1220,1221,1222,1223,1224,1225,1226,1227,1228,1229,1230,1231,1232,1233,1234,1235,1236,1237,1238,1239,1240,1241,1242,1243,1244,1245,1246,1247,1248],[1249,1250,1251,1252,1253,1254,1255,1256,1257,1258,1259,1260,1261,1262,1263,1264,1265,1266,1267,1268,1269,1270,1271,1272,1273,1274,1275,1276,1277,1278,1279,1280,1281,1282,1283,1284,1285,1286,1287,1288,1289,1290,1291,1292,1293,1294,1295,1296],[1297,1298,1299,1300,1301,1302,1303,1304,1305,1306,1307,1308,1309,1310,1311,1312,1313,1314,1315,1316,1317,1318,1319,1320,1321,1322,1323,1324,1325,1326,1327,1328,1329,1330,1331,1332,1333,1334,1335,1336,1337,1338,1339,1340,1341,1342,1343,1344],[1345,1346,1347,1348,1349,1350,1351,1352,1353,1354,1355,1356,1357,1358,1359,1360,1361,1362,1363,1364,1365,1366,1367,1368,1369,1370,1371,1372,1373,1374,1375,1376,1377,1378,1379,1380,1381,1382,1383,1384,1385,1386,1387,1388,1389,1390,1391,1392],[1393,1394,1395,1396,1397,1398,1399,1400,1401,1402,1403,1404,1405,1406,1407,1408,1409,1410,1411,1412,1413,1414,1415,1416,1417,1418,1419,1420,1421,1422,1423,1424,1425,1426,1427,1428,1429,1430,1431,1432,1433,1434,1435,1436,1437,1438,1439,1440],[1441,1442,1443,1444,1445,1446,1447,1448,1449,1450,1451,1452,1453,1454,1455,1456,1457,1458,1459,1460,1461,1462,1463,1464,1465,1466,1467,1468,1469,1470,1471,1472,1473,1474,1475,1476,1477,1478,1479,1480,1481,1482,1483,1484,1485,1486,1487,1488],[1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1515,1516,1517,1518,1519,1520,1521,1522,1523,1524,1525,1526,1527,1528,1529,1530,1531,1532,1533,1534,1535,1536],[1537,1538,1539,1540,1541,1542,1543,1544,1545,1546,1547,1548,1549,1550,1551,1552,1553,1554,1555,1556,1557,1558,1559,1560,1561,1562,1563,1564,1565,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584],[1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1611,1612,1613,1614,1615,1616,1617,1618,1619,1620,1621,1622,1623,1624,1625,1626,1627,1628,1629,1630,1631,1632],[1633,1634,1635,1636,1637,1638,1639,1640,1641,1642,1643,1644,1645,1646,1647,1648,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680],[1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728],[1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1750,1751,1752,1753,1754,1755,1756,1757,1758,1759,1760,1761,1762,1763,1764,1765,1766,1767,1768,1769,1770,1771,1772,1773,1774,1775,1776],[1777,1778,1779,1780,1781,1782,1783,1784,1785,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1806,1807,1808,1809,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824],[1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1840,1841,1842,1843,1844,1845,1846,1847,1848,1849,1850,1851,1852,1853,1854,1855,1856,1857,1858,1859,1860,1861,1862,1863,1864,1865,1866,1867,1868,1869,1870,1871,1872],[1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920],[1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968],[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],[2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040,2041,2042,2043,2044,2045,2046,2047,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064],[2065,2066,2067,2068,2069,2070,2071,2072,2073,2074,2075,2076,2077,2078,2079,2080,2081,2082,2083,2084,2085,2086,2087,2088,2089,2090,2091,2092,2093,2094,2095,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2111,2112],[2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2137,2138,2139,2140,2141,2142,2143,2144,2145,2146,2147,2148,2149,2150,2151,2152,2153,2154,2155,2156,2157,2158,2159,2160],[2161,2162,2163,2164,2165,2166,2167,2168,2169,2170,2171,2172,2173,2174,2175,2176,2177,2178,2179,2180,2181,2182,2183,2184,2185,2186,2187,2188,2189,2190,2191,2192,2193,2194,2195,2196,2197,2198,2199,2200,2201,2202,2203,2204,2205,2206,2207,2208],[2209,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,2221,2222,2223,2224,2225,2226,2227,2228,2229,2230,2231,2232,2233,2234,2235,2236,2237,2238,2239,2240,2241,2242,2243,2244,2245,2246,2247,2248,2249,2250,2251,2252,2253,2254,2255,2256],[2257,2258,2259,2260,2261,2262,2263,2264,2265,2266,2267,2268,2269,2270,2271,2272,2273,2274,2275,2276,2277,2278,2279,2280,2281,2282,2283,2284,2285,2286,2287,2288,2289,2290,2291,2292,2293,2294,2295,2296,2297,2298,2299,2300,2301,2302,2303,2304],[2305,2306,2307,2308,2309,2310,2311,2312,2313,2314,2315,2316,2317,2318,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352],[2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400],[2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448],[2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496],[2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544],[2545,2546,2547,2548,2549,2550,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592],[2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640],[2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688],[2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2736],[2737,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2759,2760,2761,2762,2763,2764,2765,2766,2767,2768,2769,2770,2771,2772,2773,2774,2775,2776,2777,2778,2779,2780,2781,2782,2783,2784],[2785,2786,2787,2788,2789,2790,2791,2792,2793,2794,2795,2796,2797,2798,2799,2800,2801,2802,2803,2804,2805,2806,2807,2808,2809,2810,2811,2812,2813,2814,2815,2816,2817,2818,2819,2820,2821,2822,2823,2824,2825,2826,2827,2828,2829,2830,2831,2832],[2833,2834,2835,2836,2837,2838,2839,2840,2841,2842,2843,2844,2845,2846,2847,2848,2849,2850,2851,2852,2853,2854,2855,2856,2857,2858,2859,2860,2861,2862,2863,2864,2865,2866,2867,2868,2869,2870,2871,2872,2873,2874,2875,2876,2877,2878,2879,2880],[2881,2882,2883,2884,2885,2886,2887,2888,2889,2890,2891,2892,2893,2894,2895,2896,2897,2898,2899,2900,2901,2902,2903,2904,2905,2906,2907,2908,2909,2910,2911,2912,2913,2914,2915,2916,2917,2918,2919,2920,2921,2922,2923,2924,2925,2926,2927,2928],[2929,2930,2931,2932,2933,2934,2935,2936,2937,2938,2939,2940,2941,2942,2943,2944,2945,2946,2947,2948,2949,2950,2951,2952,2953,2954,2955,2956,2957,2958,2959,2960,2961,2962,2963,2964,2965,2966,2967,2968,2969,2970,2971,2972,2973,2974,2975,2976],[2977,2978,2979,2980,2981,2982,2983,2984,2985,2986,2987,2988,2989,2990,2991,2992,2993,2994,2995,2996,2997,2998,2999,3e3,3001,3002,3003,3004,3005,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024],[3025,3026,3027,3028,3029,3030,3031,3032,3033,3034,3035,3036,3037,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3052,3053,3054,3055,3056,3057,3058,3059,3060,3061,3062,3063,3064,3065,3066,3067,3068,3069,3070,3071,3072]]}]},LevelShopResources=[new ig.Image(cervezaAguilaPathModule+"media/graphics/game/shopbg.png")]}),ig.baked=!0,ig.module("game.main").requires("impact.game","impact.debug.debug","impact.font","plugins.patches.webkit-image-smoothing-patch","plugins.patches.windowfocus-onMouseDown-patch","plugins.handlers.dom-handler","plugins.handlers.size-handler","plugins.handlers.api-handler","plugins.audio.sound-handler","plugins.io.io-manager","plugins.splash-loader","plugins.tween","plugins.url-parameters","plugins.director","plugins.impact-storage","plugins.scale","plugins.branding.splash","game.entities.branding-logo-placeholder","game.entities.buttons.button-more-games","game.entities.opening-shield","game.entities.opening-kitty","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.entities.world","game.entities.player","game.entities.platform","game.entities.foliage","game.entities.coin","game.entities.vehicle","game.entities.endcontrol","game.entities.shop","game.entities.backbutton","game.entities.pausecontrol","game.levels.opening","game.levels.test-desktop","game.levels.test-mobile","game.levels.gameworld","game.levels.shop").defines(function(){this.START_OBFUSCATION,this.FRAMEBREAKER,MyGame=ig.Game.extend({io:null,paused:!1,highScore:0,coinCollected:0,restartEnabled:!1,coinui:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/coinui.png"),pauseui:new ig.Image(cervezaAguilaPathModule+"media/graphics/game/pause.png"),character:"rabbit",unlockedCharacter:[1,0,0,0,0],showTutorial:!0,soundMute:!1,gamePause:!1,score:0,gravity:100,addspeed:1,init:function(){this.setupMarketJsGameCenter(),this.io=new IoManager,this.setupUrlParams=new ig.UrlParameters,this.removeLoadingWheel(),this.finalize(),ig.input.bind(ig.KEY.UP_ARROW,"up"),ig.input.bind(ig.KEY.DOWN_ARROW,"down"),ig.input.bind(ig.KEY.RIGHT_ARROW,"right"),ig.input.bind(ig.KEY.LEFT_ARROW,"left"),ig.input.bind(ig.KEY.R,"restart"),ig.input.bind(ig.KEY.MOUSE1,"click"),ig.input.bind(ig.KEY.SPACE,"continue"),this.setupLocalStorage()},setupMarketJsGameCenter:function(){if(_SETTINGS)if(_SETTINGS.MarketJSGameCenter){var e=ig.domHandler.getElementByClass("gamecenter-activator");_SETTINGS.MarketJSGameCenter.Activator.Enabled&&_SETTINGS.MarketJSGameCenter.Activator.Position&&(console.log("MarketJSGameCenter activator settings present ...."),ig.domHandler.css(e,{position:"absolute",left:_SETTINGS.MarketJSGameCenter.Activator.Position.Left,top:_SETTINGS.MarketJSGameCenter.Activator.Position.Top,"z-index":3})),ig.domHandler.show(e)}else console.log("MarketJSGameCenter settings not defined in game settings")},finalize:function(){if(ig.ua.mobile){var e=ig.domHandler.getElementById("#play");ig.domHandler.attr(e,"onclick",'ig.soundHandler.sfxPlayer.play("staticSound");ig.game.splashClick();'),ig.domHandler.show(e)}else this.start();ig.sizeHandler.reorient()},removeLoadingWheel:function(){try{$("#ajaxbar").css("background","none")}catch(e){console.log(e)}},showDebugMenu:function(){console.log("showing debug menu ..."),ig.Entity._debugShowBoxes=!0,$(".ig_debug").show()},setupLocalStorage:function(){this.storage=new ig.Storage,this.getCoinStats(),this.getActiveCharacter()},saveCoinStats:function(){null!=this.storage&&this.storage.set("coinStats",this.coinCollected)},getCoinStats:function(){if(null!=this.storage){var e=this.storage.get("coinStats");null!=e&&(this.coinCollected=e)}},saveActiveCharacter:function(){null!=this.storage&&this.storage.set("character",this.character)},getActiveCharacter:function(){if(null!=this.storage){var e=this.storage.get("character");null!=e&&(this.character=e)}},saveUnlockedCharacter:function(){null!=this.storage&&this.storage.set("unlockedCharacter",this.unlockedCharacter)},getUnlockedCharacter:function(){if(null!=this.storage){var e=this.storage.get("unlockedCharacter");null!=e&&(this.unlockedCharacter=e)}},saveSoundState:function(){null!=this.storage&&this.storage.set("soundState",this.soundMute)},getSoundState:function(){if(null!=this.storage){var e=this.storage.get("soundState");null!=e&&(this.soundMute=e)}},saveHighScore:function(){null!=this.storage&&this.storage.set("highScore",this.highScore)},getHighScore:function(){if(null!=this.storage){var e=this.storage.get("highScore");null!=e&&(this.highScore=e)}},saveTutorial:function(){null!=this.storage&&this.storage.set("tutorial",this.showTutorial)},getTutorial:function(){if(null!=this.storage){var e=this.storage.get("tutorial");null!=e&&(this.showTutorial=e)}},start:function(){if(this.resetPlayerStats(),this.director=new ig.Director(this,[LevelOpening,LevelTestMobile,LevelGameworld,LevelShop]),_SETTINGS.Branding.Splash.Enabled)try{this.branding=new ig.BrandingSplash}catch(e){console.log(e),console.log("Loading original levels ..."),this.director.loadLevel(this.director.currentLevel)}else this.director.loadLevel(this.director.currentLevel);this.spawnEntity(EntityPointerSelector,50,50),ig.soundHandler.bgmPlayer.play(ig.soundHandler.bgmPlayer.soundList.background)},fpsCount:function(){this.fpsTimer||(this.fpsTimer=new ig.Timer(1)),this.fpsTimer&&0>this.fpsTimer.delta()?null!=this.fpsCounter?this.fpsCounter++:this.fpsCounter=0:(ig.game.fps=this.fpsCounter,this.fpsCounter=0,this.fpsTimer.reset())},endGame:function(){console.log("End game"),ig.soundHandler.bgmPlayer.stop(),ig.apiHandler.run("MJSEnd")},resetPlayerStats:function(){ig.log("resetting player stats ..."),this.playerStats={id:this.playerStats?this.playerStats.id:null}},splashClick:function(){var e=ig.domHandler.getElementById("#play");ig.domHandler.hide(e),ig.apiHandler.run("MJSFooter"),ig.apiHandler.run("MJSHeader"),ig.game.start()},pauseGame:function(){ig.system.stopRunLoop.call(ig.system),console.log("Game Paused")},resumeGame:function(){ig.system.startRunLoop.call(ig.system),console.log("Game Resumed")},showOverlay:function(e){for(i=0;i<e.length;i++)$("#"+e[i])&&$("#"+e[i]).show(),document.getElementById(e[i])&&(document.getElementById(e[i]).style.visibility="visible")},hideOverlay:function(e){for(i=0;i<e.length;i++)$("#"+e[i])&&$("#"+e[i]).hide(),document.getElementById(e[i])&&(document.getElementById(e[i]).style.visibility="hidden")},currentBGMVolume:1,addition:.1,update:function(){this.paused?this.updateWhilePaused():(this.parent(),ig.ua.mobile&&ig.soundHandler&&ig.soundHandler.forceLoopBGM()),(this.getEntitiesByType(EntityPlayerDeath)[0]||1==this.restartEnabled)&&ig.input.pressed("restart")&&(ig.game.director.loadLevel(2),2==ig.game.director.currentLevel&&(ig.game.spawnEntity(EntityPlayer,240,615),ig.game.spawnEntity(EntityWorld,0,0)),this.restartEnabled=!1)},updateWhilePaused:function(){for(var e=0;e<this.entities.length;e++)this.entities[e].ignorePause&&this.entities[e].update()},draw:function(){this.parent();var e=this.getEntitiesByType(EntityPlayer)[0],t=this.getEntitiesByType(EntityEndcontrol)[0];e&&(this.getCoinStats(),this.context=ig.system.context,this.context.font="75pt WorldsAtWar BB",this.context.textAlign="center",this.context.fillStyle="#ffffff",this.context.fillText(e.score,ig.system.width/2,75),this.context.font="36pt WorldsAtWar BB",this.context.textAlign="right",this.context.fillStyle="#ffffff",this.context.fillText(this.coinCollected,ig.system.width-42,40),this.coinui.draw(ig.system.width-35,15),this.pauseui.draw(ig.system.width-35,600)),t&&(this.context.font="30pt WorldsAtWar BB",this.context.textAlign="left",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.Score+t.score,22,40),this.context.textAlign="left",this.context.fillStyle="#ffffff",this.context.fillText(_STRINGS.PetHop.Best+ig.game.highScore,22,80))},clearCanvas:function(e,t,i){var s=e.canvas;e.clearRect(0,0,t,i),s.style.display="none",s.offsetHeight,s.style.display="inherit"},drawDebug:function(){if(!ig.global.wm&&(this.debugEnable(),this.viewDebug&&(ig.system.context.fillStyle="#000000",ig.system.context.globalAlpha=.35,ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height),ig.system.context.globalAlpha=1,this.debug&&0<this.debug.length)))for(i=0;i<this.debug.length;i++)ig.system.context.font="10px Arial",ig.system.context.fillStyle="#ffffff",ig.system.context.fillText(this.debugLine-this.debug.length+i+": "+this.debug[i],10,50+10*i)},debugCL:function(e){this.debug?(50>this.debug.length||this.debug.splice(0,1),this.debug.push(e),this.debugLine++):(this.debug=[],this.debugLine=1,this.debug.push(e)),console.log(e)},debugEnable:function(){ig.input.pressed("click")&&(this.debugEnableTimer=new ig.Timer(2)),this.debugEnableTimer&&0>this.debugEnableTimer.delta()?ig.input.released("click")&&(this.debugEnableTimer=null):this.debugEnableTimer&&0<this.debugEnableTimer.delta()&&(this.debugEnableTimer=null,this.viewDebug=!this.viewDebug)}}),ig.domHandler=null,ig.domHandler=new ig.DomHandler,ig.domHandler.forcedDeviceDetection(),ig.domHandler.forcedDeviceRotation(),ig.apiHandler=new ig.ApiHandler,ig.sizeHandler=new ig.SizeHandler(ig.domHandler),ig.Sound.enabled=!1,ig.main("#canvas",MyGame,60,480,640,ig.sizeHandler.scale,ig.SplashLoader),ig.sizeHandler.resize(),ig.soundHandler=null,ig.soundHandler=new ig.SoundHandler,ig.sizeHandler.reorient(),this.END_OBFUSCATION});